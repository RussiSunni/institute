import{_ as _t,u as yt,S as vt,r as st,o as J,c as ct,a as tt,w as wt,v as $t,b as U,p as kt,d as St,e as Mt,f as rt,g as xt,F as zt}from"./main-d6aac19c.js";import{u as Tt}from"./SkillTreeStore-11b24846.js";import{a as at,r as bt,c as Et,d as It,i as ft,T as Q,b as W,u as Pt,S as Dt,t as Rt,h as At}from"./transform-ec5f1b20.js";import{S as Bt}from"./fontfaceobserver.standalone-f5b26f33.js";function F(t){return typeof t=="string"?new at([[document.querySelector(t)]],[document.documentElement]):new at([[t]],bt)}function Vt(t){return F(Et(t).call(document.documentElement))}function qt(t){let n;for(;n=t.sourceEvent;)t=n;return t}function N(t,n){if(t=qt(t),n===void 0&&(n=t.currentTarget),n){var o=n.ownerSVGElement||n;if(o.createSVGPoint){var r=o.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var h=n.getBoundingClientRect();return[t.clientX-h.left-n.clientLeft,t.clientY-h.top-n.clientTop]}}return[t.pageX,t.pageY]}const et={capture:!0,passive:!1};function nt(t){t.preventDefault(),t.stopImmediatePropagation()}function Lt(t){var n=t.document.documentElement,o=F(t).on("dragstart.drag",nt,et);"onselectstart"in n?o.on("selectstart.drag",nt,et):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ft(t,n){var o=t.document.documentElement,r=F(t).on("dragstart.drag",null);n&&(r.on("click.drag",nt,et),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in o?r.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}var Nt=1e-12;function ut(t){return((t=Math.exp(t))+1/t)/2}function Yt(t){return((t=Math.exp(t))-1/t)/2}function Ut(t){return((t=Math.exp(2*t))-1)/(t+1)}const Xt=function t(n,o,r){function h(c,l){var v=c[0],g=c[1],f=c[2],s=l[0],y=l[1],$=l[2],x=s-v,R=y-g,z=x*x+R*R,A,d;if(z<Nt)d=Math.log($/f)/n,A=function(L){return[v+L*x,g+L*R,f*Math.exp(n*L*d)]};else{var T=Math.sqrt(z),M=($*$-f*f+r*z)/(2*f*o*T),b=($*$-f*f-r*z)/(2*$*o*T),E=Math.log(Math.sqrt(M*M+1)-M),I=Math.log(Math.sqrt(b*b+1)-b);d=(I-E)/n,A=function(L){var G=L*d,j=ut(E),C=f/(o*T)*(j*Ut(n*G+E)-Yt(E));return[v+C*x,g+C*R,f*j/ut(n*G+E)]}}return A.duration=d*1e3*n/Math.SQRT2,A}return h.rho=function(c){var l=Math.max(.001,+c),v=l*l,g=v*v;return t(l,v,g)},h}(Math.SQRT2,2,4),it=Math.PI,ot=2*it,Y=1e-6,Gt=ot-Y;function dt(t){this._+=t[0];for(let n=1,o=t.length;n<o;++n)this._+=arguments[n]+t[n]}function jt(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return dt;const o=10**n;return function(r){this._+=r[0];for(let h=1,c=r.length;h<c;++h)this._+=Math.round(arguments[h]*o)/o+r[h]}}class Ct{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?dt:jt(n)}moveTo(n,o){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,o){this._append`L${this._x1=+n},${this._y1=+o}`}quadraticCurveTo(n,o,r,h){this._append`Q${+n},${+o},${this._x1=+r},${this._y1=+h}`}bezierCurveTo(n,o,r,h,c,l){this._append`C${+n},${+o},${+r},${+h},${this._x1=+c},${this._y1=+l}`}arcTo(n,o,r,h,c){if(n=+n,o=+o,r=+r,h=+h,c=+c,c<0)throw new Error(`negative radius: ${c}`);let l=this._x1,v=this._y1,g=r-n,f=h-o,s=l-n,y=v-o,$=s*s+y*y;if(this._x1===null)this._append`M${this._x1=n},${this._y1=o}`;else if($>Y)if(!(Math.abs(y*g-f*s)>Y)||!c)this._append`L${this._x1=n},${this._y1=o}`;else{let x=r-l,R=h-v,z=g*g+f*f,A=x*x+R*R,d=Math.sqrt(z),T=Math.sqrt($),M=c*Math.tan((it-Math.acos((z+$-A)/(2*d*T)))/2),b=M/T,E=M/d;Math.abs(b-1)>Y&&this._append`L${n+b*s},${o+b*y}`,this._append`A${c},${c},0,0,${+(y*x>s*R)},${this._x1=n+E*g},${this._y1=o+E*f}`}}arc(n,o,r,h,c,l){if(n=+n,o=+o,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let v=r*Math.cos(h),g=r*Math.sin(h),f=n+v,s=o+g,y=1^l,$=l?h-c:c-h;this._x1===null?this._append`M${f},${s}`:(Math.abs(this._x1-f)>Y||Math.abs(this._y1-s)>Y)&&this._append`L${f},${s}`,r&&($<0&&($=$%ot+ot),$>Gt?this._append`A${r},${r},0,1,${y},${n-v},${o-g}A${r},${r},0,1,${y},${this._x1=f},${this._y1=s}`:$>Y&&this._append`A${r},${r},0,${+($>=it)},${y},${this._x1=n+r*Math.cos(c)},${this._y1=o+r*Math.sin(c)}`)}rect(n,o,r,h){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+o}h${r=+r}v${+h}h${-r}Z`}toString(){return this._}}function lt(t){return function(){return t}}function Kt(t){let n=3;return t.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const r=Math.floor(o);if(!(r>=0))throw new RangeError(`invalid digits: ${o}`);n=r}return t},()=>new Ct(n)}var Zt=Array.prototype.slice;function Ot(t){return t[0]}function Qt(t){return t[1]}function K(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Wt{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,o){if(n=+n,o=+o,this._point===0)this._point=1;else{const r=K(this._x0,this._y0),h=K(this._x0,this._y0=(this._y0+o)/2),c=K(n,this._y0),l=K(n,o);this._context.moveTo(...r),this._context.bezierCurveTo(...h,...c,...l)}this._x0=n,this._y0=o}}function Ht(t){return new Wt(t)}function Jt(t){return t.source}function te(t){return t.target}function ee(t){let n=Jt,o=te,r=Ot,h=Qt,c=null,l=null,v=Kt(g);function g(){let f;const s=Zt.call(arguments),y=n.apply(this,s),$=o.apply(this,s);if(c==null&&(l=t(f=v())),l.lineStart(),s[0]=y,l.point(+r.apply(this,s),+h.apply(this,s)),s[0]=$,l.point(+r.apply(this,s),+h.apply(this,s)),l.lineEnd(),f)return l=null,f+""||null}return g.source=function(f){return arguments.length?(n=f,g):n},g.target=function(f){return arguments.length?(o=f,g):o},g.x=function(f){return arguments.length?(r=typeof f=="function"?f:lt(+f),g):r},g.y=function(f){return arguments.length?(h=typeof f=="function"?f:lt(+f),g):h},g.context=function(f){return arguments.length?(f==null?c=l=null:l=t(c=f),g):c},g}function ne(){const t=ee(Ht);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Z=t=>()=>t;function ie(t,{sourceEvent:n,target:o,transform:r,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:h}})}function H(t){t.stopImmediatePropagation()}function X(t){t.preventDefault(),t.stopImmediatePropagation()}function oe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function se(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ht(){return this.__zoom||ft}function re(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ae(){return navigator.maxTouchPoints||"ontouchstart"in this}function ue(t,n,o){var r=t.invertX(n[0][0])-o[0][0],h=t.invertX(n[1][0])-o[1][0],c=t.invertY(n[0][1])-o[0][1],l=t.invertY(n[1][1])-o[1][1];return t.translate(h>r?(r+h)/2:Math.min(0,r)||Math.max(0,h),l>c?(c+l)/2:Math.min(0,c)||Math.max(0,l))}function le(){var t=oe,n=se,o=ue,r=re,h=ae,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],v=250,g=Xt,f=It("start","zoom","end"),s,y,$,x=500,R=150,z=0,A=10;function d(e){e.property("__zoom",ht).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",C).filter(h).on("touchstart.zoom",pt).on("touchmove.zoom",mt).on("touchend.zoom touchcancel.zoom",gt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(e,a,i,u){var p=e.selection?e.selection():e;p.property("__zoom",ht),e!==p?E(e,a,i,u):p.interrupt().each(function(){I(this,arguments).event(u).start().zoom(null,typeof a=="function"?a.apply(this,arguments):a).end()})},d.scaleBy=function(e,a,i,u){d.scaleTo(e,function(){var p=this.__zoom.k,m=typeof a=="function"?a.apply(this,arguments):a;return p*m},i,u)},d.scaleTo=function(e,a,i,u){d.transform(e,function(){var p=n.apply(this,arguments),m=this.__zoom,_=i==null?b(p):typeof i=="function"?i.apply(this,arguments):i,w=m.invert(_),k=typeof a=="function"?a.apply(this,arguments):a;return o(M(T(m,k),_,w),p,l)},i,u)},d.translateBy=function(e,a,i,u){d.transform(e,function(){return o(this.__zoom.translate(typeof a=="function"?a.apply(this,arguments):a,typeof i=="function"?i.apply(this,arguments):i),n.apply(this,arguments),l)},null,u)},d.translateTo=function(e,a,i,u,p){d.transform(e,function(){var m=n.apply(this,arguments),_=this.__zoom,w=u==null?b(m):typeof u=="function"?u.apply(this,arguments):u;return o(ft.translate(w[0],w[1]).scale(_.k).translate(typeof a=="function"?-a.apply(this,arguments):-a,typeof i=="function"?-i.apply(this,arguments):-i),m,l)},u,p)};function T(e,a){return a=Math.max(c[0],Math.min(c[1],a)),a===e.k?e:new Q(a,e.x,e.y)}function M(e,a,i){var u=a[0]-i[0]*e.k,p=a[1]-i[1]*e.k;return u===e.x&&p===e.y?e:new Q(e.k,u,p)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function E(e,a,i,u){e.on("start.zoom",function(){I(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(u).end()}).tween("zoom",function(){var p=this,m=arguments,_=I(p,m).event(u),w=n.apply(p,m),k=i==null?b(w):typeof i=="function"?i.apply(p,m):i,B=Math.max(w[1][0]-w[0][0],w[1][1]-w[0][1]),S=p.__zoom,P=typeof a=="function"?a.apply(p,m):a,V=g(S.invert(k).concat(B/S.k),P.invert(k).concat(B/P.k));return function(D){if(D===1)D=P;else{var q=V(D),O=B/q[2];D=new Q(O,k[0]-q[0]*O,k[1]-q[1]*O)}_.zoom(null,D)}})}function I(e,a,i){return!i&&e.__zooming||new L(e,a)}function L(e,a){this.that=e,this.args=a,this.active=0,this.sourceEvent=null,this.extent=n.apply(e,a),this.taps=0}L.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,a){return this.mouse&&e!=="mouse"&&(this.mouse[1]=a.invert(this.mouse[0])),this.touch0&&e!=="touch"&&(this.touch0[1]=a.invert(this.touch0[0])),this.touch1&&e!=="touch"&&(this.touch1[1]=a.invert(this.touch1[0])),this.that.__zoom=a,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var a=F(this.that).datum();f.call(e,this.that,new ie(e,{sourceEvent:this.sourceEvent,target:d,type:e,transform:this.that.__zoom,dispatch:f}),a)}};function G(e,...a){if(!t.apply(this,arguments))return;var i=I(this,a).event(e),u=this.__zoom,p=Math.max(c[0],Math.min(c[1],u.k*Math.pow(2,r.apply(this,arguments)))),m=N(e);if(i.wheel)(i.mouse[0][0]!==m[0]||i.mouse[0][1]!==m[1])&&(i.mouse[1]=u.invert(i.mouse[0]=m)),clearTimeout(i.wheel);else{if(u.k===p)return;i.mouse=[m,u.invert(m)],W(this),i.start()}X(e),i.wheel=setTimeout(_,R),i.zoom("mouse",o(M(T(u,p),i.mouse[0],i.mouse[1]),i.extent,l));function _(){i.wheel=null,i.end()}}function j(e,...a){if($||!t.apply(this,arguments))return;var i=e.currentTarget,u=I(this,a,!0).event(e),p=F(e.view).on("mousemove.zoom",k,!0).on("mouseup.zoom",B,!0),m=N(e,i),_=e.clientX,w=e.clientY;Lt(e.view),H(e),u.mouse=[m,this.__zoom.invert(m)],W(this),u.start();function k(S){if(X(S),!u.moved){var P=S.clientX-_,V=S.clientY-w;u.moved=P*P+V*V>z}u.event(S).zoom("mouse",o(M(u.that.__zoom,u.mouse[0]=N(S,i),u.mouse[1]),u.extent,l))}function B(S){p.on("mousemove.zoom mouseup.zoom",null),Ft(S.view,u.moved),X(S),u.event(S).end()}}function C(e,...a){if(t.apply(this,arguments)){var i=this.__zoom,u=N(e.changedTouches?e.changedTouches[0]:e,this),p=i.invert(u),m=i.k*(e.shiftKey?.5:2),_=o(M(T(i,m),u,p),n.apply(this,a),l);X(e),v>0?F(this).transition().duration(v).call(E,_,u,e):F(this).call(d.transform,_,u,e)}}function pt(e,...a){if(t.apply(this,arguments)){var i=e.touches,u=i.length,p=I(this,a,e.changedTouches.length===u).event(e),m,_,w,k;for(H(e),_=0;_<u;++_)w=i[_],k=N(w,this),k=[k,this.__zoom.invert(k),w.identifier],p.touch0?!p.touch1&&p.touch0[2]!==k[2]&&(p.touch1=k,p.taps=0):(p.touch0=k,m=!0,p.taps=1+!!s);s&&(s=clearTimeout(s)),m&&(p.taps<2&&(y=k[0],s=setTimeout(function(){s=null},x)),W(this),p.start())}}function mt(e,...a){if(this.__zooming){var i=I(this,a).event(e),u=e.changedTouches,p=u.length,m,_,w,k;for(X(e),m=0;m<p;++m)_=u[m],w=N(_,this),i.touch0&&i.touch0[2]===_.identifier?i.touch0[0]=w:i.touch1&&i.touch1[2]===_.identifier&&(i.touch1[0]=w);if(_=i.that.__zoom,i.touch1){var B=i.touch0[0],S=i.touch0[1],P=i.touch1[0],V=i.touch1[1],D=(D=P[0]-B[0])*D+(D=P[1]-B[1])*D,q=(q=V[0]-S[0])*q+(q=V[1]-S[1])*q;_=T(_,Math.sqrt(D/q)),w=[(B[0]+P[0])/2,(B[1]+P[1])/2],k=[(S[0]+V[0])/2,(S[1]+V[1])/2]}else if(i.touch0)w=i.touch0[0],k=i.touch0[1];else return;i.zoom("touch",o(M(_,w,k),i.extent,l))}}function gt(e,...a){if(this.__zooming){var i=I(this,a).event(e),u=e.changedTouches,p=u.length,m,_;for(H(e),$&&clearTimeout($),$=setTimeout(function(){$=null},x),m=0;m<p;++m)_=u[m],i.touch0&&i.touch0[2]===_.identifier?delete i.touch0:i.touch1&&i.touch1[2]===_.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),i.taps===2&&(_=N(_,this),Math.hypot(y[0]-_[0],y[1]-_[1])<A)){var w=F(this).on("dblclick.zoom");w&&w.apply(this,arguments)}}}return d.wheelDelta=function(e){return arguments.length?(r=typeof e=="function"?e:Z(+e),d):r},d.filter=function(e){return arguments.length?(t=typeof e=="function"?e:Z(!!e),d):t},d.touchable=function(e){return arguments.length?(h=typeof e=="function"?e:Z(!!e),d):h},d.extent=function(e){return arguments.length?(n=typeof e=="function"?e:Z([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),d):n},d.scaleExtent=function(e){return arguments.length?(c[0]=+e[0],c[1]=+e[1],d):[c[0],c[1]]},d.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],d):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},d.constrain=function(e){return arguments.length?(o=e,d):o},d.duration=function(e){return arguments.length?(v=+e,d):v},d.interpolate=function(e){return arguments.length?(g=e,d):g},d.on=function(){var e=f.on.apply(f,arguments);return e===f?d:e},d.clickDistance=function(e){return arguments.length?(z=(e=+e)*e,d):Math.sqrt(z)},d.tapDistance=function(e){return arguments.length?(A=+e,d):A},d}const he={setup(){const t=yt(),n=Tt(),o=Pt();return{userDetailsStore:t,skillTreeStore:n,skillTagsStore:o}},data(){return{stageContents:[],isSkillInfoPanelShown:!1,regularLockedUnmasteredNodeSprite:null,radius:0,width:null,height:null,radiusMultiplier:64,firstLevelNodeSize:100,regularNodeSize:50,subSkillRadius:50,skill:{id:null,children:[],isMastered:null,isUnlocked:null,container:null,name:null,description:null,tagIDs:[],sprite:null},isRecentered:!1}},components:{SkillTreeFilter:Dt,SkillPanel:Bt},async mounted(){this.skillTreeStore.userSkills.length==0&&await this.skillTreeStore.getUserSkills(),this.width=window.innerWidth,this.height=window.innerHeight,this.radius=Math.min(this.width,this.height)/2;const t=vt.from("center-node.png");this.skill={name:"SKILLS",sprite:t,children:this.skillTreeStore.userSkills},this.getAlgorithm()},methods:{getAlgorithm(){var t=[];t=JSON.parse(JSON.stringify(this.skill.children));function n(s){for(var y=s.length;y--;)s[y].type=="sub"&&s.splice(y,1),typeof s[y]<"u"&&s[y].children&&Array.isArray(s[y].children)&&s[y].children.length>0&&n(s[y].children)}n(t);var o={name:null,children:t};const h=Rt().size([2*Math.PI,this.radius*this.radiusMultiplier]).separation((s,y)=>(s.parent==y.parent,1/s.depth))(At(o)),c=this.width*0,l=this.height*.59,v=Vt("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",[-c,-l,this.width,this.height]).attr("style","width: 100%; height: auto; font: 10px sans-serif;"),g=v.append("g");g.append("g").attr("fill","none").attr("stroke","#FFF").attr("stroke-opacity",1).attr("stroke-width",2).selectAll().data(h.links()).join("path").attr("d",ne().angle(s=>s.x).radius(s=>s.y)),g.append("g").selectAll().data(h.descendants()).join("circle").attr("transform",s=>`rotate(${s.x*180/Math.PI-90}) translate(${s.y},0)`).attr("fill",function(s){if(s.depth==0)return"lightgreen";if(s.data.type=="domain")return"orange";if(s.data.level=="grade_school")return"yellow";if(s.data.level=="middle_school")return"lightblue";if(s.data.level=="high_school")return"green";if(s.data.level=="college")return"red";if(s.data.level=="phd")return"purple"}).attr("r",function(s){return s.depth==0?50:s.data.type=="domain"?20:5}),g.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll().data(h.descendants()).join("text").attr("transform",s=>`rotate(${s.x*180/Math.PI-90}) translate(${s.y},0) rotate(${s.x>=Math.PI?180:0})`).attr("dy","0.31em").attr("x",s=>s.x<Math.PI==!s.children?6:-6).attr("text-anchor",s=>s.x<Math.PI==!s.children?"start":"end").attr("paint-order","stroke").attr("stroke","white").attr("fill","currentColor").text(s=>s.data.skill_name),v.call(le().extent([[0,0],[this.width,this.height]]).scaleExtent([.1,20]).on("zoom",f));function f({transform:s}){g.attr("transform",s)}document.querySelector("#skilltree").append(v.node())}}},ce=t=>(kt("data-v-0dcd7519"),t=t(),St(),t),fe={class:"flex-container skill-tree-container"},de={id:"reset-button",class:"btn btn-info"},pe={id:"wrapper"},me={id:"skilltree"},ge=ce(()=>U("div",{id:"sidepanel-backdrop"},null,-1));function _e(t,n,o,r,h,c){const l=st("SkillTreeFilter"),v=st("SkillPanel");return J(),ct("div",fe,[tt(l,{id:"filter"}),wt(U("button",de,"Reset",512),[[$t,h.isRecentered]]),U("div",pe,[U("div",me,[tt(v,{skill:h.skill},null,8,["skill"])]),ge])])}const ye=_t(he,[["render",_e],["__scopeId","data-v-0dcd7519"]]);const ve=U("div",{id:"purple-banner"},null,-1),we=U("span",null,"Loading...",-1),xe={__name:"SkillTreeD3View",setup(t){return(n,o)=>(J(),ct(zt,null,[ve,(J(),Mt(xt,null,{default:rt(()=>[tt(ye)]),fallback:rt(()=>[we]),_:1}))],64))}};export{xe as default};
