import{u as M}from"./SkillsStore-094a67ce.js";import{_ as o,e as b,o as l,c as r,a as c,n as k,x as f,q as h,t as m,w as g,l as C,F as _,r as v,j as S,f as y}from"./main-dae9e940.js";const G="/images/banners/edit-mastery-skill-banner.png";const U={data(){return{showChildren:!1,user:{},studentGrade:this.grade}},props:["children","skill_name","is_mastered","is_accessible","id","grade","depth","MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade"],async created(){},computed:{labelClasses(){return{"has-children":this.nodes}},indent(){return{transform:`translate(${this.depth*50}px)`}}},methods:{toggleChildren(){this.showChildren=!this.showChildren}}},I={class:"d-flex"},w={key:0,style:{"padding-left":"10px"}},T={key:1},x={key:2},A={key:1},E={key:2};function L(t,s,e,d,n,a){const u=b("EditUserSkillsChild",!0);return l(),r("div",null,[c("div",{class:h(["label-wrapper",e.depth==0?"user-name":e.is_accessible!=1?"inaccessible":e.is_mastered!=1?"unmastered":"mastered"])},[c("div",I,[n.showChildren&&e.children.length>0?(l(),r("button",{key:0,onClick:s[0]||(s[0]=(...i)=>a.toggleChildren&&a.toggleChildren(...i)),class:"btn btn-dark"},"-")):e.children.length>0?(l(),r("button",{key:1,onClick:s[1]||(s[1]=(...i)=>a.toggleChildren&&a.toggleChildren(...i)),class:"btn btn-dark"},"+")):k("",!0),c("div",{style:f(a.indent),class:h(a.labelClasses)},[e.depth==0?(l(),r("h1",w,m(e.skill_name),1)):(l(),r("h2",T,m(e.skill_name),1)),e.depth!=0?(l(),r("div",x,[e.is_accessible!=1?(l(),r("button",{key:0,onClick:s[2]||(s[2]=i=>e.MakeAccessible(e.id)),class:"btn btn-dark"},"Make Accessible")):e.is_mastered!=1&&e.is_accessible==1?(l(),r("div",A,[c("button",{onClick:s[3]||(s[3]=i=>e.MakeInaccessible(e.id)),class:"btn btn-dark me-2"},"Make Inaccessible"),c("button",{onClick:s[4]||(s[4]=i=>e.MakeMastered(e.id)),class:"btn btn-dark"},"Make Mastered")])):e.is_mastered==1?(l(),r("div",E,[c("button",{onClick:s[5]||(s[5]=i=>e.MakeUnmastered(e.id)),class:"btn btn-dark me-2"},"Make Unmastered"),g(c("input",{"onUpdate:modelValue":s[6]||(s[6]=i=>n.studentGrade=i),type:"number",id:"grade",name:"grade",min:"0",max:"100",class:"me-2"},null,512),[[C,n.studentGrade]]),c("button",{onClick:s[7]||(s[7]=i=>e.SubmitGrade(e.id,n.studentGrade)),class:"btn btn-dark"},"Submit grade")])):k("",!0)])):k("",!0)],6)])],2),n.showChildren?(l(!0),r(_,{key:0},v(e.children,i=>(l(),S(u,{MakeAccessible:e.MakeAccessible,MakeInaccessible:e.MakeInaccessible,MakeMastered:e.MakeMastered,MakeUnmastered:e.MakeUnmastered,SubmitGrade:e.SubmitGrade,children:i.children,skill_name:i.skill_name,is_mastered:i.is_mastered,is_accessible:i.is_accessible,grade:i.grade,id:i.id,depth:e.depth+1},null,8,["MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade","children","skill_name","is_mastered","is_accessible","grade","id","depth"]))),256)):k("",!0)])}const V=o(U,[["render",L],["__scopeId","data-v-ff94bbfa"]]),j={setup(){return{skillsStore:M()}},data(){return{studentId:this.$route.params.id,student:{},studentSkillTree:{}}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.GetStudentDetails();const s=await(await fetch("/user-skills/"+this.studentId)).json();this.studentSkillTree.children=s},components:{EditUserSkillsChild:V},methods:{GetStudentDetails(){fetch("/users/show/"+this.studentId).then(function(t){return t.json()}).then(t=>this.student=t).then(()=>{this.studentSkillTree.skill_name=this.student.username})},GetStudentSkills(){fetch("/user-skills/"+this.studentId).then(function(t){return t.json()}).then(t=>this.studentSkillTree.children=t).then(()=>{this.isFetching=!0})},MakeAccessible(t){var s="/user-skills/accessible/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},MakeInaccessible(t){var s="/user-skills/inaccessible/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},MakeMastered(t){var s="/user-skills/mastered/"+this.studentId+"/"+t;fetch(s).then(()=>{const e=[];for(let d=0;d<this.skillsStore.skillsList.length;d++)this.skillsStore.skillsList[d].parent==t&&e.push(this.skillsStore.skillsList[d].id);for(let d=0;d<e.length;d++)this.MakeAccessible(e[d])}).then(e=>this.GetStudentSkills())},MakeUnmastered(t){var s="/user-skills/unmastered/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},SubmitGrade(t,s){console.log(s);var e="/user-skills/grade/"+this.studentId+"/"+t+"/"+s;fetch(e,{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(d=>this.GetStudentSkills())}}};function B(t,s,e,d,n,a){const u=b("EditUserSkillsChild");return l(),S(u,{children:n.studentSkillTree.children,depth:0,skill_name:n.studentSkillTree.skill_name,is_mastered:n.studentSkillTree.is_mastered,is_accessible:n.studentSkillTree.is_accessible,grade:n.studentSkillTree.grade,id:n.studentSkillTree.id,MakeAccessible:a.MakeAccessible,MakeInaccessible:a.MakeInaccessible,MakeMastered:a.MakeMastered,MakeUnmastered:a.MakeUnmastered,SubmitGrade:a.SubmitGrade},null,8,["children","skill_name","is_mastered","is_accessible","grade","id","MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade"])}const D=o(j,[["render",B]]),F=c("div",{id:"banner"},[c("img",{src:G,class:"img-fluid"})],-1),P={__name:"EditUserSkillsView",setup(t){return(s,e)=>(l(),r(_,null,[F,y(D)],64))}};export{P as default};
