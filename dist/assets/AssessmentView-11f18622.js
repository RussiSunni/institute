import{_ as q,o as n,c as o,d as s,m as T,g as C,h as b,j as A,w as S,l as y,b as r,e as v,v as g,A as w,F as k,t as _,k as Q,p as I,f as z,q as L,G as V,a as x}from"./main-fb71cde2.js";import{u as R}from"./SettingsStore-978d1271.js";import{u as P}from"./AssessmentsStore-1b416981.js";import{u as N}from"./UserSkillsStore-9cbd6e1f.js";const B={data(){return{skillId:this.$route.params.id}},setup(){},mounted:function(){$("#summernote").summernote({placeholder:"write down your answer here",tabsize:2,height:120,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(i){alert("Max image size is 2MB.")}}})},methods:{getAnswer(){return $("#summernote").summernote("code")},clearAnswer(){$("#summernote").summernote("code","")},setAnswer(i){$("#summernote").summernote("code",i)}}},D={class:"container mt-3"},j=s("div",{class:"row"},[s("div",{class:"mb-3"},[s("textarea",{id:"summernote",name:"answerdata"})])],-1),E=[j];function U(i,t,a,c,e,u){return n(),o("div",D,E)}const W=q(B,[["render",U]]);const H={setup(){const i=T(),t=N(),a=C();return{userDetailsStore:i,userSkillsStore:t,skillTreeStore:a}},data(){return{skillId:this.$route.params.id,question:{question:"",correctAnswer:"",incorrectAnswer1:"",incorrectAnswer2:"",incorrectAnswer3:"",incorrectAnswer4:"",question:"",explanation:""},validate:{validated:!1,question:!1,correctAnswer:!1,incorrectAnswer1:!1,incorrectAnswer2:!1,incorrectAnswer3:!1,incorrectAnswer4:!1,explanation:!1},studentId:null,reshake:!1,questionAddedModal:!1,questionSubmitted:!1,submittedMess:!1}},async mounted(){},methods:{Submit(){if(this.studentId=this.userDetailsStore.userId,this.validate.validated=!1,(this.question.question===""||this.question.question===null)&&(this.validate.question=!0,this.validate.validated=!0),(this.question.correctAnswer===""||this.question.correctAnswer===null)&&(this.validate.correctAnswer=!0,this.validate.validated=!0),(this.question.incorrectAnswer1===""||this.question.incorrectAnswer1===null)&&(this.validate.incorrectAnswer1=!0,this.validate.validated=!0),(this.question.incorrectAnswer2===""||this.question.incorrectAnswer2===null)&&(this.validate.incorrectAnswer2=!0,this.validate.validated=!0),(this.question.incorrectAnswer3===""||this.question.incorrectAnswer3===null)&&(this.validate.incorrectAnswer3=!0,this.validate.validated=!0),(this.question.incorrectAnswer4===""||this.question.incorrectAnswer4===null)&&(this.validate.incorrectAnswer4=!0,this.validate.validated=!0),(this.question.explanation===""||this.question.explanation===null)&&(this.validate.explanation=!0,this.validate.validated=!0),this.validate.validated){this.reshake=!0;return}const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:this.question.question,correct_answer:this.question.correctAnswer,incorrect_answer_1:this.question.incorrectAnswer1,incorrect_answer_2:this.question.incorrectAnswer2,incorrect_answer_3:this.question.incorrectAnswer3,incorrect_answer_4:this.question.incorrectAnswer4,explanation:this.question.explanation,skill_id:this.skillId,student_id:this.studentId})};var t="/questions/student-mc-questions/add";fetch(t,i).then(()=>{this.questionAddedModal=!0,this.questionSubmitted=!0,window.scrollTo(0,0)})},showSubmittedMess(){this.submittedMess=!0,setTimeout(()=>{this.submittedMess=!1},2e3)},skipAddingQuestion(){this.questionSubmitted=!0,window.scrollTo(0,0)}}},Y={class:"student-add-result pb-3 w-100"},J={class:"main-content-container container-fluid"},K={class:"row p-0"},O={key:1,id:"form-container",class:"col p-4"},G={key:0,class:"d-flex flex-column"},X=s("div",{id:"congrats-tile"}," Well done, you have passed! ",-1),Z=s("p",null," Would you like to add your own question on this subject? ",-1),ss=[X,Z],es={key:1,class:"d-flex flex-column shake"},ts=s("div",{id:"congrats-tile"}," Thank you for submitting your question. ",-1),is=[ts],ns={class:"mb-3"},os=s("label",{for:"last_name",class:"form-label"},"Question",-1),ls={class:"mb-3"},rs=s("label",{class:"form-label"},"Correct answer",-1),as={class:"mb-3"},cs=s("label",{class:"form-label"},"Wrong answer 1",-1),us={class:"mb-3"},ds=s("label",{class:"form-label"},"Wrong answer 2",-1),hs={class:"mb-3"},ms=s("label",{class:"form-label"},"Wrong answer 3",-1),_s={class:"mb-3"},fs=s("label",{class:"form-label"},"Wrong answer 4",-1),ps={class:"mb-3"},ws=s("label",{class:"form-label"},"Explanation",-1),vs={class:"d-flex justify-content-end gap-4"},gs={key:2,class:"form-validate shake"},ks={key:0},ys={id:"myModal",class:"modal"},bs={class:"modal-content"},qs=s("div",{class:"d-flex align-content-center"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"50",height:"50",fill:"green"},[s("path",{d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"})]),s("div",{class:"my-auto ms-2"}," Your question have been submitted ")],-1),xs={class:"d-flex flex-row-reverse"};function As(i,t,a,c,e,u){const h=b("RouterLink");return n(),o(k,null,[s("div",Y,[s("div",J,[s("div",K,[e.questionSubmitted?(n(),A(h,{key:0,class:"btn btn-light purple-btn",style:{width:"136px"},to:"/skills"},{default:S(()=>[y(" Back to skills ")]),_:1})):r("",!0),e.questionSubmitted?r("",!0):(n(),o("div",O,[e.questionSubmitted?r("",!0):(n(),o("div",G,ss)),e.questionSubmitted?(n(),o("div",es,is)):r("",!0),s("div",ns,[os,v(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.question.question=l),rows:"1",class:"form-control"},`\r
                        `,512),[[g,e.question.question]]),e.validate.question&&(e.question.question===""||e.question.question===null)?(n(),o("div",{key:0,class:w(["form-validate",{shake:e.reshake}]),onAnimationend:t[1]||(t[1]=l=>e.reshake=!1)}," please enter a question content ! ",34)):r("",!0)]),s("div",ls,[rs,v(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.question.correctAnswer=l),type:"text",class:"form-control"},null,512),[[g,e.question.correctAnswer]]),e.validate.correctAnswer&&(e.question.correctAnswer===""||e.question.correctAnswer===null)?(n(),o("div",{key:0,class:w(["form-validate",{shake:e.reshake}]),onAnimationend:t[3]||(t[3]=l=>e.reshake=!1)}," please enter a correct answer ! ",34)):r("",!0)]),s("div",as,[cs,v(s("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>e.question.incorrectAnswer1=l),type:"text",class:"form-control"},null,512),[[g,e.question.incorrectAnswer1]]),e.validate.incorrectAnswer1&&(e.question.incorrectAnswer1===""||e.question.incorrectAnswer1===null)?(n(),o("div",{key:0,class:w(["form-validate",{shake:e.reshake}]),onAnimationend:t[5]||(t[5]=l=>e.reshake=!1)}," please enter incorrect answer 1 ! ",34)):r("",!0)]),s("div",us,[ds,v(s("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>e.question.incorrectAnswer2=l),type:"text",class:"form-control"},null,512),[[g,e.question.incorrectAnswer2]]),e.validate.incorrectAnswer2&&(e.question.incorrectAnswer2===""||e.question.incorrectAnswer2===null)?(n(),o("div",{key:0,class:w(["form-validate",{shake:e.reshake}]),onAnimationend:t[7]||(t[7]=l=>e.reshake=!1)}," please enter incorrect answer 2 ! ",34)):r("",!0)]),s("div",hs,[ms,v(s("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>e.question.incorrectAnswer3=l),type:"text",class:"form-control"},null,512),[[g,e.question.incorrectAnswer3]]),e.validate.incorrectAnswer3&&(e.question.incorrectAnswer3===""||e.question.incorrectAnswer3===null)?(n(),o("div",{key:0,class:w(["form-validate",{shake:e.reshake}]),onAnimationend:t[9]||(t[9]=l=>e.reshake=!1)}," please enter incorrect answer 3 ! ",34)):r("",!0)]),s("div",_s,[fs,v(s("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>e.question.incorrectAnswer4=l),type:"text",class:"form-control"},null,512),[[g,e.question.incorrectAnswer4]]),e.validate.incorrectAnswer4&&(e.question.incorrectAnswer4===""||e.question.incorrectAnswer4===null)?(n(),o("div",{key:0,class:w(["form-validate  ",{shake:e.reshake}]),onAnimationend:t[11]||(t[11]=l=>e.reshake=!1)}," please enter incorrect answer 4 ! ",34)):r("",!0)]),s("div",ps,[ws,v(s("textarea",{"onUpdate:modelValue":t[12]||(t[12]=l=>e.question.explanation=l),class:"form-control",rows:"3"},null,512),[[g,e.question.explanation]]),e.validate.explanation&&(e.question.explanation===""||e.question.explanation===null)?(n(),o("div",{key:0,class:w(["form-validate ",{shake:e.reshake}]),onAnimationend:t[13]||(t[13]=l=>e.reshake=!1)}," please enter a explanation ! ",34)):r("",!0)]),s("div",vs,[s("button",{class:"btn btn-light",onClick:t[14]||(t[14]=(...l)=>u.skipAddingQuestion&&u.skipAddingQuestion(...l))}," Skip "),s("button",{class:"btn purple-btn",onClick:t[15]||(t[15]=l=>e.questionSubmitted?u.showSubmittedMess():u.Submit())}," Submit ")]),e.submittedMess?(n(),o("div",gs," You already submitted a question !! ")):r("",!0)]))])])]),e.questionAddedModal?(n(),o("div",ks,[s("div",ys,[s("div",bs,[qs,s("div",xs,[s("button",{type:"button",class:"btn green-btn",onClick:t[16]||(t[16]=l=>e.questionAddedModal=!1)}," ok "),e.questionSubmitted?(n(),A(h,{key:0,class:"btn btn-light purple-btn mx-2",to:"/skills"},{default:S(()=>[y(" Back to skills ")]),_:1})):r("",!0)])])])])):r("",!0)],64)}const F=q(H,[["render",As]]);const Ss={setup(){return{userDetailsStore:T()}},components:{StudentAddMCQuestion:F},data(){return{assessmentResult:"",finishDate:"",finishTime:"",parent:"",score:0,totalScore:1,scorePercent:0,mcQuestions:[],essayQuestions:0,correctIndex:[],passModal:!1,failsModal:!1,waitForMarkModal:!1,questionToFlagId:0,questionToFlagType:"",showFlaggingModal:!1,showThankModal:!1}},props:["skill"],mounted(){switch(this.assessmentResult=this.$parent.assessmentStatus,this.assessmentResult){case"pass":this.passModal=!0;break;case"fails":this.failsModal=!0;break;case"wait for essay answers to be mark":this.waitForMarkModal=!0;break}this.finishDate=this.$parent.finishTime.toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),this.finishTime=this.$parent.finishTime.toLocaleTimeString(),this.score=this.$parent.score,this.totalScore=this.$parent.numMCQuestions,this.totalScore!==0&&(this.scorePercent=Math.floor(this.score/this.totalScore*100)),this.mcQuestions=this.$parent.questions.filter(i=>i.questionType==="mc"),this.essayQuestions=this.$parent.questions.length-this.mcQuestions.length,this.correctIndex=[1]},methods:{flagQuestion(){const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_type:this.questionToFlagType,content_id:this.questionToFlagId,user_id:this.userDetailsStore.userId})};var t="/content-flags/add";fetch(t,i).then(()=>{this.showThankModal=!0,this.showFlaggingModal=!1})},setQuestionForFlagging(i,t){this.questionToFlagId=i,this.questionToFlagType=t,this.showFlaggingModal=!0}}},d=i=>(I("data-v-a2a6f82c"),i=i(),z(),i),Ms={class:"container mt-3 pb-3"},Qs=d(()=>s("div",{class:"page-tile"},"Assessment Result",-1)),Ts={class:"d-flex flex-md-row flex-column gap-3"},$s={class:"assessment-info"},Is=d(()=>s("span",{class:"info-label"},"Result:",-1)),zs={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 512",fill:"red",height:"14",width:"14",class:"status-icon"},Cs=d(()=>s("path",{d:"M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V320c0 17.7 14.3 32 32 32s32-14.3 32-32V64zM32 480a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"},null,-1)),Ls=[Cs],Ns={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"green",height:"14",width:"14",class:"mb-1"},Fs=d(()=>s("path",{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},null,-1)),Vs=[Fs],Rs=d(()=>s("span",{class:"info-label"},"Finish Date: ",-1)),Ps={class:"info-value"},Bs={id:"finish-time"},Ds={class:"hover-cursor","b-on-hover":"",title:"you need to score above 90% to pass the assessment"},js=d(()=>s("span",{class:"info-label"},"Score: ",-1)),Es={class:"info-value"},Us=d(()=>s("span",null,"*",-1)),Ws={key:0,class:"essay-warning"},Hs={class:"mc-question-result"},Ys=["onClick"],Js={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{height:"22px",opacity:"0.5"}},Ks=d(()=>s("path",{fill:"#8f7bd6",d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"},null,-1)),Os=[Ks],Gs={class:"question"},Xs={class:"d-flex flex-column"},Zs={class:"form-check my-3"},se={class:"control control-checkbox"},ee={key:0,class:"correct-indicate"},te={key:1,class:"user-answer-indicate"},ie={key:2,class:"correct-indicate"},ne=["value","disabled"],oe={class:"control_indicator"},le={key:0,class:"checked"},re={class:"explain-answer"},ae=d(()=>s("div",{class:"explain-label"},"Explain:",-1)),ce={class:"explain-text"},ue={key:0},de={id:"myModal",class:"modal"},he={class:"modal-content"},me=d(()=>s("div",{class:"d-flex align-content-center"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"50",height:"50",fill:"green"},[s("path",{d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"})]),s("div",{class:"my-auto ms-2"}," Well done! You passed and have now mastered the skill! ")],-1)),_e={class:"d-flex flex-row-reverse"},fe={key:1},pe={id:"myModal",class:"modal"},we={class:"modal-content"},ve=d(()=>s("div",{class:"d-flex align-content-center"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"red",width:"50",height:"50"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})]),s("div",{class:"my-auto ms-2"}," You failed this time, try again later! ")],-1)),ge={class:"d-flex flex-row-reverse"},ke={key:2},ye={id:"myModal",class:"modal"},be={class:"modal-content"},qe=d(()=>s("div",null," There is at least one question that needs to be marked by your instructor. Please check whether you passed later. ",-1)),xe={class:"d-flex flex-row-reverse"},Ae={key:3},Se={id:"myModal",class:"modal"},Me={class:"modal-content-flag"},Qe=d(()=>s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null," Would you like to flag this as unhelpful or incorrect for admin review ")],-1)),Te={class:"d-flex justify-content-between gap-2"},$e=d(()=>s("span",{class:"d-none d-md-block"}," No ",-1)),Ie=d(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none modal-icon"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)),ze=[$e,Ie],Ce=d(()=>s("span",{class:"d-none d-md-block"}," Yes ",-1)),Le=d(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none modal-icon"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)),Ne=[Ce,Le],Fe={key:4},Ve={id:"myModal",class:"modal"},Re={class:"modal-content-flag"},Pe=d(()=>s("div",{class:"d-flex gap-4 text-center"},[s("p",null," Thank you for flagging this question. We will take a look as soon as possible !! ")],-1)),Be={class:"d-flex justify-content-center"},De=d(()=>s("span",null," OK ",-1)),je=[De];function Ee(i,t,a,c,e,u){const h=b("StudentAddMCQuestion");return n(),o(k,null,[s("div",Ms,[Qs,s("div",Ts,[s("div",$s,[s("div",null,[Is,s("span",{class:w(e.assessmentResult=="pass"?"student-pass":"student-fail")},[y(_(e.assessmentResult)+" ",1),e.assessmentResult==="failed"?(n(),o("svg",zs,Ls)):r("",!0),e.assessmentResult==="pass"?(n(),o("svg",Ns,Vs)):r("",!0)],2)]),s("div",null,[Rs,s("span",Ps,[y(_(e.finishDate)+" ",1),s("span",Bs," at "+_(e.finishTime),1)])]),s("div",Ds,[js,s("span",Es,_(e.score)+" out "+_(e.totalScore),1),y(" ( "+_(e.scorePercent)+"%) ",1),Us]),e.essayQuestions!=0?(n(),o("div",Ws," There are "+_(e.essayQuestions)+" answers that needed to be mark by your instructor ",1)):r("",!0)]),e.assessmentResult==="pass"?(n(),A(h,{key:0})):r("",!0)]),(n(!0),o(k,null,Q(e.mcQuestions,l=>(n(),o("div",Hs,[s("div",{"b-tooltip.hover":"",title:"flag this question for review",onClick:m=>u.setQuestionForFlagging(l.id,"mc_question"),class:"flagging-icon",style:{height:"50px"}},[(n(),o("svg",Js,Os))],8,Ys),s("div",{class:w(l.userAnswer===1?"correct-label":"wrong-label")},_(l.userAnswer===1?"Correct !!":"Incorrect !!"),3),s("div",Gs,_(l.question),1),s("div",Xs,[(n(!0),o(k,null,Q(l.answerOptions,(m,f)=>(n(),o("div",Zs,[s("label",se,[s("div",{class:w(["my-auto mx-2 me-4 answer-option ",m.index==1?" correct-answer":l.userAnswer==m.index?"user-answer":" incorrect-answer"])},[y(_(m.option)+" ",1),m.index==1&&l.userAnswer!==1?(n(),o("span",ee," (correct answer)")):r("",!0),m.index!==1&&l.userAnswer==m.index?(n(),o("span",te," (your answer)")):r("",!0),m.index==1&&l.userAnswer==1?(n(),o("span",ie," (you are correct !)")):r("",!0)],2),s("input",{type:"radio",name:"nodeType",value:m.index,disabled:m.index!=1},null,8,ne),s("div",oe,[m.index==1?(n(),o("div",le)):r("",!0)])])]))),256)),s("div",re,[ae,s("div",ce,_(l.explanation),1)])])]))),256))]),e.passModal?(n(),o("div",ue,[s("div",de,[s("div",he,[me,s("div",_e,[s("button",{type:"button",class:"btn green-btn",onClick:t[0]||(t[0]=l=>e.passModal=!1)}," Great! ")])])])])):r("",!0),e.failsModal?(n(),o("div",fe,[s("div",pe,[s("div",we,[ve,s("div",ge,[s("button",{type:"button",class:"btn red-btn",onClick:t[1]||(t[1]=l=>e.failsModal=!1)}," OK ")])])])])):r("",!0),e.waitForMarkModal?(n(),o("div",ke,[s("div",ye,[s("div",be,[qe,s("div",xe,[s("button",{type:"button",class:"btn green-btn",onClick:t[2]||(t[2]=l=>e.waitForMarkModal=!1)}," OK ")])])])])):r("",!0),e.showFlaggingModal?(n(),o("div",Ae,[s("div",Se,[s("div",Me,[Qe,s("div",Te,[s("button",{type:"button",class:"btn red-btn w-md-25",onClick:t[3]||(t[3]=l=>e.showFlaggingModal=!1)},ze),s("button",{type:"button",class:"btn green-btn w-md-25",onClick:t[4]||(t[4]=l=>u.flagQuestion())},Ne)])])])])):r("",!0),e.showThankModal?(n(),o("div",Fe,[s("div",Ve,[s("div",Re,[Pe,s("div",Be,[s("button",{type:"button",class:"btn green-btn w-25",onClick:t[5]||(t[5]=l=>e.showThankModal=!1)},je)])])])])):r("",!0)],64)}const Ue=q(Ss,[["render",Ee],["__scopeId","data-v-a2a6f82c"]]);const We={setup(){const i=T(),t=R(),a=L(),c=P(),e=N(),u=C();return{userDetailsStore:i,settingsStore:t,skillsStore:a,assessmentsStore:c,userSkillsStore:e,skillTreeStore:u}},data(){return{loading:!0,skillId:this.$route.params.id,skill:{},mcQuestions:[],mcQuestionsAnswer:[],essayQuestions:[],questions:[],question:{},questionNumber:0,score:0,assessmentId:null,numMCQuestions:0,numEssayQuestions:0,totalNumOfQuestions:0,isAllQuestionsAnswered:!1,waitForMarkModal:!1,oldAssessment:void 0,updatedAssessment:!1,showFlaggingModal:!1,isQuizPassed:!1,showThankModal:!1,answerHoveredIndex:1/0,showResult:!1,assessmentStatus:"",haveEssayQuestion:!1,finishTime:null,needToSelectInstructor:!1}},mounted:function(){$(".summernote").summernote({placeholder:"this is the summer note",tabsize:2,height:120,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(i){alert("Max image size is 2MB.")}}})},async created(){this.settingsStore.quizMaxQuestions==null&&await this.settingsStore.getSettings(),await this.assessmentsStore.getAssessments();const i=this.assessmentsStore.assessments,t=await this.userDetailsStore.getUserDetails();let a;for(let c=0;c<this.skillsStore.skillsList.length;c++)this.skillsStore.skillsList[c].id==this.skillId&&(a=this.skillsStore.skillsList[c].type,this.skill=this.skillsStore.skillsList[c]);if(this.oldAssessment=i.find(c=>c.student_id===t.userId&&c.skill_id===this.skill.id),this.oldAssessment!==void 0&&(this.updatedAssessment=!0),a!="super")await this.fetchMCQuestions(this.skillId);else{let c=[];for(let e=0;e<this.skillsStore.skillsList.length;e++)this.skillsStore.skillsList[e].parent==this.skillId&&this.skillsStore.skillsList[e].type=="sub"&&c.push(this.skillsStore.skillsList[e]);for(let e=0;e<c.length;e++)await this.fetchMCQuestions(c[e].id)}},components:{EssayAnswer:W,StudentAddMCQuestion:F,AssessmentResult:Ue},methods:{async fetchMCQuestions(i){fetch("/questions/"+i+"/multiple-choice").then(function(t){return t.json()}).then(t=>{this.mcQuestions=this.mcQuestions.concat(t)}).then(()=>{for(let a=0;a<this.mcQuestions.length;a++)this.mcQuestions[a].userAnswer=null,this.mcQuestions[a].questionType="mc";for(let a=0;a<this.mcQuestions.length;a++){var t=[];t.push({option:this.mcQuestions[a].correct_answer,index:1}),t.push({option:this.mcQuestions[a].incorrect_answer_1,index:2}),t.push({option:this.mcQuestions[a].incorrect_answer_2,index:3}),t.push({option:this.mcQuestions[a].incorrect_answer_3,index:4}),t.push({option:this.mcQuestions[a].incorrect_answer_4,index:5}),t=t.sort((c,e)=>.5-Math.random());for(let c=0;c<t.length;c++)t[c].option.toUpperCase()=="all of the above".toUpperCase()&&function(u,h,l){var m=u[h];u.splice(h,1),u.splice(l,0,m)}(t,c,4);this.mcQuestions[a].answerOptions=t}}).then(()=>{this.fetchEssayQuestions(i)})},async fetchEssayQuestions(i){fetch("/questions/"+i+"/essay").then(function(t){return t.json()}).then(t=>{t.length>0&&!this.userDetailsStore.instructor.id&&(this.needToSelectInstructor=!0),this.essayQuestions=this.essayQuestions.concat(t)}).then(()=>{for(let t=0;t<this.essayQuestions.length;t++)this.essayQuestions[t].userAnswer=null,this.essayQuestions[t].questionType="essay"}).then(()=>{this.questions=this.essayQuestions.concat(this.mcQuestions),this.questions=this.questions.sort((t,a)=>.5-Math.random()),this.questions.length>this.settingsStore.quizMaxQuestions&&(this.questions.length=this.settingsStore.quizMaxQuestions),this.question=this.questions[0],this.totalNumOfQuestions=this.questions.length}).then(()=>{this.loading=!1})},Next(){if(this.question.questionType=="essay"){const i=this.$refs.essayAnswer.getAnswer();this.questions[this.questionNumber].userAnswer=i,this.$refs.essayAnswer.clearAnswer()}this.questionNumber++,this.question=this.questions[this.questionNumber],this.question.questionType=="essay"&&this.question.userAnswer&&this.$refs.essayAnswer.setAnswer(this.question.userAnswer)},Previous(){if(this.question.questionType=="essay"){const i=this.$refs.essayAnswer.getAnswer();this.questions[this.questionNumber].userAnswer=i}this.questionNumber--,this.question=this.questions[this.questionNumber],this.question.questionType=="essay"&&this.$refs.essayAnswer.setAnswer(this.question.userAnswer)},Submit(){if(this.finishTime=new Date,this.question.questionType=="essay"){const t=this.$refs.essayAnswer.getAnswer();this.questions[this.questionNumber].userAnswer=t}for(let t=0;t<this.questions.length;t++)this.questions[t].questionType=="mc"?(this.numMCQuestions++,this.questions[t].userAnswer==1&&this.score++):this.numEssayQuestions++;if(this.numEssayQuestions===0)this.score/this.numMCQuestions*100>=80?(this.MakeMastered(this.skill),this.isQuizPassed=!0,this.assessmentStatus="pass",this.showResult=!0):(this.isQuizPassed=!0,this.assessmentStatus="fails",this.showResult=!0);else{let t="POST";this.oldAssessment!==void 0&&(t="PUT");const a={method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({totalScore:this.totalNumOfQuestions,currentScore:this.score,numUnmarkedQuestions:this.numEssayQuestions})};var i="/assessments/"+this.userDetailsStore.userId+"/"+this.skillId;const c=()=>{this.isQuizPassed=!0,this.showResult=!0,this.assessmentStatus="wait for essay answers to be mark"};fetch(i,a).then(function(e){return e.json()}).then(e=>{this.assessmentId=e.id,fetch("/unmarked-answers/delete/"+this.assessmentId,{method:"DELETE"}).then(()=>{for(let h=0;h<this.questions.length;h++)if(this.questions[h].questionType=="essay"){const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:this.questions[h].userAnswer,questionId:this.questions[h].id})};var u="/unmarked-answers/add/"+this.assessmentId;fetch(u,l).then(function(m){c()})}})})}},UserAnswer(){for(let i=0;i<this.questions.length;i++)if(this.questions[i].userAnswer==null){this.isAllQuestionsAnswered=!1;return}else this.isAllQuestionsAnswered=!0},TestPass(){this.isQuizPassed=!0},flagQuestion(i){const t=this.question.questionType=="mc"?"mc_question":"essay_question",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_type:t,content_id:i,user_id:this.userDetailsStore.userId})};var c="/content-flags/add";fetch(c,a).then(()=>{this.showThankModal=!0,this.showFlaggingModal=!1})},async MakeMastered(i){await this.userSkillsStore.MakeMastered(this.userDetailsStore.userId,i),await this.skillTreeStore.getUserSkills()}}},p=i=>(I("data-v-5f885b49"),i=i(),z(),i),He={key:0},Ye={key:1},Je={key:0},Ke={id:"myModal",class:"modal"},Oe={class:"modal-content"},Ge=p(()=>s("div",{class:"mb-2"}," You are taking a new quiz for this skill while your old one is still waiting to be marked. Please note that your old answers will be replaced. ",-1)),Xe={class:"d-flex flex-row-reverse"},Ze={class:"pb-2 pb-md-0"},st={key:0,class:"container mt-5 mb-3 p-3 pt-2 mb-3",id:"question-container"},et={class:"row"},tt={class:"col d-flex my-2 gap-2 justify-content-between flex-column flex-md-row"},it={class:"d-flex align-items-lg-center"},nt={id:"question-number-div"},ot={id:"question-content"},lt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{height:"22px",opacity:"0.5"}},rt=p(()=>s("path",{fill:"#8f7bd6",d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"},null,-1)),at=[rt],ct={key:0},ut={class:"form-check my-3"},dt={class:"control control-checkbox"},ht=["value"],mt=["onMouseover"],_t={key:1},ft={class:"form-group"},pt={class:"mt-3 d-flex justify-content-end"},wt={key:1,id:"question-content"},vt={key:3},gt={id:"myModal",class:"modal"},kt={class:"modal-content-flag"},yt=p(()=>s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null," Would you like to flag this as unhelpful or incorrect for admin review ")],-1)),bt={class:"d-flex justify-content-between gap-2"},qt=p(()=>s("span",{class:"d-none d-md-block"}," No ",-1)),xt=p(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none modal-icon"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)),At=[qt,xt],St=p(()=>s("span",{class:"d-none d-md-block"}," Yes ",-1)),Mt=p(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none modal-icon"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)),Qt=[St,Mt],Tt={key:4},$t={id:"myModal",class:"modal"},It={class:"modal-content-flag"},zt=p(()=>s("div",{class:"d-flex gap-4 text-center"},[s("p",null," Thank you for flagging this question. We will take a look as soon as possible !! ")],-1)),Ct={class:"d-flex justify-content-center"},Lt=p(()=>s("span",null," OK ",-1)),Nt=[Lt],Ft={key:5,class:"modal"},Vt={class:"modal-content"},Rt=p(()=>s("div",{class:""},[s("p",{class:"text-center"}," Please choose an instructor before taking these quizzes. ")],-1)),Pt={class:"d-flex flex-column-reverse flex-md-row justify-content-center gap-2"},Bt=p(()=>s("span",null,"Back",-1)),Dt=p(()=>s("span",null,"Select Instructor",-1));function jt(i,t,a,c,e,u){const h=b("EssayAnswer"),l=b("AssessmentResult"),m=b("RouterLink");return n(),o(k,null,[e.loading==!0?(n(),o("div",He,"Loading...")):r("",!0),e.loading==!1&&e.isQuizPassed==!1&&!e.needToSelectInstructor?(n(),o("div",Ye,[e.updatedAssessment?(n(),o("div",Je,[s("div",Ke,[s("div",Oe,[Ge,s("div",Xe,[s("button",{type:"button",class:"btn green-btn",onClick:t[0]||(t[0]=f=>this.updatedAssessment=!1)}," OK ")])])])])):r("",!0),s("div",Ze,[e.questions.length>0?(n(),o("div",st,[s("div",et,[s("div",tt,[s("div",it,[s("div",nt,_(this.questionNumber+1),1),s("div",ot,_(e.question.question),1)]),s("div",{"b-tooltip.hover":"",title:"flag this question for review",onClick:t[1]||(t[1]=f=>e.showFlaggingModal=!0),class:"flagging-icon",style:{height:"50px"}},[(n(),o("svg",lt,at))])]),this.question.questionType=="mc"?(n(),o("div",ct,[(n(!0),o(k,null,Q(this.question.answerOptions,(f,ii)=>(n(),o("div",ut,[s("label",dt,[s("div",{class:w(e.answerHoveredIndex==f.index?"my-auto mx-2 me-4 answer-option checkbox-hovered":"my-auto mx-2 me-4 answer-option")},_(f.option),3),v(s("input",{type:"radio",name:"nodeType",value:f.index,"onUpdate:modelValue":t[2]||(t[2]=M=>e.questions[this.questionNumber].userAnswer=M)},null,8,ht),[[V,e.questions[this.questionNumber].userAnswer]]),s("div",{class:"control_indicator",onMouseover:M=>e.answerHoveredIndex=f.index,onMouseleave:t[3]||(t[3]=M=>e.answerHoveredIndex=1/0)},null,40,mt)])]))),256))])):this.question.questionType=="essay"?(n(),o("div",_t,[s("div",ft,[x(h,{ref:"essayAnswer"},null,512)])])):r("",!0)]),s("div",pt,[this.questionNumber>0?(n(),o("button",{key:0,onClick:t[4]||(t[4]=f=>u.Previous()),class:"btn red-btn me-2"}," Previous ")):r("",!0),this.questionNumber!=e.questions.length-1?(n(),o("button",{key:1,onClick:t[5]||(t[5]=f=>u.Next()),class:"btn green-btn"}," Next ")):r("",!0),this.questionNumber==e.questions.length-1?(n(),o("button",{key:2,onClick:t[6]||(t[6]=f=>u.Submit()),class:"btn green-btn"}," Submit ")):r("",!0)])])):(n(),o("div",wt," There is no quiz for this skill yet. Please check again soon. "))])])):r("",!0),e.showResult?(n(),A(l,{key:2,skill:e.skill},null,8,["skill"])):r("",!0),e.showFlaggingModal?(n(),o("div",vt,[s("div",gt,[s("div",kt,[yt,s("div",bt,[s("button",{type:"button",class:"btn red-btn w-md-25",onClick:t[7]||(t[7]=f=>e.showFlaggingModal=!1)},At),s("button",{type:"button",class:"btn green-btn w-md-25",onClick:t[8]||(t[8]=f=>u.flagQuestion(e.question.id))},Qt)])])])])):r("",!0),e.showThankModal?(n(),o("div",Tt,[s("div",$t,[s("div",It,[zt,s("div",Ct,[s("button",{type:"button",class:"btn green-btn w-25",onClick:t[9]||(t[9]=f=>e.showThankModal=!1)},Nt)])])])])):r("",!0),e.needToSelectInstructor?(n(),o("div",Ft,[s("div",Vt,[Rt,s("div",Pt,[x(m,{to:`/skills/${e.skillId}`,type:"button",class:"btn green-btn w-100 w-md-50"},{default:S(()=>[Bt]),_:1},8,["to"]),x(m,{to:"/profile/edit",type:"button",class:"btn green-btn w-100 w-md-50"},{default:S(()=>[Dt]),_:1})])])])):r("",!0)],64)}const Et=q(We,[["render",jt],["__scopeId","data-v-5f885b49"]]),Ut="/images/skill-avatar/recurso.png";const Wt={setup(){return{skillsStore:L()}},data(){return{skillId:this.$route.params.id,skill:{name:null,image:null,firstAncestorId:null,levelInHierarchy:null}}},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let i=0;i<this.skillsStore.skillsList.length;i++)this.skillId==this.skillsStore.skillsList[i].id&&(this.skill.name=this.skillsStore.skillsList[i].name,this.skill.image=this.skillsStore.skillsList[i].image,this.skill.firstAncestorId=this.skillsStore.skillsList[i].first_ancestor,this.skill.levelInHierarchy=this.skillsStore.skillsList[i].hierarchy_level)},components:{Assessment:Et}},Ht=i=>(I("data-v-d773ee19"),i=i(),z(),i),Yt={id:"banner"},Jt=["src"],Kt={class:"container mt-3"},Ot={class:"d-flex justify-content-md-between justify-content-center"},Gt={class:"d-flex flex-column flex-md-row"},Xt=["src"],Zt={key:1,id:"skill-icon",src:Ut,alt:"default skill icon"},si={id:"assessment-skill-name",class:"ms-3 d-flex justify-content-end"},ei=Ht(()=>s("div",{class:"mt-4 mb-4"},[s("hr",{class:"border border-2 opacity-100 w-md-75 w-100",id:"assessment-horizontal-line"})],-1));function ti(i,t,a,c,e,u){const h=b("Assessment");return n(),o(k,null,[s("div",Yt,[s("img",{src:"/images/banners/skills-banner.png",class:"img-fluid"},null,8,Jt)]),s("div",Kt,[s("div",Ot,[s("div",Gt,[this.skill.image?(n(),o("img",{key:0,src:this.skill.image},null,8,Xt)):(n(),o("img",Zt)),s("div",si,_(this.skill.name)+" Quiz ",1)])]),ei,x(h)])],64)}const ai=q(Wt,[["render",ti],["__scopeId","data-v-d773ee19"]]);export{ai as default};
