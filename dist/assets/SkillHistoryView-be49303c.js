import{_,x as d,r as m,o,c as a,d as u,t as l,F as v,k as p,e as R,m as w,s as k,w as f,v as y}from"./main-6137d7a6.js";const S={setup(){return{usersStore:d()}},data(){return{skillUrl:this.$route.params.skillUrl,skill:{},skillRevisions:[],currentVersionNumber:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers(),await this.getSkill()},async mounted(){},methods:{async getSkill(){const t=await fetch("/skills/url/"+this.skillUrl);this.skill=await t.json(),this.currentVersionNumber=this.skill.version_number,await this.getRevisions()},async getRevisions(){const t=await fetch("/skill-history/"+this.skill.id+"/list");this.skillRevisions=await t.json();for(let s=0;s<this.skillRevisions.length;s++){var r=this.skillRevisions[s].edited_date.replace("T"," ");r=r.replace("Z"," ");let e=r.split(/[- :]/);var c=new Date(Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5])),h={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};this.skillRevisions[s].edited_date=c.toLocaleDateString("en-US",h);let n=this.usersStore.users.find(i=>i.id===this.skillRevisions[s].user_id);this.skillRevisions[s].username=n.username,this.skillRevisions[s].isCurrentRevision=!1,this.skillRevisions[s].version_number==this.currentVersionNumber&&(this.skillRevisions[s].isCurrentRevision=!0)}}}},g={class:"container"};function b(t,r,c,h,s,e){const n=m("router-link");return o(),a("div",g,[u("h1",null,l(s.skill.name)+": Revision history",1),u("ul",null,[(o(!0),a(v,null,p(s.skillRevisions,i=>(o(),a("li",null,[R(n,{to:"/skills/"+s.skill.url+"/revision/"+i.version_number},{default:w(()=>[k(l(i.edited_date),1)]),_:2},1032,["to"]),k(", "+l(i.username)+", "+l(i.comment),1),f(u("span",null,", (current revision)",512),[[y,i.isCurrentRevision]])]))),256))])])}const x=_(S,[["render",b],["__scopeId","data-v-6b091184"]]);export{x as default};
