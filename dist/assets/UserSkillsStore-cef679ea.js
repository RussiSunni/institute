import{D as f,q as h}from"./main-da47255c.js";const c=f("userSkills",{state:()=>({unnestedList:[]}),actions:{async getUnnestedList(e){const n=await fetch("/user-skills/unnested-list/"+e);this.unnestedList=await n.json()},async MakeMastered(e,n){const t=h();t.skillsList.length==0&&await t.getSkillsList(),await this.getUnnestedList(e);let r="/user-skills/mastered/"+e+"/"+n;fetch(r).then(()=>{let k={};for(let i=0;i<t.skillsList.length;i++)t.skillsList[i].id==n&&(k=t.skillsList[i]);if(k.type!="sub"){const i=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==n&&i.push(t.skillsList[s]);let a=[];for(let s=0;s<i.length;s++)if(i[s].type=="regular")this.MakeAccessible(e,i[s].id);else if(i[s].type=="domain")this.MakeMastered(e,i[s].id);else if(i[s].type=="super")for(let l=0;l<t.skillsList.length;l++)t.skillsList[l].parent==i[s].id&&t.skillsList[l].type=="sub"&&a.push(t.skillsList[l].id);for(let s=0;s<a.length;s++)this.MakeAccessible(e,a[s])}else{let i=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==k.parent&&t.skillsList[s].id!=k.id&&t.skillsList[s].type=="sub"&&i.push(t.skillsList[s]);let a=!0;for(let s=0;s<this.unnestedList.length;s++)for(let l=0;l<i.length;l++)i[l].id==this.unnestedList[s].id&&this.unnestedList[s].is_mastered!=1&&(a=!1);a&&this.MakeAccessible(e,k.parent)}})},async MakeAccessible(e,n){var t="/user-skills/accessible/"+e+"/"+n;fetch(t),await this.getUnnestedList(e)}}});export{c as u};
