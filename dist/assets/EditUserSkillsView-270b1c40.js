import{u as M}from"./SkillsStore-a9c4de85.js";import{u as g}from"./UserSkillsStore-56eab8ea.js";import{_ as b,e as o,o as n,c as d,a as r,n as c,x as f,s as h,t as m,w as C,l as v,F as _,r as y,j as S,f as G}from"./main-a41d3105.js";const U="/images/banners/edit-mastery-skill-banner.png";const I={data(){return{showChildren:!1,user:{},studentGrade:this.grade}},props:["children","skill_name","is_mastered","is_accessible","id","grade","depth","MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade"],async created(){},computed:{labelClasses(){return{"has-children":this.nodes}},indent(){return{transform:`translate(${this.depth*50}px)`}}},methods:{toggleChildren(){this.showChildren=!this.showChildren}}},w={class:"d-flex"},T={key:0,style:{"padding-left":"10px"}},x={key:1},A={key:2},E={key:1},V={key:2};function j(t,s,e,u,l,a){const k=o("EditUserSkillsChild",!0);return n(),d("div",null,[r("div",{class:h(["label-wrapper",e.depth==0?"user-name":e.is_accessible!=1?"inaccessible":e.is_mastered!=1?"unmastered":"mastered"])},[r("div",w,[l.showChildren&&e.children.length>0?(n(),d("button",{key:0,onClick:s[0]||(s[0]=(...i)=>a.toggleChildren&&a.toggleChildren(...i)),class:"btn btn-dark"},"-")):e.children.length>0?(n(),d("button",{key:1,onClick:s[1]||(s[1]=(...i)=>a.toggleChildren&&a.toggleChildren(...i)),class:"btn btn-dark"},"+")):c("",!0),r("div",{style:f(a.indent),class:h(a.labelClasses)},[e.depth==0?(n(),d("h1",T,m(e.skill_name),1)):(n(),d("h2",x,m(e.skill_name),1)),e.depth!=0?(n(),d("div",A,[e.is_accessible!=1?(n(),d("button",{key:0,onClick:s[2]||(s[2]=i=>e.MakeAccessible(e.id)),class:"btn btn-dark"},"Make Accessible")):e.is_mastered!=1&&e.is_accessible==1?(n(),d("div",E,[r("button",{onClick:s[3]||(s[3]=i=>e.MakeInaccessible(e.id)),class:"btn btn-dark me-2"},"Make Inaccessible"),r("button",{onClick:s[4]||(s[4]=i=>e.MakeMastered(e.id)),class:"btn btn-dark"},"Make Mastered")])):e.is_mastered==1?(n(),d("div",V,[r("button",{onClick:s[5]||(s[5]=i=>e.MakeUnmastered(e.id)),class:"btn btn-dark me-2"},"Make Unmastered"),C(r("input",{"onUpdate:modelValue":s[6]||(s[6]=i=>l.studentGrade=i),type:"number",id:"grade",name:"grade",min:"0",max:"100",class:"me-2"},null,512),[[v,l.studentGrade]]),r("button",{onClick:s[7]||(s[7]=i=>e.SubmitGrade(e.id,l.studentGrade)),class:"btn btn-dark"},"Submit grade")])):c("",!0)])):c("",!0)],6)])],2),l.showChildren?(n(!0),d(_,{key:0},y(e.children,i=>(n(),S(k,{MakeAccessible:e.MakeAccessible,MakeInaccessible:e.MakeInaccessible,MakeMastered:e.MakeMastered,MakeUnmastered:e.MakeUnmastered,SubmitGrade:e.SubmitGrade,children:i.children,skill_name:i.skill_name,is_mastered:i.is_mastered,is_accessible:i.is_accessible,grade:i.grade,id:i.id,depth:e.depth+1},null,8,["MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade","children","skill_name","is_mastered","is_accessible","grade","id","depth"]))),256)):c("",!0)])}const B=b(I,[["render",j],["__scopeId","data-v-ff94bbfa"]]),D={setup(){const t=M(),s=g();return{skillsStore:t,userSkillsStore:s}},data(){return{studentId:this.$route.params.id,student:{},studentSkillTree:{}}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.GetStudentDetails();const s=await(await fetch("/user-skills/"+this.studentId)).json();this.studentSkillTree.children=s},components:{EditUserSkillsChild:B},methods:{GetStudentDetails(){fetch("/users/show/"+this.studentId).then(function(t){return t.json()}).then(t=>this.student=t).then(()=>{this.studentSkillTree.skill_name=this.student.username})},GetStudentSkills(){fetch("/user-skills/"+this.studentId).then(function(t){return t.json()}).then(t=>this.studentSkillTree.children=t).then(()=>{this.isFetching=!0})},MakeAccessible(t){var s="/user-skills/accessible/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},MakeInaccessible(t){var s="/user-skills/inaccessible/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},async MakeMastered(t){await this.userSkillsStore.MakeMastered(this.studentId,t),this.GetStudentSkills()},MakeUnmastered(t){var s="/user-skills/unmastered/"+this.studentId+"/"+t;fetch(s).then(e=>this.GetStudentSkills())},SubmitGrade(t,s){console.log(s);var e="/user-skills/grade/"+this.studentId+"/"+t+"/"+s;fetch(e,{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(u=>this.GetStudentSkills())}}};function F(t,s,e,u,l,a){const k=o("EditUserSkillsChild");return n(),S(k,{children:l.studentSkillTree.children,depth:0,skill_name:l.studentSkillTree.skill_name,is_mastered:l.studentSkillTree.is_mastered,is_accessible:l.studentSkillTree.is_accessible,grade:l.studentSkillTree.grade,id:l.studentSkillTree.id,MakeAccessible:a.MakeAccessible,MakeInaccessible:a.MakeInaccessible,MakeMastered:a.MakeMastered,MakeUnmastered:a.MakeUnmastered,SubmitGrade:a.SubmitGrade},null,8,["children","skill_name","is_mastered","is_accessible","grade","id","MakeAccessible","MakeInaccessible","MakeMastered","MakeUnmastered","SubmitGrade"])}const L=b(D,[["render",F]]),N=r("div",{id:"banner"},[r("img",{src:U,class:"img-fluid"})],-1),H={__name:"EditUserSkillsView",setup(t){return(s,e)=>(n(),d(_,null,[N,G(L)],64))}};export{H as default};
