import{d as W,_ as H,o as T,c as v,a as y,w as $,v as L,F as P,r as X,t as Y,p as j,b as G,u as R,e as q,f as I,S as E,g as O}from"./main-227d3095.js";import{u as Z}from"./SkillTreeStore-e7553c6c.js";import{u as J}from"./TagsStore-6e5b53d2.js";import{S as K,A as Q,h as ee,P as te,G as V,C as ne,T as re}from"./fontfaceobserver.standalone-bdd7f225.js";const ie=W("skillTags",{state:()=>({skillTagsList:[]}),actions:{async getSkillTagsList(){const t=await(await fetch("/skill-tags/list")).json();this.skillTagsList=t}}});const se={setup(){return{tagsStore:J()}},data(){return{filters:[],checkedFilters:[]}},async created(){},async mounted(){await this.tagsStore.getTagsList()},methods:{applyFilter:function(){this.$parent.applyFilter(this.checkedFilters)}}},U=e=>(j("data-v-9934bafa"),e=e(),G(),e),ae={id:"filters"},le=U(()=>y("h1",{id:"filterMainHeader",class:"mb-2"},"My Skills Tree",-1)),ce={class:"form-check"},oe=U(()=>y("label",{class:"form-check-label",for:"flexCheckDefault"}," Mastered and available skills ",-1)),he={class:"form-check"},ue=["value"],de={class:"form-check-label",for:"flexCheckDefault"};function fe(e,t,n,r,s,c){return T(),v("div",ae,[le,y("div",ce,[$(y("input",{class:"form-check-input",type:"checkbox",value:0,id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=a=>s.checkedFilters=a),onChange:t[1]||(t[1]=a=>c.applyFilter())},null,544),[[L,s.checkedFilters]]),oe]),(T(!0),v(P,null,X(this.tagsStore.tagsList,a=>(T(),v("div",null,[y("div",he,[$(y("input",{class:"form-check-input",type:"checkbox",value:a.id,id:"flexCheckDefault","onUpdate:modelValue":t[2]||(t[2]=d=>s.checkedFilters=d),onChange:t[3]||(t[3]=d=>c.applyFilter())},null,40,ue),[[L,s.checkedFilters]]),y("label",de,Y(a.name),1)])]))),256))])}const pe=H(se,[["render",fe],["__scopeId","data-v-9934bafa"]]);function _e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ke(){return this.eachAfter(_e)}function ge(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function me(e,t){for(var n=this,r=[n],s,c,a=-1;n=r.pop();)if(e.call(t,n,++a,this),s=n.children)for(c=s.length-1;c>=0;--c)r.push(s[c]);return this}function ye(e,t){for(var n=this,r=[n],s=[],c,a,d,g=-1;n=r.pop();)if(s.push(n),c=n.children)for(a=0,d=c.length;a<d;++a)r.push(c[a]);for(;n=s.pop();)e.call(t,n,++g,this);return this}function xe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Se(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,s=r&&r.length;--s>=0;)n+=r[s].value;t.value=n})}function we(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Te(e){for(var t=this,n=Ce(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var s=r.length;e!==n;)r.splice(s,0,e),e=e.parent;return r}function Ce(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),s=null;for(e=n.pop(),t=r.pop();e===t;)s=e,e=n.pop(),t=r.pop();return s}function Fe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ve(){return Array.from(this)}function ze(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ae(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*be(){var e=this,t,n=[e],r,s,c;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(s=0,c=r.length;s<c;++s)n.push(r[s]);while(n.length)}function D(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Me)):t===void 0&&(t=De);for(var n=new C(e),r,s=[n],c,a,d,g;r=s.pop();)if((a=t(r.data))&&(g=(a=Array.from(a)).length))for(r.children=a,d=g-1;d>=0;--d)s.push(c=a[d]=new C(a[d])),c.parent=r,c.depth=r.depth+1;return n.eachBefore($e)}function Be(){return D(this).eachBefore(Ne)}function De(e){return e.children}function Me(e){return Array.isArray(e)?e[1]:null}function Ne(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function $e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function C(e){this.data=e,this.depth=this.height=0,this.parent=null}C.prototype=D.prototype={constructor:C,count:ke,each:ge,eachAfter:ye,eachBefore:me,find:xe,sum:Se,sort:we,path:Te,ancestors:Fe,descendants:ve,leaves:ze,links:Ae,copy:Be,[Symbol.iterator]:be};function Le(e,t){return e.parent===t.parent?1:2}function b(e){var t=e.children;return t?t[0]:e.t}function B(e){var t=e.children;return t?t[t.length-1]:e.t}function Ie(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ve(e){for(var t=0,n=0,r=e.children,s=r.length,c;--s>=0;)c=r[s],c.z+=t,c.m+=t,t+=c.s+(n+=c.c)}function He(e,t,n){return e.a.parent===t.parent?e.a:n}function z(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}z.prototype=Object.create(C.prototype);function Pe(e){for(var t=new z(e,0),n,r=[t],s,c,a,d;n=r.pop();)if(c=n._.children)for(n.children=new Array(d=c.length),a=d-1;a>=0;--a)r.push(s=n.children[a]=new z(c[a],a)),s.parent=n;return(t.parent=new z(null,0)).children=[t],t}function Ue(){var e=Le,t=1,n=1,r=null;function s(i){var p=Pe(i);if(p.eachAfter(c),p.parent.m=-p.z,p.eachBefore(a),r)i.eachBefore(g);else{var _=i,h=i,f=i;i.eachBefore(function(l){l.x<_.x&&(_=l),l.x>h.x&&(h=l),l.depth>f.depth&&(f=l)});var o=_===h?1:e(_,h)/2,u=o-_.x,m=t/(h.x+o+u),S=n/(f.depth||1);i.eachBefore(function(l){l.x=(l.x+u)*m,l.y=l.depth*S})}return i}function c(i){var p=i.children,_=i.parent.children,h=i.i?_[i.i-1]:null;if(p){Ve(i);var f=(p[0].z+p[p.length-1].z)/2;h?(i.z=h.z+e(i._,h._),i.m=i.z-f):i.z=f}else h&&(i.z=h.z+e(i._,h._));i.parent.A=d(i,h,i.parent.A||_[0])}function a(i){i._.x=i.z+i.parent.m,i.m+=i.parent.m}function d(i,p,_){if(p){for(var h=i,f=i,o=p,u=h.parent.children[0],m=h.m,S=f.m,l=o.m,x=u.m,k;o=B(o),h=b(h),o&&h;)u=b(u),f=B(f),f.a=i,k=o.z+l-h.z-m+e(o._,h._),k>0&&(Ie(He(o,i,_),i,k),m+=k,S+=k),l+=o.m,m+=h.m,x+=u.m,S+=f.m;o&&!B(f)&&(f.t=o,f.m+=l-S),h&&!b(u)&&(u.t=h,u.m+=m-x,_=i)}return _}function g(i){i.x*=t,i.y=i.depth*n}return s.separation=function(i){return arguments.length?(e=i,s):e},s.size=function(i){return arguments.length?(r=!1,t=+i[0],n=+i[1],s):r?null:[t,n]},s.nodeSize=function(i){return arguments.length?(r=!0,t=+i[0],n=+i[1],s):r?[t,n]:null},s}function w(e,t,n){this.k=e,this.x=t,this.y=n}w.prototype={constructor:w,scale:function(e){return e===1?this:new w(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new w(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};w.prototype;const We={setup(){const e=R(),t=Z(),n=ie();return{userDetailsStore:e,skillTreeStore:t,skillTagsStore:n}},data(){return{}},components:{SkillTreeFilter:pe,SkillPanel:K},async mounted(){await this.skillTreeStore.getUserSkillsNoSubSkills();var e=this.skillTreeStore.userSkillsNoSubSkills,t={name:"test",children:e};const n=window.innerWidth,r=window.innerHeight,s=Math.min(n,r)/2,a=Ue().size([2*Math.PI,s*6]).separation((o,u)=>(o.parent==u.parent?1:4)/o.depth)(D(t));console.log(a);const d=new Q({width:n,height:r,resolution:2,transparent:!0,antialias:!0,autoDensity:!0,autoStart:!0});document.querySelector("#app").appendChild(d.view);const g=new ee({screenWidth:n,screenHeight:r,worldWidth:n,worldHeight:r,events:d.renderer.events});d.stage.addChild(g),g.center=new te(0,0),g.drag().pinch().wheel().decelerate().clampZoom({minScale:.2,maxScale:5});for(let o=0;o<a.links().length;o++){const u=new V;u.lineStyle(2,16777215,1);var i=Math.cos(a.links()[o].source.x)*a.links()[o].source.y,p=Math.sin(a.links()[o].source.x)*a.links()[o].source.y;u.moveTo(i,p);var _=Math.cos(a.links()[o].target.x)*a.links()[o].target.y,h=Math.sin(a.links()[o].target.x)*a.links()[o].target.y;u.lineTo(_,h),g.addChild(u)}function f(o,u){u++;for(let[S,l]of o.entries()){console.log(l);let x=new ne;x.x=Math.cos(l.x)*l.y,x.y=Math.sin(l.x)*l.y;const k=new V;var m;l.data.is_mastered=="1"?m="0x"+l.data.mastered_color:l.data.is_accessible=="1"?(k.lineStyle(1,"0x"+l.data.mastered_color,1),m="0x"+l.data.unlocked_color):m="0xD9D9D9",k.beginFill(m),u==0?k.drawCircle(0,0,30):u==1?k.drawCircle(0,0,15):k.drawCircle(0,0,10),k.endFill(),x.addChild(k);let M=40;const N=l.data.skill_name.split(" ");for(let A=0;A<N.length;A++)N[A].length>9&&(M=37);l.data.skill_name=l.data.skill_name.replace(/(.*?\s)/g,`$1
`);let F=new re(l.data.skill_name.toUpperCase(),{fontFamily:"Poppins900",fontSize:M,fill:16777215,align:"center"});F.anchor.set(.5),F.scale.x=.1,F.scale.y=.1,x.addChild(F),g.addChild(x),l.children&&Array.isArray(l.children)&&l.children.length>0&&f(l.children,u)}}f(a.children,0)},methods:{}};function Xe(e,t,n,r,s,c){return null}const Ye=H(We,[["render",Xe],["__scopeId","data-v-f2c4ac03"]]);const je=y("div",{id:"purple-banner"},null,-1),Ge=y("span",null,"Loading...",-1),Ze={__name:"SkillTreeView",setup(e){return(t,n)=>(T(),v(P,null,[je,(T(),q(E,null,{default:I(()=>[O(Ye)]),fallback:I(()=>[Ge]),_:1}))],64))}};export{Ze as default};
