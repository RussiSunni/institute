import{_ as ce,r as he,o as ot,c as xt,b as q,t as fe,a as vt,h as pe,i as de,x as _e,p as ge,e as me}from"./main-cccf0e89.js";const ye={setup(){},data(){return{}},props:["skill"],computed:{removeStyles(){var e;let t=(e=this.skill.masteryRequirements)==null?void 0:e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"");return t==null?void 0:t.replace(/ style=["'][^"']*["']/gi,"")}},methods:{hideInfoPanel(){this.$parent.isSkillInfoPanelShown&&(screen.width>800?document.getElementById("skillInfoPanel").style.width="0px":document.getElementById("skillInfoPanel").style.height="0px",document.getElementById("sidepanel-backdrop").style.display="none",this.$parent.isSkillInfoPanelShown=!1)},adjustClamping(){this.$nextTick(()=>{const t=this.$refs.skillInfoPanel,n=this.$refs.skillInfoPanelTop,e=this.$refs.skillInfoPanelBottom,i=this.$refs.truncateContainer,r=this.$refs.truncateContent;screen.width>800?i.style.height=t.clientHeight-e.clientHeight-n.clientHeight-40+"px":i.style.height=434-e.clientHeight-n.clientHeight-110+"px";const o=i.clientHeight,s=parseInt(window.getComputedStyle(i).lineHeight),u=Math.trunc(o/s)-(screen.width>800?2:0);r.style.clampedLines=u,r.style.webkitLineClamp=u})}},mounted(){document.addEventListener("click",()=>{this.adjustClamping()})}},Tn=t=>(ge("data-v-b536c2f6"),t=t(),me(),t),we={id:"skillInfoPanel",class:"skillInfoPanel"},xe={class:"closeButtonContainer"},ve={id:"skillInfoPanelContainer",ref:"skillInfoPanel"},be={class:"skill-info-panel-top",ref:"skillInfoPanelTop"},ke={key:0,ref:"truncateContainer",class:"mt-2 preview"},$e=["innerHTML"],Me={class:"skill-info-panel-bottom",ref:"skillInfoPanelBottom"},Ae={key:0},Ce=Tn(()=>q("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[q("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z",fill:"white"})],-1)),Ne={key:2,class:"mt-4"},Se=Tn(()=>q("p",null," This is a larger subject holding a series of more specific skills; click through to the skills within it to master each one! ",-1)),ze=[Se];function Ee(t,n,e,i,r,o){var u,l,a;const s=he("router-link");return ot(),xt("div",we,[q("div",xe,[q("a",{href:"javascript:void(0)",class:"closebtn",onClick:n[0]||(n[0]=c=>this.hideInfoPanel())},"×")]),q("div",ve,[q("div",be,[q("h1",null,fe((u=e.skill)==null?void 0:u.name),1)],512),((l=e.skill)==null?void 0:l.type)!="domain"?(ot(),xt("div",ke,[q("div",{class:"truncate-overflow",ref:"truncateContent",innerHTML:o.removeStyles},null,8,$e)],512)):vt("",!0),q("div",Me,[e.skill.type!="domain"?(ot(),xt("hr",Ae)):vt("",!0),e.skill.type!="domain"?(ot(),pe(s,{key:1,class:"btn green-btn",target:"_blank",id:"skillLink",to:"/skills/"+e.skill.id},{default:de(()=>[_e("See More  "),Ce]),_:1},8,["to"])):vt("",!0),((a=e.skill)==null?void 0:a.type)=="domain"?(ot(),xt("div",Ne,ze)):vt("",!0)],512)],512)])}const Os=ce(ye,[["render",Ee],["__scopeId","data-v-b536c2f6"]]);function Us(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}var Te={value:()=>{}};function on(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Ct(e)}function Ct(t){this._=t}function Ie(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Ct.prototype=on.prototype={constructor:Ct,on:function(t,n){var e=this._,i=Ie(t+"",e),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Re(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(r=(t=i[o]).type)e[r]=pn(e[r],t.name,n);else if(n==null)for(r in e)e[r]=pn(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Ct(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function Re(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function pn(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=Te,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var Gt="http://www.w3.org/1999/xhtml";const dn={svg:"http://www.w3.org/2000/svg",xhtml:Gt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),dn.hasOwnProperty(n)?{space:dn[n],local:t}:t}function Pe(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Gt&&n.documentElement.namespaceURI===Gt?n.createElement(t):n.createElementNS(e,t)}}function Le(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function sn(t){var n=Ht(t);return(n.local?Le:Pe)(n)}function Be(){}function an(t){return t==null?Be:function(){return this.querySelector(t)}}function He(t){typeof t!="function"&&(t=an(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,u=i[r]=new Array(s),l,a,c=0;c<s;++c)(l=o[c])&&(a=t.call(l,l.__data__,c,o))&&("__data__"in l&&(a.__data__=l.__data__),u[c]=a);return new I(i,this._parents)}function De(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qe(){return[]}function In(t){return t==null?qe:function(){return this.querySelectorAll(t)}}function Xe(t){return function(){return De(t.apply(this,arguments))}}function Fe(t){typeof t=="function"?t=Xe(t):t=In(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var s=n[o],u=s.length,l,a=0;a<u;++a)(l=s[a])&&(i.push(t.call(l,l.__data__,a,s)),r.push(l));return new I(i,r)}function Rn(t){return function(){return this.matches(t)}}function Pn(t){return function(n){return n.matches(t)}}var Ve=Array.prototype.find;function Ye(t){return function(){return Ve.call(this.children,t)}}function Oe(){return this.firstElementChild}function Ue(t){return this.select(t==null?Oe:Ye(typeof t=="function"?t:Pn(t)))}var Ge=Array.prototype.filter;function Ke(){return Array.from(this.children)}function We(t){return function(){return Ge.call(this.children,t)}}function Ze(t){return this.selectAll(t==null?Ke:We(typeof t=="function"?t:Pn(t)))}function Qe(t){typeof t!="function"&&(t=Rn(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,u=i[r]=[],l,a=0;a<s;++a)(l=o[a])&&t.call(l,l.__data__,a,o)&&u.push(l);return new I(i,this._parents)}function Ln(t){return new Array(t.length)}function Je(){return new I(this._enter||this._groups.map(Ln),this._parents)}function Tt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Tt.prototype={constructor:Tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function je(t){return function(){return t}}function ti(t,n,e,i,r,o){for(var s=0,u,l=n.length,a=o.length;s<a;++s)(u=n[s])?(u.__data__=o[s],i[s]=u):e[s]=new Tt(t,o[s]);for(;s<l;++s)(u=n[s])&&(r[s]=u)}function ni(t,n,e,i,r,o,s){var u,l,a=new Map,c=n.length,p=o.length,f=new Array(c),_;for(u=0;u<c;++u)(l=n[u])&&(f[u]=_=s.call(l,l.__data__,u,n)+"",a.has(_)?r[u]=l:a.set(_,l));for(u=0;u<p;++u)_=s.call(t,o[u],u,o)+"",(l=a.get(_))?(i[u]=l,l.__data__=o[u],a.delete(_)):e[u]=new Tt(t,o[u]);for(u=0;u<c;++u)(l=n[u])&&a.get(f[u])===l&&(r[u]=l)}function ei(t){return t.__data__}function ii(t,n){if(!arguments.length)return Array.from(this,ei);var e=n?ni:ti,i=this._parents,r=this._groups;typeof t!="function"&&(t=je(t));for(var o=r.length,s=new Array(o),u=new Array(o),l=new Array(o),a=0;a<o;++a){var c=i[a],p=r[a],f=p.length,_=ri(t.call(c,c&&c.__data__,a,i)),w=_.length,v=u[a]=new Array(w),A=s[a]=new Array(w),m=l[a]=new Array(f);e(c,p,v,A,m,_,n);for(var $=0,N=0,S,E;$<w;++$)if(S=v[$]){for($>=N&&(N=$+1);!(E=A[N])&&++N<w;);S._next=E||null}}return s=new I(s,i),s._enter=u,s._exit=l,s}function ri(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oi(){return new I(this._exit||this._groups.map(Ln),this._parents)}function si(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function ai(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,s=Math.min(r,o),u=new Array(r),l=0;l<s;++l)for(var a=e[l],c=i[l],p=a.length,f=u[l]=new Array(p),_,w=0;w<p;++w)(_=a[w]||c[w])&&(f[w]=_);for(;l<r;++l)u[l]=e[l];return new I(u,this._parents)}function ui(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function li(t){t||(t=ci);function n(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var s=e[o],u=s.length,l=r[o]=new Array(u),a,c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(n)}return new I(r,this._parents).order()}function ci(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function hi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fi(){return Array.from(this)}function pi(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function di(){let t=0;for(const n of this)++t;return t}function _i(){return!this.node()}function gi(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,s=r.length,u;o<s;++o)(u=r[o])&&t.call(u,u.__data__,o,r);return this}function mi(t){return function(){this.removeAttribute(t)}}function yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wi(t,n){return function(){this.setAttribute(t,n)}}function xi(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function vi(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function bi(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function ki(t,n){var e=Ht(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?yi:mi:typeof n=="function"?e.local?bi:vi:e.local?xi:wi)(e,n))}function Bn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $i(t){return function(){this.style.removeProperty(t)}}function Mi(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Ai(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function Ci(t,n,e){return arguments.length>1?this.each((n==null?$i:typeof n=="function"?Ai:Mi)(t,n,e??"")):it(this.node(),t)}function it(t,n){return t.style.getPropertyValue(n)||Bn(t).getComputedStyle(t,null).getPropertyValue(n)}function Ni(t){return function(){delete this[t]}}function Si(t,n){return function(){this[t]=n}}function zi(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Ei(t,n){return arguments.length>1?this.each((n==null?Ni:typeof n=="function"?zi:Si)(t,n)):this.node()[t]}function Hn(t){return t.trim().split(/^|\s+/)}function un(t){return t.classList||new Dn(t)}function Dn(t){this._node=t,this._names=Hn(t.getAttribute("class")||"")}Dn.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qn(t,n){for(var e=un(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function Xn(t,n){for(var e=un(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function Ti(t){return function(){qn(this,t)}}function Ii(t){return function(){Xn(this,t)}}function Ri(t,n){return function(){(n.apply(this,arguments)?qn:Xn)(this,t)}}function Pi(t,n){var e=Hn(t+"");if(arguments.length<2){for(var i=un(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?Ri:n?Ti:Ii)(e,n))}function Li(){this.textContent=""}function Bi(t){return function(){this.textContent=t}}function Hi(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Di(t){return arguments.length?this.each(t==null?Li:(typeof t=="function"?Hi:Bi)(t)):this.node().textContent}function qi(){this.innerHTML=""}function Xi(t){return function(){this.innerHTML=t}}function Fi(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Vi(t){return arguments.length?this.each(t==null?qi:(typeof t=="function"?Fi:Xi)(t)):this.node().innerHTML}function Yi(){this.nextSibling&&this.parentNode.appendChild(this)}function Oi(){return this.each(Yi)}function Ui(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gi(){return this.each(Ui)}function Ki(t){var n=typeof t=="function"?t:sn(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Wi(){return null}function Zi(t,n){var e=typeof t=="function"?t:sn(t),i=n==null?Wi:typeof n=="function"?n:an(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function Qi(){var t=this.parentNode;t&&t.removeChild(this)}function Ji(){return this.each(Qi)}function ji(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function tr(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function nr(t){return this.select(t?tr:ji)}function er(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ir(t){return function(n){t.call(this,n,this.__data__)}}function rr(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function or(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function sr(t,n,e){return function(){var i=this.__on,r,o=ir(n);if(i){for(var s=0,u=i.length;s<u;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function ar(t,n,e){var i=rr(t+""),r,o=i.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,a=u.length,c;l<a;++l)for(r=0,c=u[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(u=n?sr:or,r=0;r<o;++r)this.each(u(i[r],n,e));return this}function Fn(t,n,e){var i=Bn(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function ur(t,n){return function(){return Fn(this,t,n)}}function lr(t,n){return function(){return Fn(this,t,n.apply(this,arguments))}}function cr(t,n){return this.each((typeof n=="function"?lr:ur)(t,n))}function*hr(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Vn=[null];function I(t,n){this._groups=t,this._parents=n}function _t(){return new I([[document.documentElement]],Vn)}function fr(){return this}I.prototype=_t.prototype={constructor:I,select:He,selectAll:Fe,selectChild:Ue,selectChildren:Ze,filter:Qe,data:ii,enter:Je,exit:oi,join:si,merge:ai,selection:fr,order:ui,sort:li,call:hi,nodes:fi,node:pi,size:di,empty:_i,each:gi,attr:ki,style:Ci,property:Ei,classed:Pi,text:Di,html:Vi,raise:Oi,lower:Gi,append:Ki,insert:Zi,remove:Ji,clone:nr,datum:er,on:ar,dispatch:cr,[Symbol.iterator]:hr};function Z(t){return typeof t=="string"?new I([[document.querySelector(t)]],[document.documentElement]):new I([[t]],Vn)}function Gs(t){return Z(sn(t).call(document.documentElement))}function pr(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Q(t,n){if(t=pr(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const Kt={capture:!0,passive:!1};function Wt(t){t.preventDefault(),t.stopImmediatePropagation()}function dr(t){var n=t.document.documentElement,e=Z(t).on("dragstart.drag",Wt,Kt);"onselectstart"in n?e.on("selectstart.drag",Wt,Kt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function _r(t,n){var e=t.document.documentElement,i=Z(t).on("dragstart.drag",null);n&&(i.on("click.drag",Wt,Kt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function ln(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Yn(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function gt(){}var ct=.7,It=1/ct,et="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",X="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gr=/^#([0-9a-f]{3,8})$/,mr=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),yr=new RegExp(`^rgb\\(${X},${X},${X}\\)$`),wr=new RegExp(`^rgba\\(${et},${et},${et},${ht}\\)$`),xr=new RegExp(`^rgba\\(${X},${X},${X},${ht}\\)$`),vr=new RegExp(`^hsl\\(${ht},${X},${X}\\)$`),br=new RegExp(`^hsla\\(${ht},${X},${X},${ht}\\)$`),_n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ln(gt,ft,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gn,formatHex:gn,formatHex8:kr,formatHsl:$r,formatRgb:mn,toString:mn});function gn(){return this.rgb().formatHex()}function kr(){return this.rgb().formatHex8()}function $r(){return On(this).formatHsl()}function mn(){return this.rgb().formatRgb()}function ft(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=gr.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?yn(n):e===3?new T(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?bt(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?bt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=mr.exec(t))?new T(n[1],n[2],n[3],1):(n=yr.exec(t))?new T(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=wr.exec(t))?bt(n[1],n[2],n[3],n[4]):(n=xr.exec(t))?bt(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vr.exec(t))?vn(n[1],n[2]/100,n[3]/100,1):(n=br.exec(t))?vn(n[1],n[2]/100,n[3]/100,n[4]):_n.hasOwnProperty(t)?yn(_n[t]):t==="transparent"?new T(NaN,NaN,NaN,0):null}function yn(t){return new T(t>>16&255,t>>8&255,t&255,1)}function bt(t,n,e,i){return i<=0&&(t=n=e=NaN),new T(t,n,e,i)}function Mr(t){return t instanceof gt||(t=ft(t)),t?(t=t.rgb(),new T(t.r,t.g,t.b,t.opacity)):new T}function Zt(t,n,e,i){return arguments.length===1?Mr(t):new T(t,n,e,i??1)}function T(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}ln(T,Zt,Yn(gt,{brighter(t){return t=t==null?It:Math.pow(It,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new T(tt(this.r),tt(this.g),tt(this.b),Rt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wn,formatHex:wn,formatHex8:Ar,formatRgb:xn,toString:xn}));function wn(){return`#${j(this.r)}${j(this.g)}${j(this.b)}`}function Ar(){return`#${j(this.r)}${j(this.g)}${j(this.b)}${j((isNaN(this.opacity)?1:this.opacity)*255)}`}function xn(){const t=Rt(this.opacity);return`${t===1?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${t===1?")":`, ${t})`}`}function Rt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function j(t){return t=tt(t),(t<16?"0":"")+t.toString(16)}function vn(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new B(t,n,e,i)}function On(t){if(t instanceof B)return new B(t.h,t.s,t.l,t.opacity);if(t instanceof gt||(t=ft(t)),!t)return new B;if(t instanceof B)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),s=NaN,u=o-r,l=(o+r)/2;return u?(n===o?s=(e-i)/u+(e<i)*6:e===o?s=(i-n)/u+2:s=(n-e)/u+4,u/=l<.5?o+r:2-o-r,s*=60):u=l>0&&l<1?0:s,new B(s,u,l,t.opacity)}function Cr(t,n,e,i){return arguments.length===1?On(t):new B(t,n,e,i??1)}function B(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}ln(B,Cr,Yn(gt,{brighter(t){return t=t==null?It:Math.pow(It,t),new B(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new B(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new T(Ft(t>=240?t-240:t+120,r,i),Ft(t,r,i),Ft(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new B(bn(this.h),kt(this.s),kt(this.l),Rt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Rt(this.opacity);return`${t===1?"hsl(":"hsla("}${bn(this.h)}, ${kt(this.s)*100}%, ${kt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bn(t){return t=(t||0)%360,t<0?t+360:t}function kt(t){return Math.max(0,Math.min(1,t||0))}function Ft(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Un=t=>()=>t;function Nr(t,n){return function(e){return t+e*n}}function Sr(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function zr(t){return(t=+t)==1?Gn:function(n,e){return e-n?Sr(n,e,t):Un(isNaN(n)?e:n)}}function Gn(t,n){var e=n-t;return e?Nr(t,e):Un(isNaN(t)?n:t)}const kn=function t(n){var e=zr(n);function i(r,o){var s=e((r=Zt(r)).r,(o=Zt(o)).r),u=e(r.g,o.g),l=e(r.b,o.b),a=Gn(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=u(c),r.b=l(c),r.opacity=a(c),r+""}}return i.gamma=t,i}(1);function W(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Qt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vt=new RegExp(Qt.source,"g");function Er(t){return function(){return t}}function Tr(t){return function(n){return t(n)+""}}function Ir(t,n){var e=Qt.lastIndex=Vt.lastIndex=0,i,r,o,s=-1,u=[],l=[];for(t=t+"",n=n+"";(i=Qt.exec(t))&&(r=Vt.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),u[s]?u[s]+=o:u[++s]=o),(i=i[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,l.push({i:s,x:W(i,r)})),e=Vt.lastIndex;return e<n.length&&(o=n.slice(e),u[s]?u[s]+=o:u[++s]=o),u.length<2?l[0]?Tr(l[0].x):Er(n):(n=l.length,function(a){for(var c=0,p;c<n;++c)u[(p=l[c]).i]=p.x(a);return u.join("")})}var $n=180/Math.PI,Jt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kn(t,n,e,i,r,o){var s,u,l;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(u=Math.sqrt(e*e+i*i))&&(e/=u,i/=u,l/=u),t*i<n*e&&(t=-t,n=-n,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*$n,skewX:Math.atan(l)*$n,scaleX:s,scaleY:u}}var $t;function Rr(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Jt:Kn(n.a,n.b,n.c,n.d,n.e,n.f)}function Pr(t){return t==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",t),!(t=$t.transform.baseVal.consolidate()))?Jt:(t=t.matrix,Kn(t.a,t.b,t.c,t.d,t.e,t.f))}function Wn(t,n,e,i){function r(a){return a.length?a.pop()+" ":""}function o(a,c,p,f,_,w){if(a!==p||c!==f){var v=_.push("translate(",null,n,null,e);w.push({i:v-4,x:W(a,p)},{i:v-2,x:W(c,f)})}else(p||f)&&_.push("translate("+p+n+f+e)}function s(a,c,p,f){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),f.push({i:p.push(r(p)+"rotate(",null,i)-2,x:W(a,c)})):c&&p.push(r(p)+"rotate("+c+i)}function u(a,c,p,f){a!==c?f.push({i:p.push(r(p)+"skewX(",null,i)-2,x:W(a,c)}):c&&p.push(r(p)+"skewX("+c+i)}function l(a,c,p,f,_,w){if(a!==p||c!==f){var v=_.push(r(_)+"scale(",null,",",null,")");w.push({i:v-4,x:W(a,p)},{i:v-2,x:W(c,f)})}else(p!==1||f!==1)&&_.push(r(_)+"scale("+p+","+f+")")}return function(a,c){var p=[],f=[];return a=t(a),c=t(c),o(a.translateX,a.translateY,c.translateX,c.translateY,p,f),s(a.rotate,c.rotate,p,f),u(a.skewX,c.skewX,p,f),l(a.scaleX,a.scaleY,c.scaleX,c.scaleY,p,f),a=c=null,function(_){for(var w=-1,v=f.length,A;++w<v;)p[(A=f[w]).i]=A.x(_);return p.join("")}}}var Lr=Wn(Rr,"px, ","px)","deg)"),Br=Wn(Pr,", ",")",")"),Hr=1e-12;function Mn(t){return((t=Math.exp(t))+1/t)/2}function Dr(t){return((t=Math.exp(t))-1/t)/2}function qr(t){return((t=Math.exp(2*t))-1)/(t+1)}const Xr=function t(n,e,i){function r(o,s){var u=o[0],l=o[1],a=o[2],c=s[0],p=s[1],f=s[2],_=c-u,w=p-l,v=_*_+w*w,A,m;if(v<Hr)m=Math.log(f/a)/n,A=function(K){return[u+K*_,l+K*w,a*Math.exp(n*K*m)]};else{var $=Math.sqrt(v),N=(f*f-a*a+i*v)/(2*a*e*$),S=(f*f-a*a-i*v)/(2*f*e*$),E=Math.log(Math.sqrt(N*N+1)-N),R=Math.log(Math.sqrt(S*S+1)-S);m=(R-E)/n,A=function(K){var mt=K*m,yt=Mn(E),wt=a/(e*$)*(yt*qr(n*mt+E)-Dr(E));return[u+wt*_,l+wt*w,a*yt/Mn(n*mt+E)]}}return A.duration=m*1e3*n/Math.SQRT2,A}return r.rho=function(o){var s=Math.max(.001,+o),u=s*s,l=u*u;return t(s,u,l)},r}(Math.SQRT2,2,4);var rt=0,ut=0,st=0,Zn=1e3,Pt,lt,Lt=0,nt=0,Dt=0,pt=typeof performance=="object"&&performance.now?performance:Date,Qn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cn(){return nt||(Qn(Fr),nt=pt.now()+Dt)}function Fr(){nt=0}function Bt(){this._call=this._time=this._next=null}Bt.prototype=Jn.prototype={constructor:Bt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?cn():+e)+(n==null?0:+n),!this._next&&lt!==this&&(lt?lt._next=this:Pt=this,lt=this),this._call=t,this._time=e,jt()},stop:function(){this._call&&(this._call=null,this._time=1/0,jt())}};function Jn(t,n,e){var i=new Bt;return i.restart(t,n,e),i}function Vr(){cn(),++rt;for(var t=Pt,n;t;)(n=nt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--rt}function An(){nt=(Lt=pt.now())+Dt,rt=ut=0;try{Vr()}finally{rt=0,Or(),nt=0}}function Yr(){var t=pt.now(),n=t-Lt;n>Zn&&(Dt-=n,Lt=t)}function Or(){for(var t,n=Pt,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Pt=e);lt=t,jt(i)}function jt(t){if(!rt){ut&&(ut=clearTimeout(ut));var n=t-nt;n>24?(t<1/0&&(ut=setTimeout(An,t-pt.now()-Dt)),st&&(st=clearInterval(st))):(st||(Lt=pt.now(),st=setInterval(Yr,Zn)),rt=1,Qn(An))}}function Cn(t,n,e){var i=new Bt;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Ur=on("start","end","cancel","interrupt"),Gr=[],jn=0,Nn=1,tn=2,Nt=3,Sn=4,nn=5,St=6;function qt(t,n,e,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;Kr(t,e,{name:n,index:i,group:r,on:Ur,tween:Gr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:jn})}function hn(t,n){var e=H(t,n);if(e.state>jn)throw new Error("too late; already scheduled");return e}function F(t,n){var e=H(t,n);if(e.state>Nt)throw new Error("too late; already running");return e}function H(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Kr(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=Jn(o,0,e.time);function o(a){e.state=Nn,e.timer.restart(s,e.delay,e.time),e.delay<=a&&s(a-e.delay)}function s(a){var c,p,f,_;if(e.state!==Nn)return l();for(c in i)if(_=i[c],_.name===e.name){if(_.state===Nt)return Cn(s);_.state===Sn?(_.state=St,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete i[c]):+c<n&&(_.state=St,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete i[c])}if(Cn(function(){e.state===Nt&&(e.state=Sn,e.timer.restart(u,e.delay,e.time),u(a))}),e.state=tn,e.on.call("start",t,t.__data__,e.index,e.group),e.state===tn){for(e.state=Nt,r=new Array(f=e.tween.length),c=0,p=-1;c<f;++c)(_=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++p]=_);r.length=p+1}}function u(a){for(var c=a<e.duration?e.ease.call(null,a/e.duration):(e.timer.restart(l),e.state=nn,1),p=-1,f=r.length;++p<f;)r[p].call(t,c);e.state===nn&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=St,e.timer.stop(),delete i[n];for(var a in i)return;delete t.__transition}}function zt(t,n){var e=t.__transition,i,r,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((i=e[s]).name!==n){o=!1;continue}r=i.state>tn&&i.state<nn,i.state=St,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[s]}o&&delete t.__transition}}function Wr(t){return this.each(function(){zt(this,t)})}function Zr(t,n){var e,i;return function(){var r=F(this,t),o=r.tween;if(o!==e){i=e=o;for(var s=0,u=i.length;s<u;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Qr(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=F(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var u={name:n,value:e},l=0,a=r.length;l<a;++l)if(r[l].name===n){r[l]=u;break}l===a&&r.push(u)}o.tween=r}}function Jr(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=H(this.node(),e).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((n==null?Zr:Qr)(e,t,n))}function fn(t,n,e){var i=t._id;return t.each(function(){var r=F(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return H(r,i).value[n]}}function te(t,n){var e;return(typeof n=="number"?W:n instanceof ft?kn:(e=ft(n))?(n=e,kn):Ir)(t,n)}function jr(t){return function(){this.removeAttribute(t)}}function to(t){return function(){this.removeAttributeNS(t.space,t.local)}}function no(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=n(i=s,e)}}function eo(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=n(i=s,e)}}function io(t,n,e){var i,r,o;return function(){var s,u=e(this),l;return u==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=u+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,u)))}}function ro(t,n,e){var i,r,o;return function(){var s,u=e(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=u+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,u)))}}function oo(t,n){var e=Ht(t),i=e==="transform"?Br:te;return this.attrTween(t,typeof n=="function"?(e.local?ro:io)(e,i,fn(this,"attr."+t,n)):n==null?(e.local?to:jr)(e):(e.local?eo:no)(e,i,n))}function so(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ao(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function uo(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&ao(t,o)),e}return r._value=n,r}function lo(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&so(t,o)),e}return r._value=n,r}function co(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=Ht(t);return this.tween(e,(i.local?uo:lo)(i,n))}function ho(t,n){return function(){hn(this,t).delay=+n.apply(this,arguments)}}function fo(t,n){return n=+n,function(){hn(this,t).delay=n}}function po(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?ho:fo)(n,t)):H(this.node(),n).delay}function _o(t,n){return function(){F(this,t).duration=+n.apply(this,arguments)}}function go(t,n){return n=+n,function(){F(this,t).duration=n}}function mo(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?_o:go)(n,t)):H(this.node(),n).duration}function yo(t,n){if(typeof n!="function")throw new Error;return function(){F(this,t).ease=n}}function wo(t){var n=this._id;return arguments.length?this.each(yo(n,t)):H(this.node(),n).ease}function xo(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;F(this,t).ease=e}}function vo(t){if(typeof t!="function")throw new Error;return this.each(xo(this._id,t))}function bo(t){typeof t!="function"&&(t=Rn(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,u=i[r]=[],l,a=0;a<s;++a)(l=o[a])&&t.call(l,l.__data__,a,o)&&u.push(l);return new G(i,this._parents,this._name,this._id)}function ko(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),s=new Array(i),u=0;u<o;++u)for(var l=n[u],a=e[u],c=l.length,p=s[u]=new Array(c),f,_=0;_<c;++_)(f=l[_]||a[_])&&(p[_]=f);for(;u<i;++u)s[u]=n[u];return new G(s,this._parents,this._name,this._id)}function $o(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Mo(t,n,e){var i,r,o=$o(n)?hn:F;return function(){var s=o(this,t),u=s.on;u!==i&&(r=(i=u).copy()).on(n,e),s.on=r}}function Ao(t,n){var e=this._id;return arguments.length<2?H(this.node(),e).on.on(t):this.each(Mo(e,t,n))}function Co(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function No(){return this.on("end.remove",Co(this._id))}function So(t){var n=this._name,e=this._id;typeof t!="function"&&(t=an(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var u=i[s],l=u.length,a=o[s]=new Array(l),c,p,f=0;f<l;++f)(c=u[f])&&(p=t.call(c,c.__data__,f,u))&&("__data__"in c&&(p.__data__=c.__data__),a[f]=p,qt(a[f],n,e,f,a,H(c,e)));return new G(o,this._parents,n,e)}function zo(t){var n=this._name,e=this._id;typeof t!="function"&&(t=In(t));for(var i=this._groups,r=i.length,o=[],s=[],u=0;u<r;++u)for(var l=i[u],a=l.length,c,p=0;p<a;++p)if(c=l[p]){for(var f=t.call(c,c.__data__,p,l),_,w=H(c,e),v=0,A=f.length;v<A;++v)(_=f[v])&&qt(_,n,e,v,f,w);o.push(f),s.push(c)}return new G(o,s,n,e)}var Eo=_t.prototype.constructor;function To(){return new Eo(this._groups,this._parents)}function Io(t,n){var e,i,r;return function(){var o=it(this,t),s=(this.style.removeProperty(t),it(this,t));return o===s?null:o===e&&s===i?r:r=n(e=o,i=s)}}function ne(t){return function(){this.style.removeProperty(t)}}function Ro(t,n,e){var i,r=e+"",o;return function(){var s=it(this,t);return s===r?null:s===i?o:o=n(i=s,e)}}function Po(t,n,e){var i,r,o;return function(){var s=it(this,t),u=e(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),it(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,u))}}function Lo(t,n){var e,i,r,o="style."+n,s="end."+o,u;return function(){var l=F(this,t),a=l.on,c=l.value[o]==null?u||(u=ne(n)):void 0;(a!==e||r!==c)&&(i=(e=a).copy()).on(s,r=c),l.on=i}}function Bo(t,n,e){var i=(t+="")=="transform"?Lr:te;return n==null?this.styleTween(t,Io(t,i)).on("end.style."+t,ne(t)):typeof n=="function"?this.styleTween(t,Po(t,i,fn(this,"style."+t,n))).each(Lo(this._id,t)):this.styleTween(t,Ro(t,i,n),e).on("end.style."+t,null)}function Ho(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function Do(t,n,e){var i,r;function o(){var s=n.apply(this,arguments);return s!==r&&(i=(r=s)&&Ho(t,s,e)),i}return o._value=n,o}function qo(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,Do(t,n,e??""))}function Xo(t){return function(){this.textContent=t}}function Fo(t){return function(){var n=t(this);this.textContent=n??""}}function Vo(t){return this.tween("text",typeof t=="function"?Fo(fn(this,"text",t)):Xo(t==null?"":t+""))}function Yo(t){return function(n){this.textContent=t.call(this,n)}}function Oo(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Yo(r)),n}return i._value=t,i}function Uo(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Oo(t))}function Go(){for(var t=this._name,n=this._id,e=ee(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],u=s.length,l,a=0;a<u;++a)if(l=s[a]){var c=H(l,n);qt(l,t,e,a,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new G(i,this._parents,t,e)}function Ko(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,s){var u={value:s},l={value:function(){--r===0&&o()}};e.each(function(){var a=F(this,i),c=a.on;c!==t&&(n=(t=c).copy(),n._.cancel.push(u),n._.interrupt.push(u),n._.end.push(l)),a.on=n}),r===0&&o()})}var Wo=0;function G(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function ee(){return++Wo}var O=_t.prototype;G.prototype={constructor:G,select:So,selectAll:zo,selectChild:O.selectChild,selectChildren:O.selectChildren,filter:bo,merge:ko,selection:To,transition:Go,call:O.call,nodes:O.nodes,node:O.node,size:O.size,empty:O.empty,each:O.each,on:Ao,attr:oo,attrTween:co,style:Bo,styleTween:qo,text:Vo,textTween:Uo,remove:No,tween:Jr,delay:po,duration:mo,ease:wo,easeVarying:vo,end:Ko,[Symbol.iterator]:O[Symbol.iterator]};function Zo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qo={time:null,delay:0,duration:250,ease:Zo};function Jo(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function jo(t){var n,e;t instanceof G?(n=t._id,t=t._name):(n=ee(),(e=Qo).time=cn(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],u=s.length,l,a=0;a<u;++a)(l=s[a])&&qt(l,t,n,a,s,e||Jo(l,n));return new G(i,this._parents,t,n)}_t.prototype.interrupt=Wr;_t.prototype.transition=jo;const en=Math.PI,rn=2*en,J=1e-6,ts=rn-J;function ie(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function ns(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return ie;const e=10**n;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*e)/e+i[r]}}class es{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?ie:ns(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,i,r){this._append`Q${+n},${+e},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(n,e,i,r,o,s){this._append`C${+n},${+e},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(n,e,i,r,o){if(n=+n,e=+e,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,u=this._y1,l=i-n,a=r-e,c=s-n,p=u-e,f=c*c+p*p;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(f>J)if(!(Math.abs(p*l-a*c)>J)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let _=i-s,w=r-u,v=l*l+a*a,A=_*_+w*w,m=Math.sqrt(v),$=Math.sqrt(f),N=o*Math.tan((en-Math.acos((v+f-A)/(2*m*$)))/2),S=N/$,E=N/m;Math.abs(S-1)>J&&this._append`L${n+S*c},${e+S*p}`,this._append`A${o},${o},0,0,${+(p*_>c*w)},${this._x1=n+E*l},${this._y1=e+E*a}`}}arc(n,e,i,r,o,s){if(n=+n,e=+e,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),l=i*Math.sin(r),a=n+u,c=e+l,p=1^s,f=s?r-o:o-r;this._x1===null?this._append`M${a},${c}`:(Math.abs(this._x1-a)>J||Math.abs(this._y1-c)>J)&&this._append`L${a},${c}`,i&&(f<0&&(f=f%rn+rn),f>ts?this._append`A${i},${i},0,1,${p},${n-u},${e-l}A${i},${i},0,1,${p},${this._x1=a},${this._y1=c}`:f>J&&this._append`A${i},${i},0,${+(f>=en)},${p},${this._x1=n+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(n,e,i,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function is(t){var n=0,e=t.children,i=e&&e.length;if(!i)n=1;else for(;--i>=0;)n+=e[i].value;t.value=n}function rs(){return this.eachAfter(is)}function os(t,n){let e=-1;for(const i of this)t.call(n,i,++e,this);return this}function ss(t,n){for(var e=this,i=[e],r,o,s=-1;e=i.pop();)if(t.call(n,e,++s,this),r=e.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function as(t,n){for(var e=this,i=[e],r=[],o,s,u,l=-1;e=i.pop();)if(r.push(e),o=e.children)for(s=0,u=o.length;s<u;++s)i.push(o[s]);for(;e=r.pop();)t.call(n,e,++l,this);return this}function us(t,n){let e=-1;for(const i of this)if(t.call(n,i,++e,this))return i}function ls(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,i=n.children,r=i&&i.length;--r>=0;)e+=i[r].value;n.value=e})}function cs(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function hs(t){for(var n=this,e=fs(n,t),i=[n];n!==e;)n=n.parent,i.push(n);for(var r=i.length;t!==e;)i.splice(r,0,t),t=t.parent;return i}function fs(t,n){if(t===n)return t;var e=t.ancestors(),i=n.ancestors(),r=null;for(t=e.pop(),n=i.pop();t===n;)r=t,t=e.pop(),n=i.pop();return r}function ps(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function ds(){return Array.from(this)}function _s(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function gs(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*ms(){var t=this,n,e=[t],i,r,o;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,i=t.children)for(r=0,o=i.length;r<o;++r)e.push(i[r]);while(e.length)}function re(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=xs)):n===void 0&&(n=ws);for(var e=new dt(t),i,r=[e],o,s,u,l;i=r.pop();)if((s=n(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,u=l-1;u>=0;--u)r.push(o=s[u]=new dt(s[u])),o.parent=i,o.depth=i.depth+1;return e.eachBefore(bs)}function ys(){return re(this).eachBefore(vs)}function ws(t){return t.children}function xs(t){return Array.isArray(t)?t[1]:null}function vs(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function bs(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function dt(t){this.data=t,this.depth=this.height=0,this.parent=null}dt.prototype=re.prototype={constructor:dt,count:rs,each:os,eachAfter:as,eachBefore:ss,find:us,sum:ls,sort:cs,path:hs,ancestors:ps,descendants:ds,leaves:_s,links:gs,copy:ys,[Symbol.iterator]:ms};function ks(t,n){return t.parent===n.parent?1:2}function Yt(t){var n=t.children;return n?n[0]:t.t}function Ot(t){var n=t.children;return n?n[n.length-1]:t.t}function $s(t,n,e){var i=e/(n.i-t.i);n.c-=i,n.s+=e,t.c+=i,n.z+=e,n.m+=e}function Ms(t){for(var n=0,e=0,i=t.children,r=i.length,o;--r>=0;)o=i[r],o.z+=n,o.m+=n,n+=o.s+(e+=o.c)}function As(t,n,e){return t.a.parent===n.parent?t.a:e}function Et(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Et.prototype=Object.create(dt.prototype);function Cs(t){for(var n=new Et(t,0),e,i=[n],r,o,s,u;e=i.pop();)if(o=e._.children)for(e.children=new Array(u=o.length),s=u-1;s>=0;--s)i.push(r=e.children[s]=new Et(o[s],s)),r.parent=e;return(n.parent=new Et(null,0)).children=[n],n}function Ks(){var t=ks,n=1,e=1,i=null;function r(a){var c=Cs(a);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)a.eachBefore(l);else{var p=a,f=a,_=a;a.eachBefore(function($){$.x<p.x&&(p=$),$.x>f.x&&(f=$),$.depth>_.depth&&(_=$)});var w=p===f?1:t(p,f)/2,v=w-p.x,A=n/(f.x+w+v),m=e/(_.depth||1);a.eachBefore(function($){$.x=($.x+v)*A,$.y=$.depth*m})}return a}function o(a){var c=a.children,p=a.parent.children,f=a.i?p[a.i-1]:null;if(c){Ms(a);var _=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+t(a._,f._),a.m=a.z-_):a.z=_}else f&&(a.z=f.z+t(a._,f._));a.parent.A=u(a,f,a.parent.A||p[0])}function s(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function u(a,c,p){if(c){for(var f=a,_=a,w=c,v=f.parent.children[0],A=f.m,m=_.m,$=w.m,N=v.m,S;w=Ot(w),f=Yt(f),w&&f;)v=Yt(v),_=Ot(_),_.a=a,S=w.z+$-f.z-A+t(w._,f._),S>0&&($s(As(w,a,p),a,S),A+=S,m+=S),$+=w.m,A+=f.m,N+=v.m,m+=_.m;w&&!Ot(_)&&(_.t=w,_.m+=$-m),f&&!Yt(v)&&(v.t=f,v.m+=A-N,p=a)}return p}function l(a){a.x*=n,a.y=a.depth*e}return r.separation=function(a){return arguments.length?(t=a,r):t},r.size=function(a){return arguments.length?(i=!1,n=+a[0],e=+a[1],r):i?null:[n,e]},r.nodeSize=function(a){return arguments.length?(i=!0,n=+a[0],e=+a[1],r):i?[n,e]:null},r}function zn(t){return function(){return t}}function Ns(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);n=i}return t},()=>new es(n)}var Ss=Array.prototype.slice;function zs(t){return t[0]}function Es(t){return t[1]}function Mt(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class Ts{constructor(n,e){this._context=n,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,e){switch(n=+n,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,e,n,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,n,this._y0,n,e);break}}this._x0=n,this._y0=e}}class Is{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,e){if(n=+n,e=+e,this._point===0)this._point=1;else{const i=Mt(this._x0,this._y0),r=Mt(this._x0,this._y0=(this._y0+e)/2),o=Mt(n,this._y0),s=Mt(n,e);this._context.moveTo(...i),this._context.bezierCurveTo(...r,...o,...s)}this._x0=n,this._y0=e}}function Rs(t){return new Ts(t,!0)}function Ps(t){return new Is(t)}function Ls(t){return t.source}function Bs(t){return t.target}function oe(t){let n=Ls,e=Bs,i=zs,r=Es,o=null,s=null,u=Ns(l);function l(){let a;const c=Ss.call(arguments),p=n.apply(this,c),f=e.apply(this,c);if(o==null&&(s=t(a=u())),s.lineStart(),c[0]=p,s.point(+i.apply(this,c),+r.apply(this,c)),c[0]=f,s.point(+i.apply(this,c),+r.apply(this,c)),s.lineEnd(),a)return s=null,a+""||null}return l.source=function(a){return arguments.length?(n=a,l):n},l.target=function(a){return arguments.length?(e=a,l):e},l.x=function(a){return arguments.length?(i=typeof a=="function"?a:zn(+a),l):i},l.y=function(a){return arguments.length?(r=typeof a=="function"?a:zn(+a),l):r},l.context=function(a){return arguments.length?(a==null?o=s=null:s=t(o=a),l):o},l}function Ws(){return oe(Rs)}function Zs(){const t=oe(Ps);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const At=t=>()=>t;function Hs(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function U(t,n,e){this.k=t,this.x=n,this.y=e}U.prototype={constructor:U,scale:function(t){return t===1?this:new U(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new U(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var se=new U(1,0,0);U.prototype;function Ut(t){t.stopImmediatePropagation()}function at(t){t.preventDefault(),t.stopImmediatePropagation()}function Ds(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function qs(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function En(){return this.__zoom||se}function Xs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Fs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vs(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],s=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Qs(){var t=Ds,n=qs,e=Vs,i=Xs,r=Fs,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Xr,a=on("start","zoom","end"),c,p,f,_=500,w=150,v=0,A=10;function m(h){h.property("__zoom",En).on("wheel.zoom",mt,{passive:!1}).on("mousedown.zoom",yt).on("dblclick.zoom",wt).filter(r).on("touchstart.zoom",ae).on("touchmove.zoom",ue).on("touchend.zoom touchcancel.zoom",le).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,g,d,y){var x=h.selection?h.selection():h;x.property("__zoom",En),h!==x?E(h,g,d,y):x.interrupt().each(function(){R(this,arguments).event(y).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},m.scaleBy=function(h,g,d,y){m.scaleTo(h,function(){var x=this.__zoom.k,b=typeof g=="function"?g.apply(this,arguments):g;return x*b},d,y)},m.scaleTo=function(h,g,d,y){m.transform(h,function(){var x=n.apply(this,arguments),b=this.__zoom,k=d==null?S(x):typeof d=="function"?d.apply(this,arguments):d,M=b.invert(k),C=typeof g=="function"?g.apply(this,arguments):g;return e(N($(b,C),k,M),x,s)},d,y)},m.translateBy=function(h,g,d,y){m.transform(h,function(){return e(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof d=="function"?d.apply(this,arguments):d),n.apply(this,arguments),s)},null,y)},m.translateTo=function(h,g,d,y,x){m.transform(h,function(){var b=n.apply(this,arguments),k=this.__zoom,M=y==null?S(b):typeof y=="function"?y.apply(this,arguments):y;return e(se.translate(M[0],M[1]).scale(k.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof d=="function"?-d.apply(this,arguments):-d),b,s)},y,x)};function $(h,g){return g=Math.max(o[0],Math.min(o[1],g)),g===h.k?h:new U(g,h.x,h.y)}function N(h,g,d){var y=g[0]-d[0]*h.k,x=g[1]-d[1]*h.k;return y===h.x&&x===h.y?h:new U(h.k,y,x)}function S(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function E(h,g,d,y){h.on("start.zoom",function(){R(this,arguments).event(y).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(y).end()}).tween("zoom",function(){var x=this,b=arguments,k=R(x,b).event(y),M=n.apply(x,b),C=d==null?S(M):typeof d=="function"?d.apply(x,b):d,D=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),z=x.__zoom,P=typeof g=="function"?g.apply(x,b):g,V=l(z.invert(C).concat(D/z.k),P.invert(C).concat(D/P.k));return function(L){if(L===1)L=P;else{var Y=V(L),Xt=D/Y[2];L=new U(Xt,C[0]-Y[0]*Xt,C[1]-Y[1]*Xt)}k.zoom(null,L)}})}function R(h,g,d){return!d&&h.__zooming||new K(h,g)}function K(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=n.apply(h,g),this.taps=0}K.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=Z(this.that).datum();a.call(h,this.that,new Hs(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:a}),g)}};function mt(h,...g){if(!t.apply(this,arguments))return;var d=R(this,g).event(h),y=this.__zoom,x=Math.max(o[0],Math.min(o[1],y.k*Math.pow(2,i.apply(this,arguments)))),b=Q(h);if(d.wheel)(d.mouse[0][0]!==b[0]||d.mouse[0][1]!==b[1])&&(d.mouse[1]=y.invert(d.mouse[0]=b)),clearTimeout(d.wheel);else{if(y.k===x)return;d.mouse=[b,y.invert(b)],zt(this),d.start()}at(h),d.wheel=setTimeout(k,w),d.zoom("mouse",e(N($(y,x),d.mouse[0],d.mouse[1]),d.extent,s));function k(){d.wheel=null,d.end()}}function yt(h,...g){if(f||!t.apply(this,arguments))return;var d=h.currentTarget,y=R(this,g,!0).event(h),x=Z(h.view).on("mousemove.zoom",C,!0).on("mouseup.zoom",D,!0),b=Q(h,d),k=h.clientX,M=h.clientY;dr(h.view),Ut(h),y.mouse=[b,this.__zoom.invert(b)],zt(this),y.start();function C(z){if(at(z),!y.moved){var P=z.clientX-k,V=z.clientY-M;y.moved=P*P+V*V>v}y.event(z).zoom("mouse",e(N(y.that.__zoom,y.mouse[0]=Q(z,d),y.mouse[1]),y.extent,s))}function D(z){x.on("mousemove.zoom mouseup.zoom",null),_r(z.view,y.moved),at(z),y.event(z).end()}}function wt(h,...g){if(t.apply(this,arguments)){var d=this.__zoom,y=Q(h.changedTouches?h.changedTouches[0]:h,this),x=d.invert(y),b=d.k*(h.shiftKey?.5:2),k=e(N($(d,b),y,x),n.apply(this,g),s);at(h),u>0?Z(this).transition().duration(u).call(E,k,y,h):Z(this).call(m.transform,k,y,h)}}function ae(h,...g){if(t.apply(this,arguments)){var d=h.touches,y=d.length,x=R(this,g,h.changedTouches.length===y).event(h),b,k,M,C;for(Ut(h),k=0;k<y;++k)M=d[k],C=Q(M,this),C=[C,this.__zoom.invert(C),M.identifier],x.touch0?!x.touch1&&x.touch0[2]!==C[2]&&(x.touch1=C,x.taps=0):(x.touch0=C,b=!0,x.taps=1+!!c);c&&(c=clearTimeout(c)),b&&(x.taps<2&&(p=C[0],c=setTimeout(function(){c=null},_)),zt(this),x.start())}}function ue(h,...g){if(this.__zooming){var d=R(this,g).event(h),y=h.changedTouches,x=y.length,b,k,M,C;for(at(h),b=0;b<x;++b)k=y[b],M=Q(k,this),d.touch0&&d.touch0[2]===k.identifier?d.touch0[0]=M:d.touch1&&d.touch1[2]===k.identifier&&(d.touch1[0]=M);if(k=d.that.__zoom,d.touch1){var D=d.touch0[0],z=d.touch0[1],P=d.touch1[0],V=d.touch1[1],L=(L=P[0]-D[0])*L+(L=P[1]-D[1])*L,Y=(Y=V[0]-z[0])*Y+(Y=V[1]-z[1])*Y;k=$(k,Math.sqrt(L/Y)),M=[(D[0]+P[0])/2,(D[1]+P[1])/2],C=[(z[0]+V[0])/2,(z[1]+V[1])/2]}else if(d.touch0)M=d.touch0[0],C=d.touch0[1];else return;d.zoom("touch",e(N(k,M,C),d.extent,s))}}function le(h,...g){if(this.__zooming){var d=R(this,g).event(h),y=h.changedTouches,x=y.length,b,k;for(Ut(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},_),b=0;b<x;++b)k=y[b],d.touch0&&d.touch0[2]===k.identifier?delete d.touch0:d.touch1&&d.touch1[2]===k.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(k=Q(k,this),Math.hypot(p[0]-k[0],p[1]-k[1])<A)){var M=Z(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(i=typeof h=="function"?h:At(+h),m):i},m.filter=function(h){return arguments.length?(t=typeof h=="function"?h:At(!!h),m):t},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:At(!!h),m):r},m.extent=function(h){return arguments.length?(n=typeof h=="function"?h:At([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):n},m.scaleExtent=function(h){return arguments.length?(o[0]=+h[0],o[1]=+h[1],m):[o[0],o[1]]},m.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(h){return arguments.length?(e=h,m):e},m.duration=function(h){return arguments.length?(u=+h,m):u},m.interpolate=function(h){return arguments.length?(l=h,m):l},m.on=function(){var h=a.on.apply(a,arguments);return h===a?m:h},m.clickDistance=function(h){return arguments.length?(v=(h=+h)*h,m):Math.sqrt(v)},m.tapDistance=function(h){return arguments.length?(A=+h,m):A},m}export{Os as S,Us as a,Zs as b,Gs as c,re as h,se as i,Ws as l,Z as s,Ks as t,Qs as z};
