import{_ as h,o,c as d,a as e,t as c,w as i,l as n,C as _,j as f}from"./main-e7f8bcae.js";const p={setup(){},data(){return{userId:this.$route.params.id,user:{},image:""}},created(){this.getUser()},methods:{getUser(){fetch("/users/show/"+this.userId).then(function(a){return a.json()}).then(a=>this.user=a).then(()=>{this.image=this.user.avatar})},ValidateForm(){this.user.first_name==""||this.user.first_name==null?alert("Please add a first name."):this.user.last_name==""||this.user.last_name==null?alert("Please add a last name."):this.user.username==""||this.user.username==null?alert("Please add a username."):this.user.email==""||this.user.email==null?alert("Please add an email address."):this.Submit()},ValidateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.user.email)||alert("Please enter a valid email address")},Submit(){const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:this.user.first_name,lastname:this.user.last_name,username:this.user.username,email:this.user.email,avatar:this.user.avatar,role:this.user.role,password:this.user.password})};var s="/users/"+this.userId+"/edit";fetch(s,a).then(()=>{this.$router.push("/users")})},onFileChange(a){var s=a.target.files||a.dataTransfer.files;s.length&&this.createImage(s[0])},createImage(a){new Image;var s=new FileReader,m=this;s.onload=u=>{m.image=u.target.result,this.image=u.target.result,this.user.avatar=this.image},s.readAsDataURL(a)},removeImage:function(a){this.image="",this.user.avatar=this.image}}},g={class:"container mt-3"},v=e("h1",null,"Edit User",-1),b={class:"mb-3"},w={for:"firstname",class:"form-label"},y={class:"mb-3"},U=e("label",{for:"lastname",class:"form-label"},"Last name",-1),V={class:"mb-3"},x=e("label",{class:"form-label"},"Username",-1),k={class:"mb-3"},I=e("label",{class:"form-label"},"Email address",-1),C={class:"mb-3 row"},E=e("label",{for:"avatar",class:"form-label"},"Avatar",-1),F={key:0},P=e("p",{style:{"font-size":"14px"}},[e("em",null,"Maximum file size 15mb")],-1),S={key:1},B=["src"],R={class:"mb-3"},T=e("label",{class:"form-label"},"Role",-1),j=e("option",{value:"admin"},"admin",-1),D=e("option",{value:"parent"},"parent",-1),M=e("option",{value:"student"},"student",-1),N=[j,D,M],z={class:"mb-3"},A=e("label",{class:"form-label"},"Password",-1);function L(a,s,m,u,l,r){return o(),d("div",g,[v,e("div",b,[e("label",w,"First name "+c(a.firstName),1),i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.user.first_name=t),type:"text",class:"form-control"},null,512),[[n,l.user.first_name]])]),e("div",y,[U,i(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l.user.last_name=t),type:"text",class:"form-control"},null,512),[[n,l.user.last_name]])]),e("div",V,[x,i(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l.user.username=t),type:"text",class:"form-control"},null,512),[[n,l.user.username]])]),e("div",k,[I,i(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>l.user.email=t),type:"email",class:"form-control",onBlur:s[4]||(s[4]=(...t)=>r.ValidateEmail&&r.ValidateEmail(...t))},null,544),[[n,l.user.email]])]),e("div",C,[E,l.image?(o(),d("div",S,[e("p",null,[e("img",{src:l.image,height:"200",style:{"background-color":"lightgrey"}},null,8,B)]),e("p",null,[e("button",{class:"btn btn-warning",onClick:s[6]||(s[6]=(...t)=>r.removeImage&&r.removeImage(...t))},"Remove image")])])):(o(),d("div",F,[e("input",{class:"form-control",type:"file",accept:"image/*",onChange:s[5]||(s[5]=(...t)=>r.onFileChange&&r.onFileChange(...t))},null,32),P]))]),e("div",R,[T,i(e("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>l.user.role=t),class:"form-select"},N,512),[[_,l.user.role]])]),e("div",z,[A,i(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>l.user.password=t),type:"text",class:"form-control"},null,512),[[n,l.user.password]])]),e("button",{class:"btn btn-dark",onClick:s[9]||(s[9]=t=>r.ValidateForm())},"Submit")])}const O=h(p,[["render",L]]),J={__name:"EditUserView",setup(a){return(s,m)=>(o(),f(O))}};export{J as default};
