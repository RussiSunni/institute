import{_,j as v,s as m,i as k,o as a,c,b as s,t as n,a as u,p,e as S}from"./main-f1bceaec.js";import{_ as f}from"./institute-collins-2-184bdfcb.js";const g={setup(){const i=v(),l=m(),r=k();return{userDetailsStore:i,skillsStore:l,usersStore:r}},data(){return{skillId:this.$route.params.skillId,versionNumber:this.$route.params.versionNumber,skillRevision:{},currentVersionNumber:null,isCurrentVersion:!1}},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.users.length==0&&await this.usersStore.getUsers(),await this.getSkill()},methods:{async getSkill(){const i=await fetch("/skills/show/"+this.skillId);this.skill=await i.json(),this.currentVersionNumber=this.skill.version_number,await this.getSkillVersion()},async getSkillVersion(){let i="/skill-history/"+this.skillId+"/"+this.versionNumber;const l=await fetch(i);this.skillRevision=await l.json(),this.skillRevision.version_number==this.currentVersionNumber&&(this.isCurrentVersion=!0);for(let t=0;t<this.skillsStore.skillsList.length;t++)this.skillsStore.skillsList[t].id==this.skillRevision.parent&&(this.skillRevision.parentName=this.skillsStore.skillsList[t].name);for(let t=0;t<this.usersStore.users.length;t++)this.usersStore.users[t].id==this.skillRevision.user_id&&(this.skillRevision.userName=this.usersStore.users[t].username);var r=this.skillRevision.edited_date.replace("T"," ");r=r.replace("Z"," ");let o=r.split(/[- :]/);var e=new Date(Date.UTC(o[0],o[1]-1,o[2],o[3],o[4],o[5])),d={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};this.skillRevision.date=e.toLocaleDateString("en-US",d)},revert(){if(confirm("Are you sure you want to revert the skill to this version?")){const l={method:"PUT",headers:{"Content-Type":"application/json"}};var i="/skill-history/"+this.skillId+"/revert-to/"+this.versionNumber;fetch(i,l).then(()=>{this.$router.push("/skills/"+this.skillId)})}}}},h=i=>(p("data-v-ba621680"),i=i(),S(),i),w={class:"position-relative d-flex"},y={class:"container show-skill-ctnr"},R={class:"container mt-3"},b={id:"skill-info-container"},x={class:"d-flex flex-column gap-2"},N={id:"skill-image"},V=["src"],I={class:"d-flex flex-column"},C={class:"skill-name"},D={class:"alert alert-warning d-flex",role:"alert"},L=h(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})],-1)),T={key:0,class:"ms-2"},U={key:1,class:"ms-2"},j={key:0,class:"row pe-4 ps-4 ps-md-0 skill-description"},q=h(()=>s("div",{class:"row"},[s("div",{class:"col col-md-8 p-4 p-md-0"},[s("hr",{id:"hr-parent",class:"border border-2 opacity-100"})])],-1)),B={class:"mt-3 d-flex flex-column"},M=h(()=>s("div",{class:"h1-title"},"Mastery Requirements",-1)),z={class:"mastery-requirements"},H=["innerHTML"],A=h(()=>s("p",null,"Â ",-1)),E=h(()=>s("div",{id:"banner"},[s("img",{src:f,class:"img-fluid"})],-1));function O(i,l,r,o,e,d){return a(),c("div",w,[s("div",y,[s("div",R,[s("div",b,[s("div",x,[s("div",N,[s("img",{src:e.skillRevision.icon_image?e.skillRevision.icon_image:"/images/skill-avatar/recurso.png",class:"skill-icon"},null,8,V)]),s("div",I,[s("div",C,n(e.skillRevision.name),1),s("div",D,[L,e.isCurrentVersion?(a(),c("span",U," This is the current revision of this page, as edited by "+n(e.skillRevision.userName)+", at "+n(e.skillRevision.date)+". ",1)):(a(),c("span",T," This is an old revision of this page, as edited by "+n(e.skillRevision.userName)+", at "+n(e.skillRevision.date)+". ",1))]),o.userDetailsStore.role=="admin"?(a(),c("div",j,[s("p",null,n(e.skillRevision.description),1)])):u("",!0)])]),s("div",null,[q,s("div",B,[M,s("div",z,[s("div",{innerHTML:e.skillRevision.mastery_requirements},null,8,H)])])])]),e.isCurrentVersion?u("",!0):(a(),c("button",{key:0,class:"btn purple-btn mt-2",onClick:l[0]||(l[0]=t=>d.revert())}," Revert to this version ")),A])]),E])}const F=_(g,[["render",O],["__scopeId","data-v-ba621680"]]);export{F as default};
