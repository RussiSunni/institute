import{u as y}from"./TagsStore-0fed52e4.js";import{u as C}from"./SkillsStore-a7556ecf.js";import{_ as S,e as w,o as n,c as a,a as e,w as r,k as _,B as p,F as d,r as h,t as u,v as I,C as g,f as L,h as x,i as b,p as T,b as R,g as V}from"./main-c2800e64.js";const U={setup(){const t=y(),s=C();return t.tagsList.length==0&&t.getTagsList(),{tagsStore:t,skillsStore:s}},data(){return{skillId:this.$route.params.id,skills:[],skill:{name:"",parent:"",description:"",icon_image:"",banner_image:"",mastery_requirements:"",tags:[],type:null,level:null},iconImage:"",bannerImage:"",skillTags:[],superSkills:[],levels:[{id:"grade_school",name:"Grade school"},{id:"middle_school",name:"Middle school"},{id:"high_school",name:"High school"},{id:"college",name:"College"},{id:"phd",name:"PhD"}]}},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.tagsStore.tagsList.length==0&&await this.tagsStore.getTagsList(),this.getParentSkills()},methods:{getParentSkills(){this.skills=this.skillsStore.skillsList;for(let t=0;t<this.skills.length;t++)this.skills[t].type=="super"&&this.superSkills.push(this.skills[t]);this.getSkill()},getSkill(){fetch("/skills/show/"+this.skillId).then(function(t){return t.json()}).then(t=>this.skill=t).then(()=>{this.iconImage=this.skill.icon_image,this.bannerImage=this.skill.banner_image,$("#summernote").summernote("code",this.skill.mastery_requirements),this.getSkillTags()})},getSkillTags(){for(let t=0;t<this.tagsStore.tagsList.length;t++){this.skillTags.push(this.tagsStore.tagsList[t]),this.skillTags[t].isChecked=!1;for(let s=0;s<this.skill.tags.length;s++)this.skill.tags[s].tag_id==this.tagsStore.tagsList[t].id&&(this.skillTags[t].isChecked=!0)}},onFileChange(t){var s=t.target.files||t.dataTransfer.files;s.length&&this.createImage(s[0])},createImage(t){new Image;var s=new FileReader,m=this;s.onload=k=>{m.image=k.target.result,this.image=k.target.result,this.skill.image=this.image},s.readAsDataURL(t)},removeImage:function(t){this.image="",this.skill.image=this.image},Submit(){var t=$("#summernote").summernote("code");const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.skill.name,parent:this.skill.parent,description:this.skill.description,icon:this.skill.icon,icon_image:this.skill.icon_image,banner_image:this.skill.banner_image,mastery_requirements:t,type:this.skill.type,level:this.skill.level})};var m="/skills/"+this.skillId+"/edit";fetch(m,s).then(()=>{this.$router.push("/skills")})},changeTag(t){var s;t.isChecked==!0?(s="/skill-tags/add/"+this.skillId+"/"+t.id,fetch(s,{method:"POST",body:{}})):(s="/skill-tags/remove/"+this.skillId+"/"+t.id,fetch(s,{method:"DELETE"}))}}},o=t=>(T("data-v-c0811d72"),t=t(),R(),t),q={class:"container mt-3"},D=o(()=>e("h1",null,"Edit Skill",-1)),F={class:"mb-3"},M=o(()=>e("label",{for:"name",class:"form-label"},"Name",-1)),E={class:"mb-3"},B=o(()=>e("label",{class:"form-label"},"Level",-1)),P=["value"],N={class:"row mb-3"},j=o(()=>e("label",{for:"tags",class:"form-label"},"Filter",-1)),z={class:"form-check"},O=["value","onUpdate:modelValue","onChange"],A={class:"form-check-label",for:"flexCheckDefault"},G=o(()=>e("label",{class:"form-label"},"Node Type",-1)),H={class:"container row mb-3"},J={class:"form-check col-3"},Z=o(()=>e("label",{class:"form-check-label",for:"regularSkillRadio"}," Regular ",-1)),K={class:"form-check col-3"},Q=o(()=>e("label",{class:"form-check-label",for:"passThroughRadio"}," Pass-through ",-1)),W={class:"form-check col-3"},X=o(()=>e("label",{class:"form-check-label",for:"superSkillRadio"}," Cluster node center ",-1)),Y={class:"form-check col-3"},ee=o(()=>e("label",{class:"form-check-label",for:"subSkillRadio"}," Cluster node outer ",-1)),se={key:0,class:"mb-3"},le=o(()=>e("label",{class:"form-label"},"Parent",-1)),te=["value"],ie={key:1,class:"mb-3"},oe=o(()=>e("label",{class:"form-label"},"Cluster node center",-1)),ne=["value"],ae={class:"mb-3"},re=o(()=>e("label",{for:"description",class:"form-label"},"Description",-1)),ce={class:"mb-3 row"},me=o(()=>e("label",{for:"image",class:"form-label"},"Icon",-1)),de={key:0},he=o(()=>e("p",{style:{"font-size":"14px"}},[e("em",null,"Maximum file size 15mb")],-1)),ue={key:1},ge=["src"],ke={class:"mb-3 row"},_e=o(()=>e("label",{for:"image",class:"form-label"},"Banner",-1)),pe={key:0},fe=o(()=>e("p",{style:{"font-size":"14px"}},[e("em",null,"Maximum file size 15mb")],-1)),be={key:1},ve=["src"],ye={class:"mb-3"},Ce=o(()=>e("label",{for:"mastery_requirements",class:"form-label"},"Mastery Requirements",-1)),Se={class:"mb-3 mt-3"},we={class:"d-flex justify-content-between"},Ie=o(()=>e("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z",fill:"white"})],-1));function Le(t,s,m,k,i,c){const v=w("router-link");return n(),a("div",q,[D,e("div",F,[M,r(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>i.skill.name=l),type:"text",class:"form-control"},null,512),[[_,i.skill.name]])]),e("div",E,[B,r(e("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=l=>i.skill.level=l)},[(n(!0),a(d,null,h(i.levels,l=>(n(),a("option",{value:l.id},u(l.name),9,P))),256))],512),[[p,i.skill.level]])]),e("div",N,[j,(n(!0),a(d,null,h(i.skillTags,l=>(n(),a("div",null,[e("div",z,[r(e("input",{class:"form-check-input",type:"checkbox",value:l.id,id:"flexCheckDefault","onUpdate:modelValue":f=>l.isChecked=f,onChange:f=>c.changeTag(l)},null,40,O),[[I,l.isChecked]]),e("label",A,u(l.name),1)])]))),256))]),G,e("div",H,[e("div",J,[r(e("input",{class:"form-check-input",type:"radio",name:"nodeType",id:"regularSkillRadio",value:"regular","onUpdate:modelValue":s[2]||(s[2]=l=>i.skill.type=l)},null,512),[[g,i.skill.type]]),Z]),e("div",K,[r(e("input",{class:"form-check-input",type:"radio",name:"nodeType",id:"passThroughRadio",value:"domain","onUpdate:modelValue":s[3]||(s[3]=l=>i.skill.type=l)},null,512),[[g,i.skill.type]]),Q]),e("div",W,[r(e("input",{class:"form-check-input",type:"radio",name:"nodeType",id:"superSkillRadio",value:"super","onUpdate:modelValue":s[4]||(s[4]=l=>i.skill.type=l)},null,512),[[g,i.skill.type]]),X]),e("div",Y,[r(e("input",{class:"form-check-input",type:"radio",name:"nodeType",id:"subSkillRadio",value:"sub","onUpdate:modelValue":s[5]||(s[5]=l=>i.skill.type=l)},null,512),[[g,i.skill.type]]),ee])]),i.skill.type!="sub"?(n(),a("div",se,[le,r(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=l=>i.skill.parent=l)},[(n(!0),a(d,null,h(i.skills,l=>(n(),a("option",{value:l.id},u(l.name),9,te))),256))],512),[[p,i.skill.parent]])])):(n(),a("div",ie,[oe,r(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=l=>i.skill.parent=l)},[(n(!0),a(d,null,h(i.superSkills,l=>(n(),a("option",{value:l.id},u(l.name),9,ne))),256))],512),[[p,i.skill.parent]])])),e("div",ae,[re,r(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>i.skill.description=l),class:"form-control",rows:"3"},null,512),[[_,i.skill.description]])]),e("div",ce,[me,i.iconImage?(n(),a("div",ue,[e("p",null,[e("img",{src:i.iconImage,height:"200",style:{"background-color":"lightgrey"}},null,8,ge)]),e("p",null,[e("button",{class:"btn btn-warning",onClick:s[10]||(s[10]=(...l)=>c.removeImage&&c.removeImage(...l))},"Remove image")])])):(n(),a("div",de,[e("input",{class:"form-control",type:"file",accept:"image/*",onChange:s[9]||(s[9]=(...l)=>c.onFileChange&&c.onFileChange(...l))},null,32),he]))]),e("div",ke,[_e,i.bannerImage?(n(),a("div",be,[e("p",null,[e("img",{src:i.bannerImage,height:"200",style:{"background-color":"lightgrey"}},null,8,ve)]),e("p",null,[e("button",{class:"btn btn-warning",onClick:s[12]||(s[12]=(...l)=>c.removeImage&&c.removeImage(...l))},"Remove image")])])):(n(),a("div",pe,[e("input",{class:"form-control",type:"file",accept:"image/*",onChange:s[11]||(s[11]=(...l)=>c.onFileChange&&c.onFileChange(...l))},null,32),fe]))]),e("div",ye,[Ce,r(e("textarea",{class:"form-control","onUpdate:modelValue":s[13]||(s[13]=l=>i.skill.mastery_requirements=l),id:"summernote",rows:"3"},null,512),[[_,i.skill.mastery_requirements]])]),e("div",Se,[e("div",we,[L(v,{class:"btn btn-dark",to:"/skills"},{default:x(()=>[b(" Cancel ")]),_:1}),e("button",{onClick:s[14]||(s[14]=l=>c.Submit()),class:"btn green-btn"},[b(" SubmitÂ  "),Ie])])])])}const xe=S(U,[["render",Le],["__scopeId","data-v-c0811d72"]]),Ue={__name:"EditSkillView",setup(t){return(s,m)=>(n(),V(xe))}};export{Ue as default};
