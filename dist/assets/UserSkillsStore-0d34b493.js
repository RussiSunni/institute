import{d as o}from"./main-d18a10be.js";import{u as h}from"./SkillsStore-47ae86a3.js";import{u as L}from"./SkillTreeStore-b1adfd4b.js";const d=o("userSkills",{state:()=>({unnestedList:[]}),actions:{async getUnnestedList(i){const n=await fetch("/user-skills/unnested-list/"+i);this.unnestedList=await n.json()},async MakeMastered(i,n){const t=h();t.skillsList.length==0&&await t.getSkillsList();const k=L();await this.getUnnestedList(i);let f="/user-skills/mastered/"+i+"/"+n;fetch(f).then(()=>{let a={};for(let e=0;e<t.skillsList.length;e++)t.skillsList[e].id==n&&(a=t.skillsList[e]);if(a.type!="sub"){const e=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==n&&e.push(t.skillsList[s]);let r=[];for(let s=0;s<e.length;s++)if(e[s].type=="regular")this.MakeAccessible(i,e[s].id);else if(e[s].type=="super")for(let l=0;l<t.skillsList.length;l++)t.skillsList[l].parent==e[s].id&&t.skillsList[l].type=="sub"&&r.push(t.skillsList[l].id);for(let s=0;s<r.length;s++)this.MakeAccessible(i,r[s])}else{let e=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==a.parent&&t.skillsList[s].id!=a.id&&t.skillsList[s].type=="sub"&&e.push(t.skillsList[s]);let r=!0;for(let s=0;s<this.unnestedList.length;s++)for(let l=0;l<e.length;l++)e[l].id==this.unnestedList[s].id&&this.unnestedList[s].is_mastered!=1&&(r=!1);r&&this.MakeAccessible(i,a.parent)}k.getUserSkills()})},async MakeAccessible(i,n){var t="/user-skills/accessible/"+i+"/"+n;fetch(t),await this.getUnnestedList(i)}}});export{d as u};
