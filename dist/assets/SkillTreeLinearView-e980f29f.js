import{_ as y,u as T,S as N,r as g,o as k,c as x,a as S,w as b,v as L,b as n,p as z,d as F,e as I,f as w,g as $,F as A}from"./main-65a92b14.js";import{u as B}from"./SkillTreeStore-32e249e7.js";import{u as D,S as P,h as R,t as U}from"./transform-630f4426.js";import{S as V}from"./fontfaceobserver.standalone-94acc810.js";import{c as j,a as M,z as E}from"./zoom-d498babb.js";function H(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}const J={setup(){const t=T(),s=B(),r=D();return{userDetailsStore:t,skillTreeStore:s,skillTagsStore:r}},data(){return{stageContents:[],isSkillInfoPanelShown:!1,regularLockedUnmasteredNodeSprite:null,radius:0,width:null,height:null,radiusMultiplier:64,firstLevelNodeSize:100,regularNodeSize:50,subSkillRadius:50,skill:{id:null,children:[],isMastered:null,isUnlocked:null,container:null,name:null,description:null,tagIDs:[],sprite:null},isRecentered:!1}},components:{SkillTreeFilter:P,SkillPanel:V},async mounted(){this.skillTreeStore.userSkills.length==0&&await this.skillTreeStore.getUserSkills(),this.width=window.innerWidth,this.height=window.innerHeight,this.radius=Math.min(this.width,this.height)/2;const t=N.from("center-node.png");this.skill={name:"SKILLS",sprite:t,children:this.skillTreeStore.userSkills},this.getAlgorithm()},methods:{getAlgorithm(){var t=[];t=JSON.parse(JSON.stringify(this.skill.children));function s(e){for(var i=e.length;i--;)e[i].type=="sub"&&e.splice(i,1),typeof e[i]<"u"&&e[i].children&&Array.isArray(e[i].children)&&e[i].children.length>0&&s(e[i].children)}s(t);var r={name:null,children:t};const o=8e3,l=R(r),c=30,d=o/(l.height+1),h=U().nodeSize([c,d]);l.sort((e,i)=>H(e.data.name,i.data.name)),h(l);let a=1/0,u=-a;l.each(e=>{e.x>u&&(u=e.x),e.x<a&&(a=e.x)});const f=u-a+c*2,p=j("svg").attr("width",o).attr("height",f).attr("viewBox",[-d/3,a-c,o,f]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;"),_=p.append("g");_.append("g").attr("fill","none").attr("stroke","#FFF").attr("stroke-opacity",1).selectAll().data(l.links()).join("path").attr("d",M().x(e=>e.y).y(e=>e.x)).attr("stroke-width",function(e){return e.target.data.is_mastered==1?8:1.5});const m=_.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll().data(l.descendants()).join("g").attr("transform",e=>`translate(${e.y},${e.x})`);m.append("circle").attr("fill",e=>e.children?"#555":"#999").attr("r",2.5),m.append("text").attr("dy","0.31em").attr("x",e=>e.children?-6:6).attr("text-anchor",e=>e.children?"end":"start").text(e=>e.data.skill_name).clone(!0).lower().attr("stroke","white"),p.call(E().extent([[0,0],[this.width,this.height]]).scaleExtent([.1,20]).on("zoom",v));function v({transform:e}){_.attr("transform",e)}document.querySelector("#skilltree").append(p.node())}}},O=t=>(z("data-v-e8ac7903"),t=t(),F(),t),q={class:"flex-container skill-tree-container"},K={id:"reset-button",class:"btn btn-info"},W={id:"wrapper"},G={id:"skilltree"},Q=O(()=>n("div",{id:"sidepanel-backdrop"},null,-1));function X(t,s,r,o,l,c){const d=g("SkillTreeFilter"),h=g("SkillPanel");return k(),x("div",q,[S(d,{id:"filter"}),b(n("button",K,"Reset",512),[[L,l.isRecentered]]),n("div",W,[n("div",G,[S(h,{skill:l.skill},null,8,["skill"])]),Q])])}const Y=y(J,[["render",X],["__scopeId","data-v-e8ac7903"]]);const Z=n("div",{id:"purple-banner"},null,-1),C=n("span",null,"Loading...",-1),ne={__name:"SkillTreeLinearView",setup(t){return(s,r)=>(k(),x(A,null,[Z,(k(),I($,null,{default:w(()=>[S(Y)]),fallback:w(()=>[C]),_:1}))],64))}};export{ne as default};
