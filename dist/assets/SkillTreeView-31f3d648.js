import{d as te,_ as E,o as z,c as M,a as w,w as Y,v as j,F as K,r as ne,t as ie,p as re,b as se,u as le,e as ae,f as G,S as ce,g as oe}from"./main-8ae89ab6.js";import{u as he}from"./SkillTreeStore-0e0ce35a.js";import{u as de}from"./TagsStore-4f225ac4.js";import{S as ue,A as fe,h as pe,P as _e,G as $,a as ke,T as R,C as q}from"./fontfaceobserver.standalone-523e7f08.js";const ge=te("skillTags",{state:()=>({skillTagsList:[]}),actions:{async getSkillTagsList(){const t=await(await fetch("/skill-tags/list")).json();this.skillTagsList=t}}});const ye={setup(){return{tagsStore:de()}},data(){return{filters:[],checkedFilters:[]}},async created(){},async mounted(){await this.tagsStore.getTagsList()},methods:{applyFilter:function(){this.$parent.applyFilter(this.checkedFilters)}}},O=e=>(re("data-v-9934bafa"),e=e(),se(),e),me={id:"filters"},xe=O(()=>w("h1",{id:"filterMainHeader",class:"mb-2"},"My Skills Tree",-1)),Se={class:"form-check"},we=O(()=>w("label",{class:"form-check-label",for:"flexCheckDefault"}," Mastered and available skills ",-1)),Ce={class:"form-check"},be=["value"],Te={class:"form-check-label",for:"flexCheckDefault"};function Fe(e,t,n,i,s,a){return z(),M("div",me,[xe,w("div",Se,[Y(w("input",{class:"form-check-input",type:"checkbox",value:0,id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=c=>s.checkedFilters=c),onChange:t[1]||(t[1]=c=>a.applyFilter())},null,544),[[j,s.checkedFilters]]),we]),(z(!0),M(K,null,ne(this.tagsStore.tagsList,c=>(z(),M("div",null,[w("div",Ce,[Y(w("input",{class:"form-check-input",type:"checkbox",value:c.id,id:"flexCheckDefault","onUpdate:modelValue":t[2]||(t[2]=l=>s.checkedFilters=l),onChange:t[3]||(t[3]=l=>a.applyFilter())},null,40,be),[[j,s.checkedFilters]]),w("label",Te,ie(c.name),1)])]))),256))])}const ve=E(ye,[["render",Fe],["__scopeId","data-v-9934bafa"]]);function ze(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Ae(){return this.eachAfter(ze)}function Ne(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function De(e,t){for(var n=this,i=[n],s,a,c=-1;n=i.pop();)if(e.call(t,n,++c,this),s=n.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function Me(e,t){for(var n=this,i=[n],s=[],a,c,l,x=-1;n=i.pop();)if(s.push(n),a=n.children)for(c=0,l=a.length;c<l;++c)i.push(a[c]);for(;n=s.pop();)e.call(t,n,++x,this);return this}function Be(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function $e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)n+=i[s].value;t.value=n})}function Le(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ie(e){for(var t=this,n=Pe(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var s=i.length;e!==n;)i.splice(s,0,e),e=e.parent;return i}function Pe(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),s=null;for(e=n.pop(),t=i.pop();e===t;)s=e,e=n.pop(),t=i.pop();return s}function Ue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ve(){return Array.from(this)}function He(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function We(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Xe(){var e=this,t,n=[e],i,s,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(s=0,a=i.length;s<a;++s)n.push(i[s]);while(n.length)}function P(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Ge)):t===void 0&&(t=je);for(var n=new A(e),i,s=[n],a,c,l,x;i=s.pop();)if((c=t(i.data))&&(x=(c=Array.from(c)).length))for(i.children=c,l=x-1;l>=0;--l)s.push(a=c[l]=new A(c[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(qe)}function Ye(){return P(this).eachBefore(Re)}function je(e){return e.children}function Ge(e){return Array.isArray(e)?e[1]:null}function Re(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function qe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function A(e){this.data=e,this.depth=this.height=0,this.parent=null}A.prototype=P.prototype={constructor:A,count:Ae,each:Ne,eachAfter:Me,eachBefore:De,find:Be,sum:$e,sort:Le,path:Ie,ancestors:Ue,descendants:Ve,leaves:He,links:We,copy:Ye,[Symbol.iterator]:Xe};function Ee(e,t){return e.parent===t.parent?1:2}function L(e){var t=e.children;return t?t[0]:e.t}function I(e){var t=e.children;return t?t[t.length-1]:e.t}function Ke(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Oe(e){for(var t=0,n=0,i=e.children,s=i.length,a;--s>=0;)a=i[s],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Ze(e,t,n){return e.a.parent===t.parent?e.a:n}function B(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}B.prototype=Object.create(A.prototype);function Je(e){for(var t=new B(e,0),n,i=[t],s,a,c,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),c=l-1;c>=0;--c)i.push(s=n.children[c]=new B(a[c],c)),s.parent=n;return(t.parent=new B(null,0)).children=[t],t}function Qe(){var e=Ee,t=1,n=1,i=null;function s(r){var g=Je(r);if(g.eachAfter(a),g.parent.m=-g.z,g.eachBefore(c),i)r.eachBefore(x);else{var y=r,d=r,_=r;r.eachBefore(function(h){h.x<y.x&&(y=h),h.x>d.x&&(d=h),h.depth>_.depth&&(_=h)});var p=y===d?1:e(y,d)/2,k=p-y.x,S=t/(d.x+p+k),f=n/(_.depth||1);r.eachBefore(function(h){h.x=(h.x+k)*S,h.y=h.depth*f})}return r}function a(r){var g=r.children,y=r.parent.children,d=r.i?y[r.i-1]:null;if(g){Oe(r);var _=(g[0].z+g[g.length-1].z)/2;d?(r.z=d.z+e(r._,d._),r.m=r.z-_):r.z=_}else d&&(r.z=d.z+e(r._,d._));r.parent.A=l(r,d,r.parent.A||y[0])}function c(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function l(r,g,y){if(g){for(var d=r,_=r,p=g,k=d.parent.children[0],S=d.m,f=_.m,h=p.m,m=k.m,b;p=I(p),d=L(d),p&&d;)k=L(k),_=I(_),_.a=r,b=p.z+h-d.z-S+e(p._,d._),b>0&&(Ke(Ze(p,r,y),r,b),S+=b,f+=b),h+=p.m,S+=d.m,m+=k.m,f+=_.m;p&&!I(_)&&(_.t=p,_.m+=h-f),d&&!L(k)&&(k.t=d,k.m+=S-m,y=r)}return y}function x(r){r.x*=t,r.y=r.depth*n}return s.separation=function(r){return arguments.length?(e=r,s):e},s.size=function(r){return arguments.length?(i=!1,t=+r[0],n=+r[1],s):i?null:[t,n]},s.nodeSize=function(r){return arguments.length?(i=!0,t=+r[0],n=+r[1],s):i?[t,n]:null},s}function v(e,t,n){this.k=e,this.x=t,this.y=n}v.prototype={constructor:v,scale:function(e){return e===1?this:new v(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new v(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};v.prototype;const et={setup(){const e=le(),t=he(),n=ge();return{userDetailsStore:e,skillTreeStore:t,skillTagsStore:n}},data(){return{}},components:{SkillTreeFilter:ve,SkillPanel:ue},async mounted(){await this.skillTreeStore.getUserSkillsNoSubSkills();var e=this.skillTreeStore.userSkillsNoSubSkills;await this.skillTreeStore.getUserSkills();var t=this.skillTreeStore.userSkills,n={name:"test",children:e};const i=window.innerWidth,s=window.innerHeight,a=Math.min(i,s)/2,l=Qe().size([2*Math.PI,a*6]).separation((f,h)=>(f.parent==h.parent?1:4)/f.depth)(P(n)),x=new fe({width:i,height:s,resolution:2,transparent:!0,antialias:!0,autoDensity:!0,autoStart:!0});document.querySelector("#app").appendChild(x.view);const r=new pe({screenWidth:i,screenHeight:s,worldWidth:i,worldHeight:s,events:x.renderer.events});x.stage.addChild(r),r.center=new _e(0,0),r.drag().pinch().wheel().decelerate().clampZoom({minScale:.2,maxScale:5});for(let f=0;f<l.links().length;f++){const h=new $;h.lineStyle(2,16777215,1);var g=Math.cos(l.links()[f].source.x)*l.links()[f].source.y,y=Math.sin(l.links()[f].source.x)*l.links()[f].source.y;h.moveTo(g,y);var d=Math.cos(l.links()[f].target.x)*l.links()[f].target.y,_=Math.sin(l.links()[f].target.x)*l.links()[f].target.y;h.lineTo(d,_),r.addChild(h)}const p=ke.from("center-node.png");p.x=l.x,p.y=l.y,p.anchor.set(.5),p.scale.set(.1),r.addChild(p);let k=new R("SKILLS",{fontFamily:"Poppins900",fontSize:65,fill:0,align:"center"});k.anchor.set(.5),k.x=l.x,k.y=l.y,k.scale.x=.2,k.scale.y=.2,r.addChild(k);function S(f,h){h++;for(let[b,o]of f.entries()){for(let u=0;u<l.descendants().length;u++)l.descendants()[u].data.id==o.id&&(o.x=l.descendants()[u].x,o.y=l.descendants()[u].y);let T=new q;T.x=Math.cos(o.x)*o.y,T.y=Math.sin(o.x)*o.y;const C=new $;var m;o.is_mastered=="1"?m="0x"+o.mastered_color:o.is_accessible=="1"?(C.lineStyle(1,"0x"+o.mastered_color,1),m="0x"+o.unlocked_color):m="0xD9D9D9",C.beginFill(m),h==0?C.drawCircle(0,0,30):h==1?C.drawCircle(0,0,15):C.drawCircle(0,0,10),C.endFill(),T.addChild(C);let U=40;const V=o.skill_name.split(" ");for(let u=0;u<V.length;u++)V[u].length>9&&(U=37);o.skill_name=o.skill_name.replace(/(.*?\s)/g,`$1
`);let N=new R(o.skill_name.toUpperCase(),{fontFamily:"Poppins900",fontSize:U,fill:16777215,align:"center"});N.anchor.set(.5),N.scale.x=.1,N.scale.y=.1,T.addChild(N),r.addChild(T);let H=0,W=0;for(let u=0;u<o.children.length;u++)o.children[u].type!="sub"?H++:W++;for(let u=0;u<o.children.length;u++)if(o.children[u].type=="sub"){let D=new q,Z=360/W,J=u-H,X=Z*J*Math.PI/180,Q=25*Math.cos(X),ee=25*Math.sin(X);D.x=Q,D.y=ee;const F=new $;var m;o.children[u].is_mastered=="1"?m="0x"+o.children[u].mastered_color:o.children[u].is_accessible=="1"?(F.lineStyle(1,"0x"+o.children[u].mastered_color,1),m="0x"+o.children[u].unlocked_color):m="0xD9D9D9",F.beginFill(m),F.drawCircle(0,0,5),F.endFill(),D.addChild(F),T.addChild(D)}o.children&&Array.isArray(o.children)&&o.children.length>0&&S(o.children,h)}}S(t,0)},methods:{}};function tt(e,t,n,i,s,a){return null}const nt=E(et,[["render",tt],["__scopeId","data-v-43b11192"]]);const it=w("div",{id:"purple-banner"},null,-1),rt=w("span",null,"Loading...",-1),ht={__name:"SkillTreeView",setup(e){return(t,n)=>(z(),M(K,null,[it,(z(),ae(ce,null,{default:G(()=>[oe(nt)]),fallback:G(()=>[rt]),_:1}))],64))}};export{ht as default};
