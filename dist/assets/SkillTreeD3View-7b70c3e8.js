import{_ as g,u as m,S as w,r as p,o as c,c as k,a as h,w as v,v as x,b as r,p as y,d as T,e as b,f as _,g as I,F as $}from"./main-70aa1041.js";import{u as M}from"./SkillTreeStore-d010e807.js";import{u as P,S as N,t as D,h as F}from"./transform-fdb520b0.js";import{S as z}from"./fontfaceobserver.standalone-bc8c541c.js";import{c as A,l as B,z as L}from"./zoom-fb64fa0c.js";const R={setup(){const t=m(),s=M(),a=P();return{userDetailsStore:t,skillTreeStore:s,skillTagsStore:a}},data(){return{stageContents:[],isSkillInfoPanelShown:!1,regularLockedUnmasteredNodeSprite:null,radius:0,width:null,height:null,radiusMultiplier:64,firstLevelNodeSize:100,regularNodeSize:50,subSkillRadius:50,skill:{id:null,children:[],isMastered:null,isUnlocked:null,container:null,name:null,description:null,tagIDs:[],sprite:null},isRecentered:!1}},components:{SkillTreeFilter:N,SkillPanel:z},async mounted(){this.skillTreeStore.userSkills.length==0&&await this.skillTreeStore.getUserSkills(),this.width=window.innerWidth,this.height=window.innerHeight,this.radius=Math.min(this.width,this.height)/2;const t=w.from("center-node.png");this.skill={name:"SKILLS",sprite:t,children:this.skillTreeStore.userSkills},this.getAlgorithm()},methods:{getAlgorithm(){var t=[];t=JSON.parse(JSON.stringify(this.skill.children));function s(e){for(var i=e.length;i--;)e[i].type=="sub"&&e.splice(i,1),typeof e[i]<"u"&&e[i].children&&Array.isArray(e[i].children)&&e[i].children.length>0&&s(e[i].children)}s(t);var a={name:null,children:t};const l=D().size([2*Math.PI,this.radius*this.radiusMultiplier]).separation((e,i)=>(e.parent==i.parent,1/e.depth))(F(a)),u=this.width*0,d=this.height*.59,n=A("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",[-u,-d,this.width,this.height]).attr("style","width: 100%; height: auto; font: 10px sans-serif;"),o=n.append("g");o.append("g").attr("fill","none").attr("stroke","#FFF").attr("stroke-opacity",1).attr("stroke-width",2).selectAll().data(l.links()).join("path").attr("d",B().angle(e=>e.x).radius(e=>e.y)),o.append("g").selectAll().data(l.descendants()).join("circle").attr("transform",e=>`rotate(${e.x*180/Math.PI-90}) translate(${e.y},0)`).attr("fill",function(e){if(e.depth==0)return"lightgreen";if(e.data.type=="domain")return"orange";if(e.data.level=="grade_school")return"yellow";if(e.data.level=="middle_school")return"lightblue";if(e.data.level=="high_school")return"green";if(e.data.level=="college")return"red";if(e.data.level=="phd")return"purple"}).attr("r",function(e){return e.depth==0?50:e.data.type=="domain"?20:5}),o.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll().data(l.descendants()).join("text").attr("transform",e=>`rotate(${e.x*180/Math.PI-90}) translate(${e.y},0) rotate(${e.x>=Math.PI?180:0})`).attr("dy","0.31em").attr("x",e=>e.x<Math.PI==!e.children?6:-6).attr("text-anchor",e=>e.x<Math.PI==!e.children?"start":"end").attr("paint-order","stroke").attr("stroke","white").attr("fill","currentColor").text(e=>e.data.skill_name),n.call(L().extent([[0,0],[this.width,this.height]]).scaleExtent([.1,20]).on("zoom",S));function S({transform:e}){o.attr("transform",e)}document.querySelector("#skilltree").append(n.node())}}},j=t=>(y("data-v-0dcd7519"),t=t(),T(),t),U={class:"flex-container skill-tree-container"},V={id:"reset-button",class:"btn btn-info"},E={id:"wrapper"},J={id:"skilltree"},O=j(()=>r("div",{id:"sidepanel-backdrop"},null,-1));function q(t,s,a,f,l,u){const d=p("SkillTreeFilter"),n=p("SkillPanel");return c(),k("div",U,[h(d,{id:"filter"}),v(r("button",V,"Reset",512),[[x,l.isRecentered]]),r("div",E,[r("div",J,[h(n,{skill:l.skill},null,8,["skill"])]),O])])}const H=g(R,[["render",q],["__scopeId","data-v-0dcd7519"]]);const K=r("div",{id:"purple-banner"},null,-1),W=r("span",null,"Loading...",-1),C={__name:"SkillTreeD3View",setup(t){return(s,a)=>(c(),k($,null,[K,(c(),b(I,null,{default:_(()=>[h(H)]),fallback:_(()=>[W]),_:1}))],64))}};export{C as default};
