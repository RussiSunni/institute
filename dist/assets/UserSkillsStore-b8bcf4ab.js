import{V as o,j as h}from"./main-08556031.js";import{u as L}from"./SkillsStore-f69d61ba.js";const p=o("userSkills",{state:()=>({unnestedList:[]}),actions:{async getUnnestedList(i){const n=await fetch("/user-skills/unnested-list/"+i);this.unnestedList=await n.json()},async MakeMastered(i,n){const t=L();t.skillsList.length==0&&await t.getSkillsList();const k=h();await this.getUnnestedList(i);let f="/user-skills/mastered/"+i+"/"+n;fetch(f).then(()=>{let r={};for(let e=0;e<t.skillsList.length;e++)t.skillsList[e].id==n&&(r=t.skillsList[e]);if(r.type!="sub"){const e=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==n&&e.push(t.skillsList[s]);let a=[];for(let s=0;s<e.length;s++)if(e[s].type=="regular"||e[s].type=="domain")this.MakeAccessible(i,e[s].id);else if(e[s].type=="super")for(let l=0;l<t.skillsList.length;l++)t.skillsList[l].parent==e[s].id&&t.skillsList[l].type=="sub"&&a.push(t.skillsList[l].id);for(let s=0;s<a.length;s++)this.MakeAccessible(i,a[s])}else{let e=[];for(let s=0;s<t.skillsList.length;s++)t.skillsList[s].parent==r.parent&&t.skillsList[s].id!=r.id&&t.skillsList[s].type=="sub"&&e.push(t.skillsList[s]);let a=!0;for(let s=0;s<this.unnestedList.length;s++)for(let l=0;l<e.length;l++)e[l].id==this.unnestedList[s].id&&this.unnestedList[s].is_mastered!=1&&(a=!1);a&&this.MakeAccessible(i,r.parent)}k.getUserSkills()})},async MakeAccessible(i,n){var t="/user-skills/accessible/"+i+"/"+n;fetch(t),await this.getUnnestedList(i)}}});export{p as u};
