import{a as nt,r as ft,c as mt,d as pt,i as st,T as W,b as j}from"./transform-e0dcee22.js";function Y(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],ft)}function Lt(t){return Y(mt(t).call(document.documentElement))}function _t(t){let n;for(;n=t.sourceEvent;)t=n;return t}function A(t,n){if(t=_t(t),n===void 0&&(n=t.currentTarget),n){var o=n.ownerSVGElement||n;if(o.createSVGPoint){var u=o.createSVGPoint();return u.x=t.clientX,u.y=t.clientY,u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}if(n.getBoundingClientRect){var l=n.getBoundingClientRect();return[t.clientX-l.left-n.clientLeft,t.clientY-l.top-n.clientTop]}}return[t.pageX,t.pageY]}const O={capture:!0,passive:!1};function J(t){t.preventDefault(),t.stopImmediatePropagation()}function gt(t){var n=t.document.documentElement,o=Y(t).on("dragstart.drag",J,O);"onselectstart"in n?o.on("selectstart.drag",J,O):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function dt(t,n){var o=t.document.documentElement,u=Y(t).on("dragstart.drag",null);n&&(u.on("click.drag",J,O),setTimeout(function(){u.on("click.drag",null)},0)),"onselectstart"in o?u.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}var yt=1e-12;function it(t){return((t=Math.exp(t))+1/t)/2}function vt(t){return((t=Math.exp(t))-1/t)/2}function zt(t){return((t=Math.exp(2*t))-1)/(t+1)}const $t=function t(n,o,u){function l(f,a){var $=f[0],g=f[1],c=f[2],d=a[0],M=a[1],v=a[2],T=d-$,C=M-g,b=T*T+C*C,I,h;if(b<yt)h=Math.log(v/c)/n,I=function(X){return[$+X*T,g+X*C,c*Math.exp(n*X*h)]};else{var E=Math.sqrt(b),w=(v*v-c*c+u*b)/(2*c*o*E),k=(v*v-c*c-u*b)/(2*v*o*E),S=Math.log(Math.sqrt(w*w+1)-w),P=Math.log(Math.sqrt(k*k+1)-k);h=(P-S)/n,I=function(X){var Z=X*h,K=it(S),Q=c/(o*E)*(K*zt(n*Z+S)-vt(S));return[$+Q*T,g+Q*C,c*K/it(n*Z+S)]}}return I.duration=h*1e3*n/Math.SQRT2,I}return l.rho=function(f){var a=Math.max(.001,+f),$=a*a,g=$*$;return t(a,$,g)},l}(Math.SQRT2,2,4),tt=Math.PI,et=2*tt,G=1e-6,Mt=et-G;function rt(t){this._+=t[0];for(let n=1,o=t.length;n<o;++n)this._+=arguments[n]+t[n]}function xt(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return rt;const o=10**n;return function(u){this._+=u[0];for(let l=1,f=u.length;l<f;++l)this._+=Math.round(arguments[l]*o)/o+u[l]}}class wt{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?rt:xt(n)}moveTo(n,o){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,o){this._append`L${this._x1=+n},${this._y1=+o}`}quadraticCurveTo(n,o,u,l){this._append`Q${+n},${+o},${this._x1=+u},${this._y1=+l}`}bezierCurveTo(n,o,u,l,f,a){this._append`C${+n},${+o},${+u},${+l},${this._x1=+f},${this._y1=+a}`}arcTo(n,o,u,l,f){if(n=+n,o=+o,u=+u,l=+l,f=+f,f<0)throw new Error(`negative radius: ${f}`);let a=this._x1,$=this._y1,g=u-n,c=l-o,d=a-n,M=$-o,v=d*d+M*M;if(this._x1===null)this._append`M${this._x1=n},${this._y1=o}`;else if(v>G)if(!(Math.abs(M*g-c*d)>G)||!f)this._append`L${this._x1=n},${this._y1=o}`;else{let T=u-a,C=l-$,b=g*g+c*c,I=T*T+C*C,h=Math.sqrt(b),E=Math.sqrt(v),w=f*Math.tan((tt-Math.acos((b+v-I)/(2*h*E)))/2),k=w/E,S=w/h;Math.abs(k-1)>G&&this._append`L${n+k*d},${o+k*M}`,this._append`A${f},${f},0,0,${+(M*T>d*C)},${this._x1=n+S*g},${this._y1=o+S*c}`}}arc(n,o,u,l,f,a){if(n=+n,o=+o,u=+u,a=!!a,u<0)throw new Error(`negative radius: ${u}`);let $=u*Math.cos(l),g=u*Math.sin(l),c=n+$,d=o+g,M=1^a,v=a?l-f:f-l;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>G||Math.abs(this._y1-d)>G)&&this._append`L${c},${d}`,u&&(v<0&&(v=v%et+et),v>Mt?this._append`A${u},${u},0,1,${M},${n-$},${o-g}A${u},${u},0,1,${M},${this._x1=c},${this._y1=d}`:v>G&&this._append`A${u},${u},0,${+(v>=tt)},${M},${this._x1=n+u*Math.cos(f)},${this._y1=o+u*Math.sin(f)}`)}rect(n,o,u,l){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+o}h${u=+u}v${+l}h${-u}Z`}toString(){return this._}}function ot(t){return function(){return t}}function Tt(t){let n=3;return t.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const u=Math.floor(o);if(!(u>=0))throw new RangeError(`invalid digits: ${o}`);n=u}return t},()=>new wt(n)}var bt=Array.prototype.slice;function Et(t){return t[0]}function kt(t){return t[1]}function U(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}class St{constructor(n,o){this._context=n,this._x=o}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,o){switch(n=+n,o=+o,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,o,n,o):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+o)/2,n,this._y0,n,o);break}}this._x0=n,this._y0=o}}class Pt{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,o){if(n=+n,o=+o,this._point===0)this._point=1;else{const u=U(this._x0,this._y0),l=U(this._x0,this._y0=(this._y0+o)/2),f=U(n,this._y0),a=U(n,o);this._context.moveTo(...u),this._context.bezierCurveTo(...l,...f,...a)}this._x0=n,this._y0=o}}function Dt(t){return new St(t,!0)}function Rt(t){return new Pt(t)}function Ct(t){return t.source}function It(t){return t.target}function at(t){let n=Ct,o=It,u=Et,l=kt,f=null,a=null,$=Tt(g);function g(){let c;const d=bt.call(arguments),M=n.apply(this,d),v=o.apply(this,d);if(f==null&&(a=t(c=$())),a.lineStart(),d[0]=M,a.point(+u.apply(this,d),+l.apply(this,d)),d[0]=v,a.point(+u.apply(this,d),+l.apply(this,d)),a.lineEnd(),c)return a=null,c+""||null}return g.source=function(c){return arguments.length?(n=c,g):n},g.target=function(c){return arguments.length?(o=c,g):o},g.x=function(c){return arguments.length?(u=typeof c=="function"?c:ot(+c),g):u},g.y=function(c){return arguments.length?(l=typeof c=="function"?c:ot(+c),g):l},g.context=function(c){return arguments.length?(c==null?f=a=null:a=t(f=c),g):f},g}function Zt(){return at(Dt)}function Kt(){const t=at(Rt);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const H=t=>()=>t;function qt(t,{sourceEvent:n,target:o,transform:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}function F(t){t.stopImmediatePropagation()}function L(t){t.preventDefault(),t.stopImmediatePropagation()}function Bt(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Vt(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ut(){return this.__zoom||st}function Xt(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Yt(){return navigator.maxTouchPoints||"ontouchstart"in this}function At(t,n,o){var u=t.invertX(n[0][0])-o[0][0],l=t.invertX(n[1][0])-o[1][0],f=t.invertY(n[0][1])-o[0][1],a=t.invertY(n[1][1])-o[1][1];return t.translate(l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l),a>f?(f+a)/2:Math.min(0,f)||Math.max(0,a))}function Qt(){var t=Bt,n=Vt,o=At,u=Xt,l=Yt,f=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],$=250,g=$t,c=pt("start","zoom","end"),d,M,v,T=500,C=150,b=0,I=10;function h(e){e.property("__zoom",ut).on("wheel.zoom",Z,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",Q).filter(l).on("touchstart.zoom",ht).on("touchmove.zoom",ct).on("touchend.zoom touchcancel.zoom",lt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(e,s,i,r){var m=e.selection?e.selection():e;m.property("__zoom",ut),e!==m?S(e,s,i,r):m.interrupt().each(function(){P(this,arguments).event(r).start().zoom(null,typeof s=="function"?s.apply(this,arguments):s).end()})},h.scaleBy=function(e,s,i,r){h.scaleTo(e,function(){var m=this.__zoom.k,p=typeof s=="function"?s.apply(this,arguments):s;return m*p},i,r)},h.scaleTo=function(e,s,i,r){h.transform(e,function(){var m=n.apply(this,arguments),p=this.__zoom,_=i==null?k(m):typeof i=="function"?i.apply(this,arguments):i,y=p.invert(_),z=typeof s=="function"?s.apply(this,arguments):s;return o(w(E(p,z),_,y),m,a)},i,r)},h.translateBy=function(e,s,i,r){h.transform(e,function(){return o(this.__zoom.translate(typeof s=="function"?s.apply(this,arguments):s,typeof i=="function"?i.apply(this,arguments):i),n.apply(this,arguments),a)},null,r)},h.translateTo=function(e,s,i,r,m){h.transform(e,function(){var p=n.apply(this,arguments),_=this.__zoom,y=r==null?k(p):typeof r=="function"?r.apply(this,arguments):r;return o(st.translate(y[0],y[1]).scale(_.k).translate(typeof s=="function"?-s.apply(this,arguments):-s,typeof i=="function"?-i.apply(this,arguments):-i),p,a)},r,m)};function E(e,s){return s=Math.max(f[0],Math.min(f[1],s)),s===e.k?e:new W(s,e.x,e.y)}function w(e,s,i){var r=s[0]-i[0]*e.k,m=s[1]-i[1]*e.k;return r===e.x&&m===e.y?e:new W(e.k,r,m)}function k(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function S(e,s,i,r){e.on("start.zoom",function(){P(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(r).end()}).tween("zoom",function(){var m=this,p=arguments,_=P(m,p).event(r),y=n.apply(m,p),z=i==null?k(y):typeof i=="function"?i.apply(m,p):i,q=Math.max(y[1][0]-y[0][0],y[1][1]-y[0][1]),x=m.__zoom,D=typeof s=="function"?s.apply(m,p):s,B=g(x.invert(z).concat(q/x.k),D.invert(z).concat(q/D.k));return function(R){if(R===1)R=D;else{var V=B(R),N=q/V[2];R=new W(N,z[0]-V[0]*N,z[1]-V[1]*N)}_.zoom(null,R)}})}function P(e,s,i){return!i&&e.__zooming||new X(e,s)}function X(e,s){this.that=e,this.args=s,this.active=0,this.sourceEvent=null,this.extent=n.apply(e,s),this.taps=0}X.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,s){return this.mouse&&e!=="mouse"&&(this.mouse[1]=s.invert(this.mouse[0])),this.touch0&&e!=="touch"&&(this.touch0[1]=s.invert(this.touch0[0])),this.touch1&&e!=="touch"&&(this.touch1[1]=s.invert(this.touch1[0])),this.that.__zoom=s,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var s=Y(this.that).datum();c.call(e,this.that,new qt(e,{sourceEvent:this.sourceEvent,target:h,type:e,transform:this.that.__zoom,dispatch:c}),s)}};function Z(e,...s){if(!t.apply(this,arguments))return;var i=P(this,s).event(e),r=this.__zoom,m=Math.max(f[0],Math.min(f[1],r.k*Math.pow(2,u.apply(this,arguments)))),p=A(e);if(i.wheel)(i.mouse[0][0]!==p[0]||i.mouse[0][1]!==p[1])&&(i.mouse[1]=r.invert(i.mouse[0]=p)),clearTimeout(i.wheel);else{if(r.k===m)return;i.mouse=[p,r.invert(p)],j(this),i.start()}L(e),i.wheel=setTimeout(_,C),i.zoom("mouse",o(w(E(r,m),i.mouse[0],i.mouse[1]),i.extent,a));function _(){i.wheel=null,i.end()}}function K(e,...s){if(v||!t.apply(this,arguments))return;var i=e.currentTarget,r=P(this,s,!0).event(e),m=Y(e.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",q,!0),p=A(e,i),_=e.clientX,y=e.clientY;gt(e.view),F(e),r.mouse=[p,this.__zoom.invert(p)],j(this),r.start();function z(x){if(L(x),!r.moved){var D=x.clientX-_,B=x.clientY-y;r.moved=D*D+B*B>b}r.event(x).zoom("mouse",o(w(r.that.__zoom,r.mouse[0]=A(x,i),r.mouse[1]),r.extent,a))}function q(x){m.on("mousemove.zoom mouseup.zoom",null),dt(x.view,r.moved),L(x),r.event(x).end()}}function Q(e,...s){if(t.apply(this,arguments)){var i=this.__zoom,r=A(e.changedTouches?e.changedTouches[0]:e,this),m=i.invert(r),p=i.k*(e.shiftKey?.5:2),_=o(w(E(i,p),r,m),n.apply(this,s),a);L(e),$>0?Y(this).transition().duration($).call(S,_,r,e):Y(this).call(h.transform,_,r,e)}}function ht(e,...s){if(t.apply(this,arguments)){var i=e.touches,r=i.length,m=P(this,s,e.changedTouches.length===r).event(e),p,_,y,z;for(F(e),_=0;_<r;++_)y=i[_],z=A(y,this),z=[z,this.__zoom.invert(z),y.identifier],m.touch0?!m.touch1&&m.touch0[2]!==z[2]&&(m.touch1=z,m.taps=0):(m.touch0=z,p=!0,m.taps=1+!!d);d&&(d=clearTimeout(d)),p&&(m.taps<2&&(M=z[0],d=setTimeout(function(){d=null},T)),j(this),m.start())}}function ct(e,...s){if(this.__zooming){var i=P(this,s).event(e),r=e.changedTouches,m=r.length,p,_,y,z;for(L(e),p=0;p<m;++p)_=r[p],y=A(_,this),i.touch0&&i.touch0[2]===_.identifier?i.touch0[0]=y:i.touch1&&i.touch1[2]===_.identifier&&(i.touch1[0]=y);if(_=i.that.__zoom,i.touch1){var q=i.touch0[0],x=i.touch0[1],D=i.touch1[0],B=i.touch1[1],R=(R=D[0]-q[0])*R+(R=D[1]-q[1])*R,V=(V=B[0]-x[0])*V+(V=B[1]-x[1])*V;_=E(_,Math.sqrt(R/V)),y=[(q[0]+D[0])/2,(q[1]+D[1])/2],z=[(x[0]+B[0])/2,(x[1]+B[1])/2]}else if(i.touch0)y=i.touch0[0],z=i.touch0[1];else return;i.zoom("touch",o(w(_,y,z),i.extent,a))}}function lt(e,...s){if(this.__zooming){var i=P(this,s).event(e),r=e.changedTouches,m=r.length,p,_;for(F(e),v&&clearTimeout(v),v=setTimeout(function(){v=null},T),p=0;p<m;++p)_=r[p],i.touch0&&i.touch0[2]===_.identifier?delete i.touch0:i.touch1&&i.touch1[2]===_.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),i.taps===2&&(_=A(_,this),Math.hypot(M[0]-_[0],M[1]-_[1])<I)){var y=Y(this).on("dblclick.zoom");y&&y.apply(this,arguments)}}}return h.wheelDelta=function(e){return arguments.length?(u=typeof e=="function"?e:H(+e),h):u},h.filter=function(e){return arguments.length?(t=typeof e=="function"?e:H(!!e),h):t},h.touchable=function(e){return arguments.length?(l=typeof e=="function"?e:H(!!e),h):l},h.extent=function(e){return arguments.length?(n=typeof e=="function"?e:H([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):n},h.scaleExtent=function(e){return arguments.length?(f[0]=+e[0],f[1]=+e[1],h):[f[0],f[1]]},h.translateExtent=function(e){return arguments.length?(a[0][0]=+e[0][0],a[1][0]=+e[1][0],a[0][1]=+e[0][1],a[1][1]=+e[1][1],h):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},h.constrain=function(e){return arguments.length?(o=e,h):o},h.duration=function(e){return arguments.length?($=+e,h):$},h.interpolate=function(e){return arguments.length?(g=e,h):g},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,h):Math.sqrt(b)},h.tapDistance=function(e){return arguments.length?(I=+e,h):I},h}export{Zt as a,Lt as c,Kt as l,Y as s,Qt as z};
