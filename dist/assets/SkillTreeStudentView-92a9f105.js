import{z as me,_ as we,S as ge,A as ye,B as ve,G as q,n as ie,C as ae,e as xe,o as se,c as ce,a as K,h as he,p as _e,b as ke,f as Ie,g as re,y as Se,F as be}from"./main-34276cba.js";var ue={exports:{}};(function(a){(function(){function P(e,n){document.addEventListener?e.addEventListener("scroll",n,!1):e.attachEvent("scroll",n)}function C(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function n(){document.removeEventListener("DOMContentLoaded",n),e()}):document.attachEvent("onreadystatechange",function n(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",n),e())})}function m(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function h(e,n){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+n+";"}function B(e){var n=e.g.offsetWidth,t=n+100;return e.j.style.width=t+"px",e.i.scrollLeft=t,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==n?(e.l=n,!0):!1}function A(e,n){function t(){var u=s;B(u)&&u.g.parentNode!==null&&n(u.l)}var s=e;P(e.h,t),P(e.i,t),B(e)}function g(e,n,t){n=n||{},t=t||window,this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal",this.context=t}var W=null,I=null,R=null,S=null;function X(e){return I===null&&(H(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),I=!!e&&603>parseInt(e[1],10)):I=!1),I}function H(e){return S===null&&(S=!!e.document.fonts),S}function L(e,n){var t=e.style,s=e.weight;if(R===null){var u=document.createElement("div");try{u.style.font="condensed 100px sans-serif"}catch{}R=u.style.font!==""}return[t,s,R?e.stretch:"","100px",n].join(" ")}g.prototype.load=function(e,n){var t=this,s=e||"BESbswy",u=0,y=n||3e3,l=new Date().getTime();return new Promise(function(b,v){if(H(t.context)&&!X(t.context)){var N=new Promise(function(r,x){function _(){new Date().getTime()-l>=y?x(Error(""+y+"ms timeout exceeded")):t.context.document.fonts.load(L(t,'"'+t.family+'"'),s).then(function(E){1<=E.length?r():setTimeout(_,25)},x)}_()}),J=new Promise(function(r,x){u=setTimeout(function(){x(Error(""+y+"ms timeout exceeded"))},y)});Promise.race([J,N]).then(function(){clearTimeout(u),b(t)},v)}else C(function(){function r(){var i;(i=w!=-1&&T!=-1||w!=-1&&f!=-1||T!=-1&&f!=-1)&&((i=w!=T&&w!=f&&T!=f)||(W===null&&(i=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),W=!!i&&(536>parseInt(i[1],10)||parseInt(i[1],10)===536&&11>=parseInt(i[2],10))),i=W&&(w==F&&T==F&&f==F||w==M&&T==M&&f==M||w==k&&T==k&&f==k)),i=!i),i&&(p.parentNode!==null&&p.parentNode.removeChild(p),clearTimeout(u),b(t))}function x(){if(new Date().getTime()-l>=y)p.parentNode!==null&&p.parentNode.removeChild(p),v(Error(""+y+"ms timeout exceeded"));else{var i=t.context.document.hidden;(i===!0||i===void 0)&&(w=_.g.offsetWidth,T=E.g.offsetWidth,f=o.g.offsetWidth,r()),u=setTimeout(x,50)}}var _=new m(s),E=new m(s),o=new m(s),w=-1,T=-1,f=-1,F=-1,M=-1,k=-1,p=document.createElement("div");p.dir="ltr",h(_,L(t,"sans-serif")),h(E,L(t,"serif")),h(o,L(t,"monospace")),p.appendChild(_.g),p.appendChild(E.g),p.appendChild(o.g),t.context.document.body.appendChild(p),F=_.g.offsetWidth,M=E.g.offsetWidth,k=o.g.offsetWidth,x(),A(_,function(i){w=i,r()}),h(_,L(t,'"'+t.family+'",sans-serif')),A(E,function(i){T=i,r()}),h(E,L(t,'"'+t.family+'",serif')),A(o,function(i){f=i,r()}),h(o,L(t,'"'+t.family+'",monospace'))})})},a.exports=g})()})(ue);var Ee=ue.exports;const Te=me(Ee);const Pe={setup(){},data(){return{userId:this.$route.params.id,firstLevelNodeRadius:36,otherLevelNodeRadius:17,firstLevelCircleRadius:300,nodeDistance:300,isSkillInfoPanelShown:!1}},components:{SkillPanel:ge},async mounted(){const a=await fetch("/user-skills/"+this.userId);this.userSkills=await a.json(),new Te("Poppins900",{}).load().then(()=>{const C=document.getElementById("skilltree"),m=new ye({resizeTo:C,antialias:!0,useContextAlpha:!1});var h=window.getComputedStyle(document.getElementById("skilltree"),null),B=h.getPropertyValue("width"),A=h.getPropertyValue("height");const g=new ve({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:B,worldHeight:A,events:m.renderer.events});g.sortableChildren=!0,m.stage.addChild(g),g.drag().pinch().wheel().clampZoom({minScale:.2,maxScale:4}),C.appendChild(m.view);let W=new q;W.lineStyle(3,13162458,1),W.beginFill(16777215,1),W.drawCircle(window.innerWidth/2,window.innerHeight/2,65),W.endFill(),g.addChild(W);let I=new ie("SKILLS",{fontFamily:"Poppins900",fontSize:90,fill:0,align:"center"});I.anchor.set(.5),I.x=window.innerWidth/2,I.y=window.innerHeight/2,I.scale.x=.2,I.scale.y=.2,g.addChild(I);var R=this.userSkills.length;for(let y=0;y<R;y++){let E=function(o,w,T,f,F,M,k){M++;let p={depth:M,skills:[]};f=f+w.x,F=F+w.y;let i=300,le=75,fe=17;for(let[z,D]of o.entries()){let d=new ae,O=0,Y=0;for(let c=0;c<o.length;c++)o[c].type!="sub"?O++:Y++;let $=0;if(D.type!="sub"){let c=0;M==1?c=135/O:c=90/O;let ee=z-Y;$=T+c*ee,M==1?$=$-67.5+67.5/O:$=$-45+45/O;let te=$*Math.PI/180,Q=d.x+i*Math.cos(te),ne=d.y+i*Math.sin(te);d.x=d.x+Q,d.y=d.y+ne,p.skills.push(d)}else{let c=360/Y,ee=z-O,Q=c*ee*Math.PI/180,ne=d.x+le*Math.cos(Q),pe=d.y+le*Math.sin(Q);d.x=d.x+ne,d.y=d.y+pe}let j=new q;var V;o[z].is_mastered==1?V="0x"+l.mastered_color:o[z].is_accessible==1?(j.lineStyle(1,"0x"+l.mastered_color,1),V="0x"+l.unlocked_color):V="0xD9D9D9",j.beginFill(V),j.drawCircle(0,0,fe),d.addChild(j);let oe=40;const de=o[z].skill_name.split(" ");for(let c=0;c<de.length;c++)de[c].length>9&&(oe=37);o[z].skill_name=o[z].skill_name.replace(/(.*?\s)/g,`$1
`);let G=new ie(o[z].skill_name.toUpperCase(),{fontFamily:"Poppins900",fontSize:oe,fill:16777215,align:"center"});G.anchor.set(.5),G.scale.x=.1,G.scale.y=.1,d.addChild(G);let Z={id:D.id,isMastered:D.is_mastered,isUnlocked:D.is_accessible,color:V,container:d,name:D.skill_name,description:D.description,tagIDs:[]};j.eventMode="static",G.eventMode="static",j.cursor="pointer",G.cursor="pointer",G.on("pointerdown",c=>{k.isSkillInfoPanelShown?k.updateInfoPanel(Z):k.showInfoPanel(Z)}),j.on("pointerdown",c=>{k.isSkillInfoPanelShown?k.updateInfoPanel(Z):k.showInfoPanel(Z)}),w.addChild(d);const U=new q;U.lineStyle(2,V,1),U.position.x=f,U.position.y=F,U.lineTo(d.x,d.y),U.zIndex=-1,g.addChild(U),_.push(p),D.children&&Array.isArray(D.children)&&D.children.length>0&&E(D.children,d,$,f,F,M,k)}},l=this.userSkills[y],b=new q;var S;l.is_mastered==1?S="0x"+l.mastered_color:l.is_accessible==1?(b.lineStyle(1,"0x"+l.mastered_color,1),S="0x"+l.unlocked_color):S="0xD9D9D9";var X=Math.PI*2/R,H=X*y,L=65*Math.cos(H),e=65*Math.sin(H);let v=new q;v.x=window.innerWidth/2+L,v.y=window.innerHeight/2+e,v.beginFill(S),v.drawCircle(0,0,7.5),g.addChild(v);var n=this.firstLevelCircleRadius*Math.cos(H),t=this.firstLevelCircleRadius*Math.sin(H),s=new ae;s.x=window.innerWidth/2+n,s.y=window.innerHeight/2+t,b.beginFill(S),b.drawCircle(0,0,this.firstLevelNodeRadius),b.endFill();const N=new q;N.lineStyle(2,S,1),N.position.x=s.x,N.position.y=s.y,N.lineTo(v.x-s.x,v.y-s.y),g.addChild(N),N.position.x,N.position.y,v.x-s.x,v.y-s.y;var u=60;const J=l.skill_name.split(" ");for(let o=0;o<J.length;o++)J[o].length>8&&(u=45);l.skill_name=l.skill_name.replace(/(.*?\s)/g,`$1
`);let r=new ie(l.skill_name.toUpperCase(),{fontFamily:"Poppins900",fontSize:u,fill:16777215,align:"center"});r.anchor.set(.5),r.scale.x=.2,r.scale.y=.2,s.addChild(b),s.addChild(r),g.addChild(s);let x={id:l.id,isMastered:l.is_mastered,isUnlocked:l.is_accessible,color:S,container:s,tagIDs:[],name:l.skill_name,description:l.description};b.eventMode="static",r.eventMode="static",b.cursor="pointer",r.cursor="pointer",b.on("pointerdown",o=>{this.isSkillInfoPanelShown?this.updateInfoPanel(x):this.showInfoPanel(x)}),r.on("pointerdown",o=>{this.isSkillInfoPanelShown?this.updateInfoPanel(x):this.showInfoPanel(x)});let _=[];l.skill_name,E(l.children,s,H*60,0,0,0,this)}},()=>{console.log("Unable to load required font!")})},methods:{showInfoPanel(a){if(!this.isSkillInfoPanelShown){screen.width>800?document.getElementById("skillInfoPanel").style.width="474px":document.getElementById("skillInfoPanel").style.height="474px",document.getElementById("sidepanel-backdrop").style.display="block",this.isSkillInfoPanelShown=!0;var P=document.getElementById("skillHeading"),C=document.createTextNode(a.name);P.appendChild(C);var m=document.getElementById("skillDescription"),h=document.createTextNode(a.description);m.appendChild(h),a.isMastered=="1"&&(document.getElementById("skillIsMastered").checked=!0);var B=document.getElementById("skillLink");B.setAttribute("href","/skills/"+a.id)}},updateInfoPanel(a){if(this.isSkillInfoPanelShown){var P=document.getElementById("skillHeading");P.innerHTML="";var C=document.createTextNode(a.name);P.appendChild(C);var m=document.getElementById("skillDescription");m.innerHTML="";var h=document.createTextNode(a.description);m.appendChild(h),a.isMastered=="1"?document.getElementById("skillIsMastered").checked=!0:document.getElementById("skillIsMastered").checked=!1;var B=document.getElementById("skillLink");B.setAttribute("href","/skills/"+a.id)}}}},Ce=a=>(_e("data-v-f6a2f13c"),a=a(),ke(),a),Ne={class:"flex-container skill-tree-container"},Me={id:"wrapper"},De={id:"skilltree"},Be=Ce(()=>K("div",{id:"sidepanel-backdrop"},null,-1));function We(a,P,C,m,h,B){const A=xe("SkillPanel");return se(),ce("div",Ne,[K("div",Me,[K("div",De,[he(A)]),Be])])}const Le=we(Pe,[["render",We],["__scopeId","data-v-f6a2f13c"]]);const Fe=K("div",{id:"purple-banner"},null,-1),He=K("span",null,"Loading...",-1),Ae={__name:"SkillTreeStudentView",setup(a){return(P,C)=>(se(),ce(be,null,[Fe,(se(),Ie(Se,null,{default:re(()=>[he(Le)]),fallback:re(()=>[He]),_:1}))],64))}};export{Ae as default};
